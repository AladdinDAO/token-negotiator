{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/nicktaras/Documents/alphawallet/token-negotiator/node_modules/asn1js/node_modules/pvutils/src/utils.js","webpack:////Users/nicktaras/Documents/alphawallet/token-negotiator/node_modules/asn1js/src/asn1.js","webpack:///../node_modules/pvutils/src/utils.js","webpack:////Users/nicktaras/Documents/alphawallet/token-negotiator/node_modules/big-integer/BigInteger.js","webpack:///./token-negotiator-local/Attestation/AlgorithmIdentifier.js","webpack:///./token-negotiator-local/Attestation/PublicKeyInfo.js","webpack:///../node_modules/buffer/index.js","webpack:///./token-negotiator-local/Attestation/SignedDevonTicket.js","webpack:///./index.ts","webpack:///./token-negotiator-local/negotiator/modal/index.ts","webpack:///./token-negotiator-local/negotiator/tokenConfig.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///../node_modules/base64-js/index.js","webpack:///../node_modules/ieee754/index.js","webpack:///../node_modules/isarray/index.js","webpack:///../node_modules/webpack/buildin/module.js","webpack:///./token-negotiator-local/negotiator/utils.js","webpack:///./token-negotiator-local/negotiator/modal/clientStateService.ts","webpack:///./token-negotiator-local/negotiator/modal/tokenComponent.ts","webpack:///./theme/fab-button.svg","webpack:///./theme/style.css?3d5f","webpack:///./theme/style.css","webpack:///../node_modules/css-loader/lib/css-base.js","webpack:///../node_modules/style-loader/lib/addStyles.js","webpack:///../node_modules/style-loader/lib/urls.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getParametersValue","parameters","defaultValue","bufferToHexCodes","inputBuffer","inputOffset","inputLength","byteLength","insertSpace","result","item","Uint8Array","str","toString","toUpperCase","length","trim","checkBufferParams","baseBlock","ArrayBuffer","error","utilFromBase","inputBase","Math","pow","utilToBase","base","reserved","internalReserved","internalValue","biggest","retBuf","retView","j","basis","floor","utilConcatBuf","buffers","outputLength","prevLength","buffer","set","utilConcatView","views","view","utilDecodeTC","buf","this","valueHex","condition1","condition2","warnings","push","bigIntBuffer","bigIntView","bigInt","smallIntBuffer","smallIntView","isEqualBuffer","inputBuffer1","inputBuffer2","view1","view2","padNumber","inputNumber","fullLength","dif","padding","Array","join","concat","log","powers2","blockLength","valueBeforeDecode","slice","blockName","constructor","HexBlock","BaseClass","super","isHexOnly","sizeOnly","toJSON","ex","idBlock","tagClass","tagNumber","isConstructed","firstOctet","number","encodedBuf","encodedView","size","curView","intBuffer","tagNumberMask","count","tagNumberBufferMaxLength","intTagNumberBuffer","tempBuffer","tempBufferView","isIndefiniteForm","lenBlock","longFormUsed","lengthBufferView","ValueBlock","TypeError","valueBlockType","optional","primitiveSchema","valueBlock","resultOffset","fromBER","idBlockBuf","toBER","valueBlockSizeBuf","valueBlockBuf","indefBuf","indefView","valueHexView","Primitive","initialOffset","initialLength","currentOffset","indefiniteLength","returnObject","LocalFromBER","offset","EndOfContent","pop","Constructed","values","split","map","LocalEndOfContentValueBlock","paramaters","Boolean","Sequence","Set","Null","currentBlockName","asn","e","octetString","JSON","stringify","unusedBits","BitString","bitString","bits","byte","padStart","valueDec","_value","_valueHex","_valueDec","modValue","tempBuf","tempView","k","utilEncodeTC","expectedLength","updatedValueHex","updatedView","viewAdd","first","second","firstView","secondView","firstViewCopy","firstViewCopyLength","secondViewCopy","secondViewCopyLength","counter","power2","digits","newValue","viewSub","b","firstBit","currentByte","bitNumber","asn1View","flag","byteNumber","charAt","otherValue","integer","toDER","fromDER","hex","BigInt","Enumerated","isFirstSid","tempValueHex","sidValue","fromString","sidBlock","valueBuf","string","pos1","pos2","sid","indexOf","substr","plus","parsedSID","parseInt","isNaN","sidStr","sidArray","ObjectIdentifier","LocalUtf8StringValueBlock","Utf8String","fromBuffer","String","fromCharCode","apply","decodeURIComponent","escape","inputString","unescape","encodeURIComponent","strLen","charCodeAt","RelativeObjectIdentifier","LocalBmpStringValueBlock","copyBuffer","valueView","temp","Uint16Array","strLength","codeBuf","codeView","LocalUniversalStringValueBlock","Uint32Array","LocalSimpleStringValueBlock","LocalSimpleStringBlock","NumericString","PrintableString","TeletexString","VideotexString","IA5String","GraphicString","VisibleString","GeneralString","CharacterString","year","month","day","hour","minute","fromDate","valueDate","toBuffer","inputDate","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Date","UTC","parserArray","exec","outputArray","millisecond","getUTCMilliseconds","parser","isUTC","timeString","dateTimeString","fractionPart","hourDifference","minuteDifference","Number","valueOf","Error","multiplier","differencePosition","differenceString","fractionPointPosition","fractionPartCheck","fractionResult","tempDate","getUTCDay","DATE","TimeOfDay","DateTime","Duration","TIME","local","incomingOffset","newASN1Type","newObject","inputObject","newType","localChangeType","compareSchema","root","inputData","inputSchema","choiceResult","verified","_result","encodedId","schemaView","replace","admission","maxLength","_optional","arrayRoot","asn1","clearProps","propsArray","prop","BASE","MAX_INT","MAX_INT_ARR","smallToArray","supportsNativeBigInt","Integer","v","radix","alphabet","caseSensitive","parseBase","parseValue","BigInteger","sign","isSmall","SmallInteger","NativeBigInt","isPrecise","arrayToSmall","arr","compareAbs","createArray","x","truncate","ceil","add","a","sum","l_a","l_b","carry","addAny","addSmall","subtract","difference","a_l","b_l","borrow","subtractSmall","multiplyLong","product","a_i","multiplySmall","shiftLeft","multiplySmallAndArray","square","divModSmall","lambda","q","remainder","divisor","quotient","divModAny","self","negate","abs","comparison","quotientDigit","shift","divisorMostSignificantDigit","divMod1","guess","xlen","highx","highy","check","part","unshift","reverse","divMod2","qSign","mod","mSign","isBasicPrime","isUnit","equals","isEven","isDivisibleBy","lesser","millerRabinTest","nPrev","prev","divide","next","modPow","subtractAny","minus","small","multiply","l1","l2","multiplyKaratsuba","y","max","ac","bd","abcd","times","_multiplyBySmall","divmod","over","_0","_1","_2","isNegative","exp","isZero","modInv","isPositive","isOdd","compare","Infinity","compareTo","eq","notEquals","neq","greater","gt","lt","greaterOrEquals","geq","lesserOrEquals","leq","isPrime","strict","bitLength","logN","toJSNumber","isProbablePrime","iterations","rng","randBetween","lastT","lastR","zero","newT","one","newR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","bitwise","fn","xSign","ySign","xRem","not","yRem","xDigit","yDigit","xDivMod","yDivMod","shiftRight","remQuo","and","or","xor","roughLOB","min","gcd","integerLogarithm","tmp","text","toLowerCase","absBase","alphabetValues","start","parseBaseFromArray","val","toBase","neg","out","left","digit","toBaseString","parseStringValue","decimalPlace","test","parseNumberValue","toArray","minusOne","lcm","isInstance","usedRNG","random","low","range","restricted","top","fromArray","source","fromSchema","algorithmId","algorithmParams","defaultValues","memberName","memberValue","asn1js","Any","names","algorithmIdentifier","schema","algorithm","params","signatureAlgorithm","publicKey","base64","ieee754","isArray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","obj","isBuffer","len","checked","copy","type","data","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","remaining","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","list","pos","swap16","swap32","swap64","arguments","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","code","INVALID_BASE64_RE","leadSurrogate","toByteArray","stringtrim","base64clean","src","dst","DevconTicket","devconId","ticketId","ticketClass","SignedDevconTicket","base64str","startsWith","URL","searchParams","atob","ticket","commitment","publicKeyInfo","signatureValue","filter","tokenName","options","console","XMLconfig","tokenConfig","tokenParser","getTokens","tokensOrigin","Promise","resolve","reject","window","location","href","tokensOutput","readTokens","localStorageItemName","success","noTokens","decodedTokens","decodeTokens","tokens","filteredTokens","filterTokens","keys","forEach","token","fitFilter","storageTickets","localStorage","getItem","output","parse","secret","callBack","rawTokens","tokenData","decodedToken","base64ToUint8array","unsignedTokenDataName","Modal","clientStateService","addEventListener","event","modalEventReciever","initNegotiator","appendModalContent","applyModalAnimationSmoothing","then","results","tokenContainer","innerHTML","addTokens","document","querySelector","index","tokenComponent","getElementsByClassName","style","transition","evt","tokenSelectorContainer","modalEventSender","emitTokenButtonHTML","emitSelectedTokens","emitModalToggleState","postMessage","button","selectedTokens","modalClickTimer","element","isOpen","toggleModalState","classList","contains","toggle","state","remove","clearTimeout","setTimeout","tokenToggleSelection","querySelectorAll","dataset","opacity","tokenUid","attestationOrigin","tokenOrigin","tokenUrlName","tokenSecretName","tokenIdName","localStorageEthKeyItemName","g","Function","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","webpackPolyfill","deprecate","paths","children","compareObjects","o1","o2","ClientTokenService","content","transform","locals","useSourceMap","cssMapping","btoa","sourceMapping","sourceMap","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules","id","memo","stylesInDom","isOldIE","all","getTarget","parent","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","addStyle","listToStyles","newStyles","css","media","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createElement","attrs","nonce","getNonce","addAttrs","el","setAttribute","update","styleIndex","applyToSingletonTag","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","//**************************************************************************************\r\n/**\r\n * Making UTC date from local date\r\n * @param {Date} date Date to convert from\r\n * @returns {Date}\r\n */\r\nexport function getUTCDate(date)\r\n{\r\n\t// noinspection NestedFunctionCallJS, MagicNumberJS\r\n\treturn new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Get value for input parameters, or set a default value\r\n * @param {Object} parameters\r\n * @param {string} name\r\n * @param defaultValue\r\n */\r\nexport function getParametersValue(parameters, name, defaultValue)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tif((parameters instanceof Object) === false)\r\n\t\treturn defaultValue;\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(name in parameters)\r\n\t\treturn parameters[name];\r\n\t\r\n\treturn defaultValue;\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Converts \"ArrayBuffer\" into a hexdecimal string\r\n * @param {ArrayBuffer} inputBuffer\r\n * @param {number} [inputOffset=0]\r\n * @param {number} [inputLength=inputBuffer.byteLength]\r\n * @param {boolean} [insertSpace=false]\r\n * @returns {string}\r\n */\r\nexport function bufferToHexCodes(inputBuffer, inputOffset = 0, inputLength = (inputBuffer.byteLength - inputOffset), insertSpace = false)\r\n{\r\n\tlet result = \"\";\r\n\t\r\n\tfor(const item of (new Uint8Array(inputBuffer, inputOffset, inputLength)))\r\n\t{\r\n\t\t// noinspection ChainedFunctionCallJS\r\n\t\tconst str = item.toString(16).toUpperCase();\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\t\tif(str.length === 1)\r\n\t\t\tresult += \"0\";\r\n\t\t\r\n\t\tresult += str;\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(insertSpace)\r\n\t\t\tresult += \" \";\r\n\t}\r\n\t\r\n\treturn result.trim();\r\n}\r\n//**************************************************************************************\r\n// noinspection JSValidateJSDoc, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Check input \"ArrayBuffer\" for common functions\r\n * @param {LocalBaseBlock} baseBlock\r\n * @param {ArrayBuffer} inputBuffer\r\n * @param {number} inputOffset\r\n * @param {number} inputLength\r\n * @returns {boolean}\r\n */\r\nexport function checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif((inputBuffer instanceof ArrayBuffer) === false)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputBuffer must be \\\"ArrayBuffer\\\"\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputBuffer.byteLength === 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputOffset < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputLength < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif((inputBuffer.byteLength - inputOffset - inputLength) < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Convert number from 2^base to 2^10\r\n * @param {Uint8Array} inputBuffer\r\n * @param {number} inputBase\r\n * @returns {number}\r\n */\r\nexport function utilFromBase(inputBuffer, inputBase)\r\n{\r\n\tlet result = 0;\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tif(inputBuffer.length === 1)\r\n\t\treturn inputBuffer[0];\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tfor(let i = (inputBuffer.length - 1); i >= 0; i--)\r\n\t\tresult += inputBuffer[(inputBuffer.length - 1) - i] * Math.pow(2, inputBase * i);\r\n\t\r\n\treturn result;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Convert number from 2^10 to 2^base\r\n * @param {!number} value The number to convert\r\n * @param {!number} base The base for 2^base\r\n * @param {number} [reserved=0] Pre-defined number of bytes in output array (-1 = limited by function itself)\r\n * @returns {ArrayBuffer}\r\n */\r\nexport function utilToBase(value, base, reserved = (-1))\r\n{\r\n\tconst internalReserved = reserved;\r\n\tlet internalValue = value;\r\n\t\r\n\tlet result = 0;\r\n\tlet biggest = Math.pow(2, base);\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tfor(let i = 1; i < 8; i++)\r\n\t{\r\n\t\tif(value < biggest)\r\n\t\t{\r\n\t\t\tlet retBuf;\r\n\t\t\t\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(internalReserved < 0)\r\n\t\t\t{\r\n\t\t\t\tretBuf = new ArrayBuffer(i);\r\n\t\t\t\tresult = i;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\t\tif(internalReserved < i)\r\n\t\t\t\t\treturn (new ArrayBuffer(0));\r\n\t\t\t\t\r\n\t\t\t\tretBuf = new ArrayBuffer(internalReserved);\r\n\t\t\t\t\r\n\t\t\t\tresult = internalReserved;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst retView = new Uint8Array(retBuf);\r\n\t\t\t\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tfor(let j = (i - 1); j >= 0; j--)\r\n\t\t\t{\r\n\t\t\t\tconst basis = Math.pow(2, j * base);\r\n\t\t\t\t\r\n\t\t\t\tretView[result - j - 1] = Math.floor(internalValue / basis);\r\n\t\t\t\tinternalValue -= (retView[result - j - 1]) * basis;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn retBuf;\r\n\t\t}\r\n\t\t\r\n\t\tbiggest *= Math.pow(2, base);\r\n\t}\r\n\t\r\n\treturn new ArrayBuffer(0);\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Concatenate two ArrayBuffers\r\n * @param {...ArrayBuffer} buffers Set of ArrayBuffer\r\n */\r\nexport function utilConcatBuf(...buffers)\r\n{\r\n\t//region Initial variables\r\n\tlet outputLength = 0;\r\n\tlet prevLength = 0;\r\n\t//endregion\r\n\t\r\n\t//region Calculate output length\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const buffer of buffers)\r\n\t\toutputLength += buffer.byteLength;\r\n\t//endregion\r\n\t\r\n\tconst retBuf = new ArrayBuffer(outputLength);\r\n\tconst retView = new Uint8Array(retBuf);\r\n\t\r\n\tfor(const buffer of buffers)\r\n\t{\r\n\t\t// noinspection NestedFunctionCallJS\r\n\t\tretView.set(new Uint8Array(buffer), prevLength);\r\n\t\tprevLength += buffer.byteLength;\r\n\t}\r\n\t\r\n\treturn retBuf;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Concatenate two Uint8Array\r\n * @param {...Uint8Array} views Set of Uint8Array\r\n */\r\nexport function utilConcatView(...views)\r\n{\r\n\t//region Initial variables\r\n\tlet outputLength = 0;\r\n\tlet prevLength = 0;\r\n\t//endregion\r\n\t\r\n\t//region Calculate output length\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const view of views)\r\n\t\toutputLength += view.length;\r\n\t//endregion\r\n\t\r\n\tconst retBuf = new ArrayBuffer(outputLength);\r\n\tconst retView = new Uint8Array(retBuf);\r\n\t\r\n\tfor(const view of views)\r\n\t{\r\n\t\tretView.set(view, prevLength);\r\n\t\tprevLength += view.length;\r\n\t}\r\n\t\r\n\treturn retView;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Decoding of \"two complement\" values\r\n * The function must be called in scope of instance of \"hexBlock\" class (\"valueHex\" and \"warnings\" properties must be present)\r\n * @returns {number}\r\n */\r\nexport function utilDecodeTC()\r\n{\r\n\tconst buf = new Uint8Array(this.valueHex);\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(this.valueHex.byteLength >= 2)\r\n\t{\r\n\t\t//noinspection JSBitwiseOperatorUsage, ConstantOnRightSideOfComparisonJS, LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst condition1 = (buf[0] === 0xFF) && (buf[1] & 0x80);\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst condition2 = (buf[0] === 0x00) && ((buf[1] & 0x80) === 0x00);\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(condition1 || condition2)\r\n\t\t\tthis.warnings.push(\"Needlessly long format\");\r\n\t}\r\n\t\r\n\t//region Create big part of the integer\r\n\tconst bigIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n\tconst bigIntView = new Uint8Array(bigIntBuffer);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < this.valueHex.byteLength; i++)\r\n\t\tbigIntView[i] = 0;\r\n\t\r\n\t// noinspection MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\tbigIntView[0] = (buf[0] & 0x80); // mask only the biggest bit\r\n\t\r\n\tconst bigInt = utilFromBase(bigIntView, 8);\r\n\t//endregion\r\n\t\r\n\t//region Create small part of the integer\r\n\tconst smallIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n\tconst smallIntView = new Uint8Array(smallIntBuffer);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let j = 0; j < this.valueHex.byteLength; j++)\r\n\t\tsmallIntView[j] = buf[j];\r\n\t\r\n\t// noinspection MagicNumberJS\r\n\tsmallIntView[0] &= 0x7F; // mask biggest bit\r\n\t\r\n\tconst smallInt = utilFromBase(smallIntView, 8);\r\n\t//endregion\r\n\t\r\n\treturn (smallInt - bigInt);\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Encode integer value to \"two complement\" format\r\n * @param {number} value Value to encode\r\n * @returns {ArrayBuffer}\r\n */\r\nexport function utilEncodeTC(value)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, ConditionalExpressionJS\r\n\tconst modValue = (value < 0) ? (value * (-1)) : value;\r\n\tlet bigInt = 128;\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tfor(let i = 1; i < 8; i++)\r\n\t{\r\n\t\tif(modValue <= bigInt)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(value < 0)\r\n\t\t\t{\r\n\t\t\t\tconst smallInt = bigInt - modValue;\r\n\t\t\t\t\r\n\t\t\t\tconst retBuf = utilToBase(smallInt, 8, i);\r\n\t\t\t\tconst retView = new Uint8Array(retBuf);\r\n\t\t\t\t\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tretView[0] |= 0x80;\r\n\t\t\t\t\r\n\t\t\t\treturn retBuf;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet retBuf = utilToBase(modValue, 8, i);\r\n\t\t\tlet retView = new Uint8Array(retBuf);\r\n\t\t\t\r\n\t\t\t//noinspection JSBitwiseOperatorUsage, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\t\tif(retView[0] & 0x80)\r\n\t\t\t{\r\n\t\t\t\t//noinspection JSCheckFunctionSignatures\r\n\t\t\t\tconst tempBuf = retBuf.slice(0);\r\n\t\t\t\tconst tempView = new Uint8Array(tempBuf);\r\n\t\t\t\t\r\n\t\t\t\tretBuf = new ArrayBuffer(retBuf.byteLength + 1);\r\n\t\t\t\t// noinspection ReuseOfLocalVariableJS\r\n\t\t\t\tretView = new Uint8Array(retBuf);\r\n\t\t\t\t\r\n\t\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\t\tfor(let k = 0; k < tempBuf.byteLength; k++)\r\n\t\t\t\t\tretView[k + 1] = tempView[k];\r\n\t\t\t\t\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tretView[0] = 0x00;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn retBuf;\r\n\t\t}\r\n\t\t\r\n\t\tbigInt *= Math.pow(2, 8);\r\n\t}\r\n\t\r\n\treturn (new ArrayBuffer(0));\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS, ParameterNamingConventionJS\r\n/**\r\n * Compare two array buffers\r\n * @param {!ArrayBuffer} inputBuffer1\r\n * @param {!ArrayBuffer} inputBuffer2\r\n * @returns {boolean}\r\n */\r\nexport function isEqualBuffer(inputBuffer1, inputBuffer2)\r\n{\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(inputBuffer1.byteLength !== inputBuffer2.byteLength)\r\n\t\treturn false;\r\n\t\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tconst view1 = new Uint8Array(inputBuffer1);\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tconst view2 = new Uint8Array(inputBuffer2);\r\n\t\r\n\tfor(let i = 0; i < view1.length; i++)\r\n\t{\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(view1[i] !== view2[i])\r\n\t\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Pad input number with leade \"0\" if needed\r\n * @returns {string}\r\n * @param {number} inputNumber\r\n * @param {number} fullLength\r\n */\r\nexport function padNumber(inputNumber, fullLength)\r\n{\r\n\tconst str = inputNumber.toString(10);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(fullLength < str.length)\r\n\t\treturn \"\";\r\n\t\r\n\tconst dif = fullLength - str.length;\r\n\t\r\n\tconst padding = new Array(dif);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < dif; i++)\r\n\t\tpadding[i] = \"0\";\r\n\t\r\n\tconst paddingString = padding.join(\"\");\r\n\t\r\n\treturn paddingString.concat(str);\r\n}\r\n//**************************************************************************************\r\nconst base64Template = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\nconst base64UrlTemplate = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, OverlyComplexFunctionJS, FunctionTooLongJS, FunctionNamingConventionJS\r\n/**\r\n * Encode string into BASE64 (or \"base64url\")\r\n * @param {string} input\r\n * @param {boolean} useUrlTemplate If \"true\" then output would be encoded using \"base64url\"\r\n * @param {boolean} skipPadding Skip BASE-64 padding or not\r\n * @param {boolean} skipLeadingZeros Skip leading zeros in input data or not\r\n * @returns {string}\r\n */\r\nexport function toBase64(input, useUrlTemplate = false, skipPadding = false, skipLeadingZeros = false)\r\n{\r\n\tlet i = 0;\r\n\t\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tlet flag1 = 0;\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tlet flag2 = 0;\r\n\t\r\n\tlet output = \"\";\r\n\t\r\n\t// noinspection ConditionalExpressionJS\r\n\tconst template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n\t\r\n\tif(skipLeadingZeros)\r\n\t{\r\n\t\tlet nonZeroPosition = 0;\r\n\t\t\r\n\t\tfor(let i = 0; i < input.length; i++)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(input.charCodeAt(i) !== 0)\r\n\t\t\t{\r\n\t\t\t\tnonZeroPosition = i;\r\n\t\t\t\t// noinspection BreakStatementJS\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection AssignmentToFunctionParameterJS\r\n\t\tinput = input.slice(nonZeroPosition);\r\n\t}\r\n\t\r\n\twhile(i < input.length)\r\n\t{\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr1 = input.charCodeAt(i++);\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(i >= input.length)\r\n\t\t\tflag1 = 1;\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr2 = input.charCodeAt(i++);\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(i >= input.length)\r\n\t\t\tflag2 = 1;\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr3 = input.charCodeAt(i++);\r\n\t\t\r\n\t\t// noinspection LocalVariableNamingConventionJS\r\n\t\tconst enc1 = chr1 >> 2;\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst enc2 = ((chr1 & 0x03) << 4) | (chr2 >> 4);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tlet enc3 = ((chr2 & 0x0F) << 2) | (chr3 >> 6);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tlet enc4 = chr3 & 0x3F;\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\tif(flag1 === 1)\r\n\t\t{\r\n\t\t\t// noinspection NestedAssignmentJS, AssignmentResultUsedJS, MagicNumberJS\r\n\t\t\tenc3 = enc4 = 64;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(flag2 === 1)\r\n\t\t\t{\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tenc4 = 64;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(skipPadding)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\t\tif(enc3 === 64)\r\n\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}`;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\t\t\tif(enc4 === 64)\r\n\t\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}`;\r\n\t\t\t\telse\r\n\t\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMoreThanThreeNegationsJS, FunctionWithMultipleLoopsJS, OverlyComplexFunctionJS, FunctionNamingConventionJS\r\n/**\r\n * Decode string from BASE64 (or \"base64url\")\r\n * @param {string} input\r\n * @param {boolean} [useUrlTemplate=false] If \"true\" then output would be encoded using \"base64url\"\r\n * @param {boolean} [cutTailZeros=false] If \"true\" then cut tailing zeroz from function result\r\n * @returns {string}\r\n */\r\nexport function fromBase64(input, useUrlTemplate = false, cutTailZeros = false)\r\n{\r\n\t// noinspection ConditionalExpressionJS\r\n\tconst template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n\t\r\n\t//region Aux functions\r\n\t// noinspection FunctionWithMultipleReturnPointsJS, NestedFunctionJS\r\n\tfunction indexof(toSearch)\r\n\t{\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, MagicNumberJS\r\n\t\tfor(let i = 0; i < 64; i++)\r\n\t\t{\r\n\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\tif(template.charAt(i) === toSearch)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection MagicNumberJS\r\n\t\treturn 64;\r\n\t}\r\n\t\r\n\t// noinspection NestedFunctionJS\r\n\tfunction test(incoming)\r\n\t{\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, ConditionalExpressionJS, MagicNumberJS\r\n\t\treturn ((incoming === 64) ? 0x00 : incoming);\r\n\t}\r\n\t//endregion\r\n\t\r\n\tlet i = 0;\r\n\t\r\n\tlet output = \"\";\r\n\t\r\n\twhile(i < input.length)\r\n\t{\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc1 = indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc2 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc3 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc4 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t\r\n\t\t// noinspection LocalVariableNamingConventionJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr1 = (test(enc1) << 2) | (test(enc2) >> 4);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr2 = ((test(enc2) & 0x0F) << 4) | (test(enc3) >> 2);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr3 = ((test(enc3) & 0x03) << 6) | test(enc4);\r\n\t\t\r\n\t\toutput += String.fromCharCode(chr1);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\tif(enc3 !== 64)\r\n\t\t\toutput += String.fromCharCode(chr2);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\tif(enc4 !== 64)\r\n\t\t\toutput += String.fromCharCode(chr3);\r\n\t}\r\n\t\r\n\tif(cutTailZeros)\r\n\t{\r\n\t\tconst outputLength = output.length;\r\n\t\tlet nonZeroStart = (-1);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\tfor(let i = (outputLength - 1); i >= 0; i--)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(output.charCodeAt(i) !== 0)\r\n\t\t\t{\r\n\t\t\t\tnonZeroStart = i;\r\n\t\t\t\t// noinspection BreakStatementJS\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS, NegatedIfStatementJS\r\n\t\tif(nonZeroStart !== (-1))\r\n\t\t\toutput = output.slice(0, nonZeroStart + 1);\r\n\t\telse\r\n\t\t\toutput = \"\";\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n//**************************************************************************************\r\nexport function arrayBufferToString(buffer)\r\n{\r\n\tlet resultString = \"\";\r\n\tconst view = new Uint8Array(buffer);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const element of view)\r\n\t\tresultString += String.fromCharCode(element);\r\n\t\r\n\treturn resultString;\r\n}\r\n//**************************************************************************************\r\nexport function stringToArrayBuffer(str)\r\n{\r\n\tconst stringLength = str.length;\r\n\t\r\n\tconst resultBuffer = new ArrayBuffer(stringLength);\r\n\tconst resultView = new Uint8Array(resultBuffer);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < stringLength; i++)\r\n\t\tresultView[i] = str.charCodeAt(i);\r\n\t\r\n\treturn resultBuffer;\r\n}\r\n//**************************************************************************************\r\nconst log2 = Math.log(2);\r\n//**************************************************************************************\r\n// noinspection FunctionNamingConventionJS\r\n/**\r\n * Get nearest to input length power of 2\r\n * @param {number} length Current length of existing array\r\n * @returns {number}\r\n */\r\nexport function nearestPowerOf2(length)\r\n{\r\n\tconst base = (Math.log(length) / log2);\r\n\t\r\n\tconst floor = Math.floor(base);\r\n\tconst round = Math.round(base);\r\n\t\r\n\t// noinspection ConditionalExpressionJS\r\n\treturn ((floor === round) ? floor : round);\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Delete properties by name from specified object\r\n * @param {Object} object Object to delete properties from\r\n * @param {Array.<string>} propsArray Array of properties names\r\n */\r\nexport function clearProps(object, propsArray)\r\n{\r\n\tfor(const prop of propsArray)\r\n\t\tdelete object[prop];\r\n}\r\n//**************************************************************************************\r\n","/* eslint-disable indent */\n/*\n * Copyright (c) 2016-2018, Peculiar Ventures\n * All rights reserved.\n *\n * Author 2016-2018, Yury Strozhevsky <www.strozhevsky.com>.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n *    may be used to endorse or promote products derived from this software without\n *    specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY\n * OF SUCH DAMAGE.\n *\n */\n//**************************************************************************************\nimport { getParametersValue, padNumber, isEqualBuffer, bufferToHexCodes, checkBufferParams, utilToBase, utilFromBase, utilEncodeTC, utilDecodeTC, utilConcatBuf, utilConcatView } from \"pvutils\";\n//**************************************************************************************\n//region Declaration of global variables\n//**************************************************************************************\nconst powers2 = [new Uint8Array([1])];\nconst digitsString = \"0123456789\";\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration for \"LocalBaseBlock\" class\n//**************************************************************************************\n/**\n * Class used as a base block for all remaining ASN.1 classes\n * @typedef LocalBaseBlock\n * @interface\n * @property {number} blockLength\n * @property {string} error\n * @property {Array.<string>} warnings\n * @property {ArrayBuffer} valueBeforeDecode\n */\nclass LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBaseBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueBeforeDecode]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\t/**\n\t\t * @type {number} blockLength\n\t\t */\n\t\tthis.blockLength = getParametersValue(parameters, \"blockLength\", 0);\n\t\t/**\n\t\t * @type {string} error\n\t\t */\n\t\tthis.error = getParametersValue(parameters, \"error\", \"\");\n\t\t/**\n\t\t * @type {Array.<string>} warnings\n\t\t */\n\t\tthis.warnings = getParametersValue(parameters, \"warnings\", []);\n\t\t//noinspection JSCheckFunctionSignatures\n\t\t/**\n\t\t * @type {ArrayBuffer} valueBeforeDecode\n\t\t */\n\t\tif(\"valueBeforeDecode\" in parameters)\n\t\t\tthis.valueBeforeDecode = parameters.valueBeforeDecode.slice(0);\n\t\telse\n\t\t\tthis.valueBeforeDecode = new ArrayBuffer(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"baseBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\treturn {\n\t\t\tblockName: this.constructor.blockName(),\n\t\t\tblockLength: this.blockLength,\n\t\t\terror: this.error,\n\t\t\twarnings: this.warnings,\n\t\t\tvalueBeforeDecode: bufferToHexCodes(this.valueBeforeDecode, 0, this.valueBeforeDecode.byteLength)\n\t\t};\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Description for \"HexBlock\" class\n//**************************************************************************************\n/**\n * Class used as a base block for all remaining ASN.1 classes\n * @extends LocalBaseBlock\n * @typedef HexBlock\n * @property {number} blockLength\n * @property {string} error\n * @property {Array.<string>} warnings\n * @property {ArrayBuffer} valueBeforeDecode\n * @property {boolean} isHexOnly\n * @property {ArrayBuffer} valueHex\n */\n//noinspection JSUnusedLocalSymbols\nexport const HexBlock = BaseClass => class LocalHexBlockMixin extends BaseClass\n{\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Constructor for \"HexBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\t/**\n\t\t * @type {boolean}\n\t\t */\n\t\tthis.isHexOnly = getParametersValue(parameters, \"isHexOnly\", false);\n\t\t/**\n\t\t * @type {ArrayBuffer}\n\t\t */\n\t\tif(\"valueHex\" in parameters)\n\t\t\tthis.valueHex = parameters.valueHex.slice(0);\n\t\telse\n\t\t\tthis.valueHex = new ArrayBuffer(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"hexBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.warnings.push(\"Zero buffer length\");\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\t//region Copy input buffer to internal buffer\n\t\tthis.valueHex = inputBuffer.slice(inputOffset, inputOffset + inputLength);\n\t\t//endregion\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tif(this.isHexOnly !== true)\n\t\t{\n\t\t\tthis.error = \"Flag \\\"isHexOnly\\\" is not set, abort\";\n\t\t\treturn new ArrayBuffer(0);\n\t\t}\n\n\t\tif(sizeOnly === true)\n\t\t\treturn new ArrayBuffer(this.valueHex.byteLength);\n\n\t\t//noinspection JSCheckFunctionSignatures\n\t\treturn this.valueHex.slice(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.blockName = this.constructor.blockName();\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n};\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of identification block class\n//**************************************************************************************\nclass LocalIdentificationBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBaseBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Object} [idBlock]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper();\n\n\t\tif(\"idBlock\" in parameters)\n\t\t{\n\t\t\t//region Properties from hexBlock class\n\t\t\tthis.isHexOnly = getParametersValue(parameters.idBlock, \"isHexOnly\", false);\n\t\t\tthis.valueHex = getParametersValue(parameters.idBlock, \"valueHex\", new ArrayBuffer(0));\n\t\t\t//endregion\n\n\t\t\tthis.tagClass = getParametersValue(parameters.idBlock, \"tagClass\", (-1));\n\t\t\tthis.tagNumber = getParametersValue(parameters.idBlock, \"tagNumber\", (-1));\n\t\t\tthis.isConstructed = getParametersValue(parameters.idBlock, \"isConstructed\", false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.tagClass = (-1);\n\t\t\tthis.tagNumber = (-1);\n\t\t\tthis.isConstructed = false;\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"identificationBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet firstOctet = 0;\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tswitch(this.tagClass)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\tfirstOctet |= 0x00; // UNIVERSAL\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tfirstOctet |= 0x40; // APPLICATION\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tfirstOctet |= 0x80; // CONTEXT-SPECIFIC\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tfirstOctet |= 0xC0; // PRIVATE\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = \"Unknown tag class\";\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t}\n\n\t\tif(this.isConstructed)\n\t\t\tfirstOctet |= 0x20;\n\n\t\tif((this.tagNumber < 31) && (!this.isHexOnly))\n\t\t{\n\t\t\tretBuf = new ArrayBuffer(1);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tif(!sizeOnly)\n\t\t\t{\n\t\t\t\tlet number = this.tagNumber;\n\t\t\t\tnumber &= 0x1F;\n\t\t\t\tfirstOctet |= number;\n\n\t\t\t\tretView[0] = firstOctet;\n\t\t\t}\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tif(this.isHexOnly === false)\n\t\t{\n\t\t\tconst encodedBuf = utilToBase(this.tagNumber, 7);\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tconst size = encodedBuf.byteLength;\n\n\t\t\tretBuf = new ArrayBuffer(size + 1);\n\t\t\tretView = new Uint8Array(retBuf);\n\t\t\tretView[0] = (firstOctet | 0x1F);\n\n\t\t\tif(!sizeOnly)\n\t\t\t{\n\t\t\t\tfor(let i = 0; i < (size - 1); i++)\n\t\t\t\t\tretView[i + 1] = encodedView[i] | 0x80;\n\n\t\t\t\tretView[size] = encodedView[size - 1];\n\t\t\t}\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(this.valueHex.byteLength + 1);\n\t\tretView = new Uint8Array(retBuf);\n\n\t\tretView[0] = (firstOctet | 0x1F);\n\n\t\tif(sizeOnly === false)\n\t\t{\n\t\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\t\tfor(let i = 0; i < (curView.length - 1); i++)\n\t\t\t\tretView[i + 1] = curView[i] | 0x80;\n\n\t\t\tretView[this.valueHex.byteLength] = curView[curView.length - 1];\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.error = \"Zero buffer length\";\n\t\t\treturn (-1);\n\t\t}\n\t\t//endregion\n\n\t\t//region Find tag class\n\t\tconst tagClassMask = intBuffer[0] & 0xC0;\n\n\t\tswitch(tagClassMask)\n\t\t{\n\t\t\tcase 0x00:\n\t\t\t\tthis.tagClass = (1); // UNIVERSAL\n\t\t\t\tbreak;\n\t\t\tcase 0x40:\n\t\t\t\tthis.tagClass = (2); // APPLICATION\n\t\t\t\tbreak;\n\t\t\tcase 0x80:\n\t\t\t\tthis.tagClass = (3); // CONTEXT-SPECIFIC\n\t\t\t\tbreak;\n\t\t\tcase 0xC0:\n\t\t\t\tthis.tagClass = (4); // PRIVATE\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = \"Unknown tag class\";\n\t\t\t\treturn (-1);\n\t\t}\n\t\t//endregion\n\n\t\t//region Find it's constructed or not\n\t\tthis.isConstructed = (intBuffer[0] & 0x20) === 0x20;\n\t\t//endregion\n\n\t\t//region Find tag number\n\t\tthis.isHexOnly = false;\n\n\t\tconst tagNumberMask = intBuffer[0] & 0x1F;\n\n\t\t//region Simple case (tag number < 31)\n\t\tif(tagNumberMask !== 0x1F)\n\t\t{\n\t\t\tthis.tagNumber = (tagNumberMask);\n\t\t\tthis.blockLength = 1;\n\t\t}\n\t\t//endregion\n\t\t//region Tag number bigger or equal to 31\n\t\telse\n\t\t{\n\t\t\tlet count = 1;\n\n\t\t\tthis.valueHex = new ArrayBuffer(255);\n\t\t\tlet tagNumberBufferMaxLength = 255;\n\t\t\tlet intTagNumberBuffer = new Uint8Array(this.valueHex);\n\n\t\t\t//noinspection JSBitwiseOperatorUsage\n\t\t\twhile(intBuffer[count] & 0x80)\n\t\t\t{\n\t\t\t\tintTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\n\t\t\t\tcount++;\n\n\t\t\t\tif(count >= intBuffer.length)\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\n\t\t\t\t//region In case if tag number length is greater than 255 bytes (rare but possible case)\n\t\t\t\tif(count === tagNumberBufferMaxLength)\n\t\t\t\t{\n\t\t\t\t\ttagNumberBufferMaxLength += 255;\n\n\t\t\t\t\tconst tempBuffer = new ArrayBuffer(tagNumberBufferMaxLength);\n\t\t\t\t\tconst tempBufferView = new Uint8Array(tempBuffer);\n\n\t\t\t\t\tfor(let i = 0; i < intTagNumberBuffer.length; i++)\n\t\t\t\t\t\ttempBufferView[i] = intTagNumberBuffer[i];\n\n\t\t\t\t\tthis.valueHex = new ArrayBuffer(tagNumberBufferMaxLength);\n\t\t\t\t\tintTagNumberBuffer = new Uint8Array(this.valueHex);\n\t\t\t\t}\n\t\t\t\t//endregion\n\t\t\t}\n\n\t\t\tthis.blockLength = (count + 1);\n\t\t\tintTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F; // Write last byte to buffer\n\n\t\t\t//region Cut buffer\n\t\t\tconst tempBuffer = new ArrayBuffer(count);\n\t\t\tconst tempBufferView = new Uint8Array(tempBuffer);\n\n\t\t\tfor(let i = 0; i < count; i++)\n\t\t\t\ttempBufferView[i] = intTagNumberBuffer[i];\n\n\t\t\tthis.valueHex = new ArrayBuffer(count);\n\t\t\tintTagNumberBuffer = new Uint8Array(this.valueHex);\n\t\t\tintTagNumberBuffer.set(tempBufferView);\n\t\t\t//endregion\n\n\t\t\t//region Try to convert long tag number to short form\n\t\t\tif(this.blockLength <= 9)\n\t\t\t\tthis.tagNumber = utilFromBase(intTagNumberBuffer, 7);\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isHexOnly = true;\n\t\t\t\tthis.warnings.push(\"Tag too long, represented as hex-coded\");\n\t\t\t}\n\t\t\t//endregion\n\t\t}\n\t\t//endregion\n\t\t//endregion\n\n\t\t//region Check if constructed encoding was using for primitive type\n\t\tif(((this.tagClass === 1)) &&\n\t\t\t(this.isConstructed))\n\t\t{\n\t\t\tswitch(this.tagNumber)\n\t\t\t{\n\t\t\t\tcase 1:  // Boolean\n\t\t\t\tcase 2:  // REAL\n\t\t\t\tcase 5:  // Null\n\t\t\t\tcase 6:  // OBJECT IDENTIFIER\n\t\t\t\tcase 9:  // REAL\n\t\t\t\tcase 13: // RELATIVE OBJECT IDENTIFIER\n\t\t\t\tcase 14: // Time\n\t\t\t\tcase 23:\n\t\t\t\tcase 24:\n\t\t\t\tcase 31:\n\t\t\t\tcase 32:\n\t\t\t\tcase 33:\n\t\t\t\tcase 34:\n\t\t\t\t\tthis.error = \"Constructed encoding used for primitive type\";\n\t\t\t\t\treturn (-1);\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\t\t//endregion\n\n\t\treturn (inputOffset + this.blockLength); // Return current offset in input buffer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName: string,\n\t *  tagClass: number,\n\t *  tagNumber: number,\n\t *  isConstructed: boolean,\n\t *  isHexOnly: boolean,\n\t *  valueHex: ArrayBuffer,\n\t *  blockLength: number,\n\t *  error: string, warnings: Array.<string>,\n\t *  valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.blockName = this.constructor.blockName();\n\t\tobject.tagClass = this.tagClass;\n\t\tobject.tagNumber = this.tagNumber;\n\t\tobject.isConstructed = this.isConstructed;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of length block class\n//**************************************************************************************\nclass LocalLengthBlock extends LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalLengthBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Object} [lenBlock]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper();\n\n\t\tif(\"lenBlock\" in parameters)\n\t\t{\n\t\t\tthis.isIndefiniteForm = getParametersValue(parameters.lenBlock, \"isIndefiniteForm\", false);\n\t\t\tthis.longFormUsed = getParametersValue(parameters.lenBlock, \"longFormUsed\", false);\n\t\t\tthis.length = getParametersValue(parameters.lenBlock, \"length\", 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isIndefiniteForm = false;\n\t\t\tthis.longFormUsed = false;\n\t\t\tthis.length = 0;\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"lengthBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.error = \"Zero buffer length\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif(intBuffer[0] === 0xFF)\n\t\t{\n\t\t\tthis.error = \"Length block 0xFF is reserved by standard\";\n\t\t\treturn (-1);\n\t\t}\n\t\t//endregion\n\n\t\t//region Check for length form type\n\t\tthis.isIndefiniteForm = intBuffer[0] === 0x80;\n\t\t//endregion\n\n\t\t//region Stop working in case of indefinite length form\n\t\tif(this.isIndefiniteForm === true)\n\t\t{\n\t\t\tthis.blockLength = 1;\n\t\t\treturn (inputOffset + this.blockLength);\n\t\t}\n\t\t//endregion\n\n\t\t//region Check is long form of length encoding using\n\t\tthis.longFormUsed = !!(intBuffer[0] & 0x80);\n\t\t//endregion\n\n\t\t//region Stop working in case of short form of length value\n\t\tif(this.longFormUsed === false)\n\t\t{\n\t\t\tthis.length = (intBuffer[0]);\n\t\t\tthis.blockLength = 1;\n\t\t\treturn (inputOffset + this.blockLength);\n\t\t}\n\t\t//endregion\n\n\t\t//region Calculate length value in case of long form\n\t\tconst count = intBuffer[0] & 0x7F;\n\n\t\tif(count > 8) // Too big length value\n\t\t{\n\t\t\tthis.error = \"Too big integer\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif((count + 1) > intBuffer.length)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tconst lengthBufferView = new Uint8Array(count);\n\n\t\tfor(let i = 0; i < count; i++)\n\t\t\tlengthBufferView[i] = intBuffer[i + 1];\n\n\t\tif(lengthBufferView[count - 1] === 0x00)\n\t\t\tthis.warnings.push(\"Needlessly long encoded length\");\n\n\t\tthis.length = utilFromBase(lengthBufferView, 8);\n\n\t\tif(this.longFormUsed && (this.length <= 127))\n\t\t\tthis.warnings.push(\"Unnecessary usage of long length form\");\n\n\t\tthis.blockLength = count + 1;\n\t\t//endregion\n\n\t\treturn (inputOffset + this.blockLength); // Return current offset in input buffer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tif(this.length > 127)\n\t\t\tthis.longFormUsed = true;\n\n\t\tif(this.isIndefiniteForm)\n\t\t{\n\t\t\tretBuf = new ArrayBuffer(1);\n\n\t\t\tif(sizeOnly === false)\n\t\t\t{\n\t\t\t\tretView = new Uint8Array(retBuf);\n\t\t\t\tretView[0] = 0x80;\n\t\t\t}\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tif(this.longFormUsed === true)\n\t\t{\n\t\t\tconst encodedBuf = utilToBase(this.length, 8);\n\n\t\t\tif(encodedBuf.byteLength > 127)\n\t\t\t{\n\t\t\t\tthis.error = \"Too big length\";\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t\t}\n\n\t\t\tretBuf = new ArrayBuffer(encodedBuf.byteLength + 1);\n\n\t\t\tif(sizeOnly === true)\n\t\t\t\treturn retBuf;\n\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tretView[0] = encodedBuf.byteLength | 0x80;\n\n\t\t\tfor(let i = 0; i < encodedBuf.byteLength; i++)\n\t\t\t\tretView[i + 1] = encodedView[i];\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(1);\n\n\t\tif(sizeOnly === false)\n\t\t{\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tretView[0] = this.length;\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.blockName = this.constructor.blockName();\n\t\tobject.isIndefiniteForm = this.isIndefiniteForm;\n\t\tobject.longFormUsed = this.longFormUsed;\n\t\tobject.length = this.length;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of value block class\n//**************************************************************************************\nexport class ValueBlock extends LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"ValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"valueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols,JSUnusedLocalSymbols,JSUnusedLocalSymbols\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Throw an exception for a function which needs to be specified in extended classes\n\t\tthrow TypeError(\"User need to make a specific function in a class which extends \\\"ValueBlock\\\"\");\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Throw an exception for a function which needs to be specified in extended classes\n\t\tthrow TypeError(\"User need to make a specific function in a class which extends \\\"ValueBlock\\\"\");\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of basic ASN.1 block class\n//**************************************************************************************\nexport class BaseBlock extends LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"BaseBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Object} [primitiveSchema]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t * @param valueBlockType Type of value block\n\t */\n\tconstructor(parameters = {}, valueBlockType = ValueBlock)\n\t{\n\t\tsuper(parameters);\n\n\t\tif(\"name\" in parameters)\n\t\t\tthis.name = parameters.name;\n\t\tif(\"optional\" in parameters)\n\t\t\tthis.optional = parameters.optional;\n\t\tif(\"primitiveSchema\" in parameters)\n\t\t\tthis.primitiveSchema = parameters.primitiveSchema;\n\n\t\tthis.idBlock = new LocalIdentificationBlock(parameters);\n\t\tthis.lenBlock = new LocalLengthBlock(parameters);\n\t\tthis.valueBlock = new valueBlockType(parameters);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BaseBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf;\n\n\t\tconst idBlockBuf = this.idBlock.toBER(sizeOnly);\n\t\tconst valueBlockSizeBuf = this.valueBlock.toBER(true);\n\n\t\tthis.lenBlock.length = valueBlockSizeBuf.byteLength;\n\t\tconst lenBlockBuf = this.lenBlock.toBER(sizeOnly);\n\n\t\tretBuf = utilConcatBuf(idBlockBuf, lenBlockBuf);\n\n\t\tlet valueBlockBuf;\n\n\t\tif(sizeOnly === false)\n\t\t\tvalueBlockBuf = this.valueBlock.toBER(sizeOnly);\n\t\telse\n\t\t\tvalueBlockBuf = new ArrayBuffer(this.lenBlock.length);\n\n\t\tretBuf = utilConcatBuf(retBuf, valueBlockBuf);\n\n\t\tif(this.lenBlock.isIndefiniteForm === true)\n\t\t{\n\t\t\tconst indefBuf = new ArrayBuffer(2);\n\n\t\t\tif(sizeOnly === false)\n\t\t\t{\n\t\t\t\tconst indefView = new Uint8Array(indefBuf);\n\n\t\t\t\tindefView[0] = 0x00;\n\t\t\t\tindefView[1] = 0x00;\n\t\t\t}\n\n\t\t\tretBuf = utilConcatBuf(retBuf, indefBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.idBlock = this.idBlock.toJSON();\n\t\tobject.lenBlock = this.lenBlock.toJSON();\n\t\tobject.valueBlock = this.valueBlock.toJSON();\n\n\t\tif(\"name\" in this)\n\t\t\tobject.name = this.name;\n\t\tif(\"optional\" in this)\n\t\t\tobject.optional = this.optional;\n\t\tif(\"primitiveSchema\" in this)\n\t\t\tobject.primitiveSchema = this.primitiveSchema.toJSON();\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${bufferToHexCodes(this.valueBlock.valueHex)}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of basic block for all PRIMITIVE types\n//**************************************************************************************\nclass LocalPrimitiveValueBlock extends ValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalPrimitiveValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueBeforeDecode]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\t//region Variables from \"hexBlock\" class\n\t\tif(\"valueHex\" in parameters)\n\t\t\tthis.valueHex = parameters.valueHex.slice(0);\n\t\telse\n\t\t\tthis.valueHex = new ArrayBuffer(0);\n\n\t\tthis.isHexOnly = getParametersValue(parameters, \"isHexOnly\", true);\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.warnings.push(\"Zero buffer length\");\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\t//region Copy input buffer into internal buffer\n\t\tthis.valueHex = new ArrayBuffer(intBuffer.length);\n\t\tconst valueHexView = new Uint8Array(this.valueHex);\n\n\t\tfor(let i = 0; i < intBuffer.length; i++)\n\t\t\tvalueHexView[i] = intBuffer[i];\n\t\t//endregion\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn this.valueHex.slice(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"PrimitiveValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\t\tobject.isHexOnly = this.isHexOnly;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Primitive extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Primitive\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalPrimitiveValueBlock);\n\n\t\tthis.idBlock.isConstructed = false;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"PRIMITIVE\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of basic block for all CONSTRUCTED types\n//**************************************************************************************\nclass LocalConstructedValueBlock extends ValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalConstructedValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.value = getParametersValue(parameters, \"value\", []);\n\t\tthis.isIndefiniteForm = getParametersValue(parameters, \"isIndefiniteForm\", false);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Store initial offset and length\n\t\tconst initialOffset = inputOffset;\n\t\tconst initialLength = inputLength;\n\t\t//endregion\n\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.warnings.push(\"Zero buffer length\");\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\t//region Aux function\n\t\tfunction checkLen(indefiniteLength, length)\n\t\t{\n\t\t\tif(indefiniteLength === true)\n\t\t\t\treturn 1;\n\n\t\t\treturn length;\n\t\t}\n\t\t//endregion\n\n\t\tlet currentOffset = inputOffset;\n\n\t\twhile(checkLen(this.isIndefiniteForm, inputLength) > 0)\n\t\t{\n\t\t\tconst returnObject = LocalFromBER(inputBuffer, currentOffset, inputLength);\n\t\t\tif(returnObject.offset === (-1))\n\t\t\t{\n\t\t\t\tthis.error = returnObject.result.error;\n\t\t\t\tthis.warnings.concat(returnObject.result.warnings);\n\t\t\t\treturn (-1);\n\t\t\t}\n\n\t\t\tcurrentOffset = returnObject.offset;\n\n\t\t\tthis.blockLength += returnObject.result.blockLength;\n\t\t\tinputLength -= returnObject.result.blockLength;\n\n\t\t\tthis.value.push(returnObject.result);\n\n\t\t\tif((this.isIndefiniteForm === true) && (returnObject.result.constructor.blockName() === EndOfContent.blockName()))\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.isIndefiniteForm === true)\n\t\t{\n\t\t\tif(this.value[this.value.length - 1].constructor.blockName() === EndOfContent.blockName())\n\t\t\t\tthis.value.pop();\n\t\t\telse\n\t\t\t\tthis.warnings.push(\"No EndOfContent block encoded\");\n\t\t}\n\n\t\t//region Copy \"inputBuffer\" to \"valueBeforeDecode\"\n\t\tthis.valueBeforeDecode = inputBuffer.slice(initialOffset, initialOffset + initialLength);\n\t\t//endregion\n\n\t\treturn currentOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf = new ArrayBuffer(0);\n\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tconst valueBuf = this.value[i].toBER(sizeOnly);\n\t\t\tretBuf = utilConcatBuf(retBuf, valueBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"ConstructedValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.isIndefiniteForm = this.isIndefiniteForm;\n\t\tobject.value = [];\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\tobject.value.push(this.value[i].toJSON());\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Constructed extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Constructed\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalConstructedValueBlock);\n\n\t\tthis.idBlock.isConstructed = true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"CONSTRUCTED\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tthis.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\tconst values = [];\n\t\tfor (const value of this.valueBlock.value) {\n\t\t\tvalues.push(value.toString().split(\"\\n\").map(o => `  ${o}`).join(\"\\n\"));\n\t\t}\n\t\tconst blockName = this.idBlock.tagClass === 3\n\t\t\t? `[${this.idBlock.tagNumber}]`\n\t\t\t: this.constructor.blockName();\n\t\treturn values.length \n\t\t\t? `${blockName} :\\n${values.join(\"\\n\")}` // items\n\t\t\t: `${blockName} :`; // empty\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 EndOfContent type class\n//**************************************************************************************\nclass LocalEndOfContentValueBlock extends ValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalEndOfContentValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols,JSUnusedLocalSymbols\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region There is no \"value block\" for EndOfContent type and we need to return the same offset\n\t\treturn inputOffset;\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn new ArrayBuffer(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"EndOfContentValueBlock\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class EndOfContent extends BaseBlock\n{\n\t//**********************************************************************************\n\tconstructor(paramaters = {})\n\t{\n\t\tsuper(paramaters, LocalEndOfContentValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 0; // EndOfContent\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"EndOfContent\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Boolean type class\n//**************************************************************************************\nclass LocalBooleanValueBlock extends ValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBooleanValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\t\t\n\t\tthis.value = getParametersValue(parameters, \"value\", false);\n\t\tthis.isHexOnly = getParametersValue(parameters, \"isHexOnly\", false);\n\t\t\n\t\tif(\"valueHex\" in parameters)\n\t\t\tthis.valueHex = parameters.valueHex.slice(0);\n\t\telse\n\t\t{\n\t\t\tthis.valueHex = new ArrayBuffer(1);\n\t\t\tif(this.value === true)\n\t\t\t{\n\t\t\t\tconst view = new Uint8Array(this.valueHex);\n\t\t\t\tview[0] = 0xFF;\n\t\t\t}\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\tif(inputLength > 1)\n\t\t\tthis.warnings.push(\"Boolean value encoded in more then 1 octet\");\n\n\t\tthis.isHexOnly = true;\n\n\t\t//region Copy input buffer to internal array\n\t\tthis.valueHex = new ArrayBuffer(intBuffer.length);\n\t\tconst view = new Uint8Array(this.valueHex);\n\n\t\tfor(let i = 0; i < intBuffer.length; i++)\n\t\t\tview[i] = intBuffer[i];\n\t\t//endregion\n\t\t\n\t\tif(utilDecodeTC.call(this) !== 0 )\n\t\t\tthis.value = true;\n\t\telse\n\t\t\tthis.value = false;\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn this.valueHex;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BooleanValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Boolean extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Boolean\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBooleanValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 1; // Boolean\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BOOLEAN\";\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${this.valueBlock.value}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Sequence and Set type classes\n//**************************************************************************************\nexport class Sequence extends Constructed\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Sequence\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 16; // Sequence\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"SEQUENCE\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Set extends Constructed\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Set\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 17; // Set\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"SET\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Null type class\n//**************************************************************************************\nexport class Null extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Null\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBaseBlock); // We will not have a call to \"Null value block\" because of specified \"fromBER\" and \"toBER\" functions\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 5; // Null\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"NULL\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tif(this.lenBlock.length > 0)\n\t\t\tthis.warnings.push(\"Non-zero length of value block for Null type\");\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\t\t\n\t\tthis.blockLength += inputLength;\n\t\t\n\t\tif((inputOffset + inputLength) > inputBuffer.byteLength)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\n\t\t\treturn (-1);\n\t\t}\n\t\t\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tconst retBuf = new ArrayBuffer(2);\n\n\t\tif(sizeOnly === true)\n\t\t\treturn retBuf;\n\n\t\tconst retView = new Uint8Array(retBuf);\n\t\tretView[0] = 0x05;\n\t\tretView[1] = 0x00;\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 OctetString type class\n//**************************************************************************************\nclass LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalOctetStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isConstructed = getParametersValue(parameters, \"isConstructed\", false);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tlet resultOffset = 0;\n\n\t\tif(this.isConstructed === true)\n\t\t{\n\t\t\tthis.isHexOnly = false;\n\n\t\t\tresultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n\t\t\tif(resultOffset === (-1))\n\t\t\t\treturn resultOffset;\n\n\t\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\t{\n\t\t\t\tconst currentBlockName = this.value[i].constructor.blockName();\n\n\t\t\t\tif(currentBlockName === EndOfContent.blockName())\n\t\t\t\t{\n\t\t\t\t\tif(this.isIndefiniteForm === true)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.error = \"EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only\";\n\t\t\t\t\t\treturn (-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(currentBlockName !== OctetString.blockName())\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"OCTET STRING may consists of OCTET STRINGs only\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = true;\n\n\t\t\tresultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n\t\t\tthis.blockLength = inputLength;\n\t\t}\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tif(this.isConstructed === true)\n\t\t\treturn LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly);\n\n\t\tlet retBuf = new ArrayBuffer(this.valueHex.byteLength);\n\n\t\tif(sizeOnly === true)\n\t\t\treturn retBuf;\n\n\t\tif(this.valueHex.byteLength === 0)\n\t\t\treturn retBuf;\n\n\t\tretBuf = this.valueHex.slice(0);\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"OctetStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.isConstructed = this.isConstructed;\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class OctetString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"OctetString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalOctetStringValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 4; // OctetString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tthis.valueBlock.isConstructed = this.idBlock.isConstructed;\n\t\tthis.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n\n\t\t//region Ability to encode empty OCTET STRING\n\t\tif(inputLength === 0)\n\t\t{\n\t\t\tif(this.idBlock.error.length === 0)\n\t\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\t\tif(this.lenBlock.error.length === 0)\n\t\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\tif (!this.valueBlock.isConstructed) {\n\t\t\tconst buf = inputBuffer.slice(inputOffset, inputOffset + inputLength);\n\t\t\ttry {\n\t\t\t\tconst asn = fromBER(buf);\n\t\t\t\tif (asn.offset !== -1 && asn.offset === inputLength) {\n\t\t\t\t\tthis.valueBlock.value = [asn.result];\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// nothing\n\t\t\t}\n\t\t}\n\n\t\treturn super.fromBER(inputBuffer, inputOffset, inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"OCTET STRING\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Checking that two OCTETSTRINGs are equal\n\t * @param {OctetString} octetString\n\t */\n\tisEqual(octetString)\n\t{\n\t\t//region Check input type\n\t\tif((octetString instanceof OctetString) === false)\n\t\t\treturn false;\n\t\t//endregion\n\n\t\t//region Compare two JSON strings\n\t\tif(JSON.stringify(this) !== JSON.stringify(octetString))\n\t\t\treturn false;\n\t\t//endregion\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\tif (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\n\t\t\treturn Constructed.prototype.toString.call(this);\n\t\t} else {\n\t\t\treturn `${this.constructor.blockName()} : ${bufferToHexCodes(this.valueBlock.valueHex)}`;\n\t\t}\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 BitString type class\n//**************************************************************************************\nclass LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBitStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.unusedBits = getParametersValue(parameters, \"unusedBits\", 0);\n\t\tthis.isConstructed = getParametersValue(parameters, \"isConstructed\", false);\n\t\tthis.blockLength = this.valueHex.byteLength;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Ability to decode zero-length BitString value\n\t\tif(inputLength === 0)\n\t\t\treturn inputOffset;\n\t\t//endregion\n\n\t\tlet resultOffset = (-1);\n\n\t\t//region If the BISTRING supposed to be a constructed value\n\t\tif(this.isConstructed === true)\n\t\t{\n\t\t\tresultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n\t\t\tif(resultOffset === (-1))\n\t\t\t\treturn resultOffset;\n\n\t\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\t{\n\t\t\t\tconst currentBlockName = this.value[i].constructor.blockName();\n\n\t\t\t\tif(currentBlockName === EndOfContent.blockName())\n\t\t\t\t{\n\t\t\t\t\tif(this.isIndefiniteForm === true)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.error = \"EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only\";\n\t\t\t\t\t\treturn (-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(currentBlockName !== BitString.blockName())\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"BIT STRING may consists of BIT STRINGs only\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\n\t\t\t\tif((this.unusedBits > 0) && (this.value[i].valueBlock.unusedBits > 0))\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"Using of \\\"unused bits\\\" inside constructive BIT STRING allowed for least one only\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\n\t\t\t\tthis.unusedBits = this.value[i].valueBlock.unusedBits;\n\t\t\t\tif(this.unusedBits > 7)\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"Unused bits for BitString must be in range 0-7\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn resultOffset;\n\t\t}\n\t\t//endregion\n\t\t//region If the BitString supposed to be a primitive value\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\n\t\tthis.unusedBits = intBuffer[0];\n\t\t\n\t\tif(this.unusedBits > 7)\n\t\t{\n\t\t\tthis.error = \"Unused bits for BitString must be in range 0-7\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif (!this.unusedBits) {\n\t\t\tconst buf = inputBuffer.slice(inputOffset + 1, inputOffset + inputLength);\n\t\t\ttry {\n\t\t\t\tconst asn = fromBER(buf);\n\t\t\t\tif (asn.offset !== -1 && asn.offset === (inputLength - 1)) {\n\t\t\t\t\tthis.value = [asn.result];\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\t// nothing\n\t\t\t}\n\t\t}\n\n\t\t//region Copy input buffer to internal buffer\n\t\tthis.valueHex = new ArrayBuffer(intBuffer.length - 1);\n\t\tconst view = new Uint8Array(this.valueHex);\n\t\tfor(let i = 0; i < (inputLength - 1); i++)\n\t\t\tview[i] = intBuffer[i + 1];\n\t\t//endregion\n\n\t\tthis.blockLength = intBuffer.length;\n\n\t\treturn (inputOffset + inputLength);\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tif(this.isConstructed === true)\n\t\t\treturn LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly);\n\n\t\tif(sizeOnly === true)\n\t\t\treturn (new ArrayBuffer(this.valueHex.byteLength + 1));\n\n\t\tif(this.valueHex.byteLength === 0)\n\t\t\treturn (new ArrayBuffer(0));\n\n\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\tconst retBuf = new ArrayBuffer(this.valueHex.byteLength + 1);\n\t\tconst retView = new Uint8Array(retBuf);\n\n\t\tretView[0] = this.unusedBits;\n\n\t\tfor(let i = 0; i < this.valueHex.byteLength; i++)\n\t\t\tretView[i + 1] = curView[i];\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BitStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.unusedBits = this.unusedBits;\n\t\tobject.isConstructed = this.isConstructed;\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class BitString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"BitString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBitStringValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 3; // BitString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BIT STRING\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Ability to encode empty BitString\n\t\tif(inputLength === 0)\n\t\t\treturn inputOffset;\n\t\t//endregion\n\n\t\tthis.valueBlock.isConstructed = this.idBlock.isConstructed;\n\t\tthis.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n\n\t\treturn super.fromBER(inputBuffer, inputOffset, inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Checking that two BITSTRINGs are equal\n\t * @param {BitString} bitString\n\t */\n\tisEqual(bitString)\n\t{\n\t\t//region Check input type\n\t\tif((bitString instanceof BitString) === false)\n\t\t\treturn false;\n\t\t//endregion\n\n\t\t//region Compare two JSON strings\n\t\tif(JSON.stringify(this) !== JSON.stringify(bitString))\n\t\t\treturn false;\n\t\t//endregion\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\tif (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\n\t\t\treturn Constructed.prototype.toString.call(this);\n\t\t} else {\n\t\t\t// convert bytes to bits\n\t\t\tconst bits = [];\n\t\t\tconst valueHex = new Uint8Array(this.valueBlock.valueHex);\n\t\t\tfor (const byte of valueHex) {\n\t\t\t\tbits.push(byte.toString(2).padStart(8, \"0\"));\n\t\t\t}\n\t\t\treturn `${this.constructor.blockName()} : ${bits.join(\"\")}`;\n\t\t}\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Integer type class\n//**************************************************************************************\n/**\n * @extends ValueBlock\n */\nclass LocalIntegerValueBlock extends HexBlock(ValueBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalIntegerValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.valueDec = parameters.value;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Setter for \"valueHex\"\n\t * @param {ArrayBuffer} _value\n\t */\n\tset valueHex(_value)\n\t{\n\t\tthis._valueHex = _value.slice(0);\n\n\t\tif(_value.byteLength >= 4)\n\t\t{\n\t\t\tthis.warnings.push(\"Too big Integer for decoding, hex only\");\n\t\t\tthis.isHexOnly = true;\n\t\t\tthis._valueDec = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = false;\n\n\t\t\tif(_value.byteLength > 0)\n\t\t\t\tthis._valueDec = utilDecodeTC.call(this);\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Getter for \"valueHex\"\n\t * @returns {ArrayBuffer}\n\t */\n\tget valueHex()\n\t{\n\t\treturn this._valueHex;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Getter for \"valueDec\"\n\t * @param {number} _value\n\t */\n\tset valueDec(_value)\n\t{\n\t\tthis._valueDec = _value;\n\n\t\tthis.isHexOnly = false;\n\t\tthis._valueHex = utilEncodeTC(_value);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Getter for \"valueDec\"\n\t * @returns {number}\n\t */\n\tget valueDec()\n\t{\n\t\treturn this._valueDec;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from DER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 DER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 DER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @param {number} [expectedLength=0] Expected length of converted \"valueHex\" buffer\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromDER(inputBuffer, inputOffset, inputLength, expectedLength = 0)\n\t{\n\t\tconst offset = this.fromBER(inputBuffer, inputOffset, inputLength);\n\t\tif(offset === (-1))\n\t\t\treturn offset;\n\n\t\tconst view = new Uint8Array(this._valueHex);\n\n\t\tif((view[0] === 0x00) && ((view[1] & 0x80) !== 0))\n\t\t{\n\t\t\tconst updatedValueHex = new ArrayBuffer(this._valueHex.byteLength - 1);\n\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\tupdatedView.set(new Uint8Array(this._valueHex, 1, this._valueHex.byteLength - 1));\n\n\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(expectedLength !== 0)\n\t\t\t{\n\t\t\t\tif(this._valueHex.byteLength < expectedLength)\n\t\t\t\t{\n\t\t\t\t\tif((expectedLength - this._valueHex.byteLength) > 1)\n\t\t\t\t\t\texpectedLength = this._valueHex.byteLength + 1;\n\t\t\t\t\t\n\t\t\t\t\tconst updatedValueHex = new ArrayBuffer(expectedLength);\n\t\t\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\t\t\tupdatedView.set(view, expectedLength - this._valueHex.byteLength);\n\n\t\t\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (DER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoDER(sizeOnly = false)\n\t{\n\t\tconst view = new Uint8Array(this._valueHex);\n\n\t\tswitch(true)\n\t\t{\n\t\t\tcase ((view[0] & 0x80) !== 0):\n\t\t\t\t{\n\t\t\t\t\tconst updatedValueHex = new ArrayBuffer(this._valueHex.byteLength + 1);\n\t\t\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\t\t\tupdatedView[0] = 0x00;\n\t\t\t\t\tupdatedView.set(view, 1);\n\n\t\t\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ((view[0] === 0x00) && ((view[1] & 0x80) === 0)):\n\t\t\t\t{\n\t\t\t\t\tconst updatedValueHex = new ArrayBuffer(this._valueHex.byteLength - 1);\n\t\t\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\t\t\tupdatedView.set(new Uint8Array(this._valueHex, 1, this._valueHex.byteLength - 1));\n\n\t\t\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn this.toBER(sizeOnly);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n\t\tif(resultOffset === (-1))\n\t\t\treturn resultOffset;\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//noinspection JSCheckFunctionSignatures\n\t\treturn this.valueHex.slice(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"IntegerValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.valueDec = this.valueDec;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convert current value to decimal string representation\n\t */\n\ttoString()\n\t{\n\t\t//region Aux functions\n\t\tfunction viewAdd(first, second)\n\t\t{\n\t\t\t//region Initial variables\n\t\t\tconst c = new Uint8Array([0]);\n\t\t\t\n\t\t\tlet firstView = new Uint8Array(first);\n\t\t\tlet secondView = new Uint8Array(second);\n\t\t\t\n\t\t\tlet firstViewCopy = firstView.slice(0);\n\t\t\tconst firstViewCopyLength = firstViewCopy.length - 1;\n\t\t\tlet secondViewCopy = secondView.slice(0);\n\t\t\tconst secondViewCopyLength = secondViewCopy.length - 1;\n\t\t\t\n\t\t\tlet value = 0;\n\t\t\t\n\t\t\tconst max = (secondViewCopyLength < firstViewCopyLength) ? firstViewCopyLength : secondViewCopyLength;\n\t\t\t\n\t\t\tlet counter = 0;\n\t\t\t//endregion\n\t\t\t\n\t\t\tfor(let i = max; i >= 0; i--, counter++)\n\t\t\t{\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase (counter < secondViewCopy.length):\n\t\t\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] + secondViewCopy[secondViewCopyLength - counter] + c[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] + c[0];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tc[0] = value / 10;\n\t\t\t\t\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase (counter >= firstViewCopy.length):\n\t\t\t\t\t\tfirstViewCopy = utilConcatView(new Uint8Array([value % 10]), firstViewCopy);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value % 10;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(c[0] > 0)\n\t\t\t\tfirstViewCopy = utilConcatView(c, firstViewCopy);\n\t\t\t\n\t\t\treturn firstViewCopy.slice(0);\n\t\t}\n\t\t\n\t\tfunction power2(n)\n\t\t{\n\t\t\tif(n >= powers2.length)\n\t\t\t{\n\t\t\t\tfor(let p = powers2.length; p <= n; p++)\n\t\t\t\t{\n\t\t\t\t\tconst c = new Uint8Array([0]);\n\t\t\t\t\tlet digits = (powers2[p - 1]).slice(0);\n\t\t\t\t\t\n\t\t\t\t\tfor(let i = (digits.length - 1); i >=0; i--)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newValue = new Uint8Array([(digits[i] << 1) + c[0]]);\n\t\t\t\t\t\tc[0] = newValue[0] / 10;\n\t\t\t\t\t\tdigits[i] = newValue[0] % 10;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (c[0] > 0)\n\t\t\t\t\t\tdigits = utilConcatView(c, digits);\n\t\t\t\t\t\n\t\t\t\t\tpowers2.push(digits);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn powers2[n];\n\t\t}\n\t\t\n\t\tfunction viewSub(first, second)\n\t\t{\n\t\t\t//region Initial variables\n\t\t\tlet b = 0;\n\t\t\t\n\t\t\tlet firstView = new Uint8Array(first);\n\t\t\tlet secondView = new Uint8Array(second);\n\t\t\t\n\t\t\tlet firstViewCopy = firstView.slice(0);\n\t\t\tconst firstViewCopyLength = firstViewCopy.length - 1;\n\t\t\tlet secondViewCopy = secondView.slice(0);\n\t\t\tconst secondViewCopyLength = secondViewCopy.length - 1;\n\t\t\t\n\t\t\tlet value;\n\t\t\t\n\t\t\tlet counter = 0;\n\t\t\t//endregion\n\t\t\t\n\t\t\tfor(let i = secondViewCopyLength; i >= 0; i--, counter++)\n\t\t\t{\n\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] - secondViewCopy[secondViewCopyLength - counter] - b;\n\t\t\t\t\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase (value < 0):\n\t\t\t\t\t\tb = 1;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value + 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tb = 0;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(b > 0)\n\t\t\t{\n\t\t\t\tfor(let i = (firstViewCopyLength - secondViewCopyLength + 1); i >= 0; i--, counter++)\n\t\t\t\t{\n\t\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] - b;\n\t\t\t\t\t\n\t\t\t\t\tif(value < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tb = 1;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value + 10;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tb = 0;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn firstViewCopy.slice();\n\t\t}\n\t\t//endregion\n\t\t\n\t\t//region Initial variables\n\t\tconst firstBit = (this._valueHex.byteLength * 8) - 1;\n\t\t\n\t\tlet digits = new Uint8Array((this._valueHex.byteLength * 8) / 3);\n\t\tlet bitNumber = 0;\n\t\tlet currentByte;\n\t\t\n\t\tconst asn1View = new Uint8Array(this._valueHex);\n\t\t\n\t\tlet result = \"\";\n\t\t\n\t\tlet flag = false;\n\t\t//endregion\n\t\t\n\t\t//region Calculate number\n\t\tfor(let byteNumber = (this._valueHex.byteLength - 1); byteNumber >= 0; byteNumber--)\n\t\t{\n\t\t\tcurrentByte = asn1View[byteNumber];\n\t\t\t\n\t\t\tfor(let i = 0; i < 8; i++)\n\t\t\t{\n\t\t\t\tif((currentByte & 1) === 1)\n\t\t\t\t{\n\t\t\t\t\tswitch(bitNumber)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase firstBit:\n\t\t\t\t\t\t\tdigits = viewSub(power2(bitNumber), digits);\n\t\t\t\t\t\t\tresult = \"-\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdigits = viewAdd(digits, power2(bitNumber));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tbitNumber++;\n\t\t\t\tcurrentByte >>= 1;\n\t\t\t}\n\t\t}\n\t\t//endregion\n\t\t\n\t\t//region Print number\n\t\tfor(let i = 0; i < digits.length; i++)\n\t\t{\n\t\t\tif(digits[i])\n\t\t\t\tflag = true;\n\t\t\t\n\t\t\tif(flag)\n\t\t\t\tresult += digitsString.charAt(digits[i]);\n\t\t}\n\t\t\n\t\tif(flag === false)\n\t\t\tresult += digitsString.charAt(0);\n\t\t//endregion\n\t\t\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Integer extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Integer\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalIntegerValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 2; // Integer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"INTEGER\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Compare two Integer object, or Integer and ArrayBuffer objects\n\t * @param {!Integer|ArrayBuffer} otherValue\n\t * @returns {boolean}\n\t */\n\tisEqual(otherValue)\n\t{\n\t\tif(otherValue instanceof Integer)\n\t\t{\n\t\t\tif(this.valueBlock.isHexOnly && otherValue.valueBlock.isHexOnly) // Compare two ArrayBuffers\n\t\t\t\treturn isEqualBuffer(this.valueBlock.valueHex, otherValue.valueBlock.valueHex);\n\n\t\t\tif(this.valueBlock.isHexOnly === otherValue.valueBlock.isHexOnly)\n\t\t\t\treturn (this.valueBlock.valueDec === otherValue.valueBlock.valueDec);\n\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(otherValue instanceof ArrayBuffer)\n\t\t\treturn isEqualBuffer(this.valueBlock.valueHex, otherValue);\n\n\t\treturn false;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convert current Integer value from BER into DER format\n\t * @returns {Integer}\n\t */\n\tconvertToDER()\n\t{\n\t\tconst integer = new Integer({ valueHex: this.valueBlock.valueHex });\n\t\tinteger.valueBlock.toDER();\n\n\t\treturn integer;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convert current Integer value from DER to BER format\n\t * @returns {Integer}\n\t */\n\tconvertFromDER()\n\t{\n\t\tconst expectedLength = (this.valueBlock.valueHex.byteLength % 2) ? (this.valueBlock.valueHex.byteLength + 1) : this.valueBlock.valueHex.byteLength;\n\t\tconst integer = new Integer({ valueHex: this.valueBlock.valueHex });\n\t\tinteger.valueBlock.fromDER(integer.valueBlock.valueHex, 0, integer.valueBlock.valueHex.byteLength, expectedLength);\n\t\t\n\t\treturn integer;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\tconst hex = bufferToHexCodes(this.valueBlock.valueHex);\n\t\tconst bigInt = BigInt(`0x${hex}`);\n\t\treturn `${this.constructor.blockName()} : ${bigInt.toString()}`;\n\t}\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Enumerated type class\n//**************************************************************************************\nexport class Enumerated extends Integer\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Enumerated\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 10; // Enumerated\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"ENUMERATED\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 ObjectIdentifier type class\n//**************************************************************************************\nclass LocalSidValueBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalSidValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {number} [valueDec]\n\t * @property {boolean} [isFirstSid]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.valueDec = getParametersValue(parameters, \"valueDec\", -1);\n\t\tthis.isFirstSid = getParametersValue(parameters, \"isFirstSid\", false);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"sidBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tif(inputLength === 0)\n\t\t\treturn inputOffset;\n\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\n\t\tthis.valueHex = new ArrayBuffer(inputLength);\n\t\tlet view = new Uint8Array(this.valueHex);\n\n\t\tfor(let i = 0; i < inputLength; i++)\n\t\t{\n\t\t\tview[i] = intBuffer[i] & 0x7F;\n\n\t\t\tthis.blockLength++;\n\n\t\t\tif((intBuffer[i] & 0x80) === 0x00)\n\t\t\t\tbreak;\n\t\t}\n\n\t\t//region Ajust size of valueHex buffer\n\t\tconst tempValueHex = new ArrayBuffer(this.blockLength);\n\t\tconst tempView = new Uint8Array(tempValueHex);\n\n\t\tfor(let i = 0; i < this.blockLength; i++)\n\t\t\ttempView[i] = view[i];\n\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tthis.valueHex = tempValueHex.slice(0);\n\t\tview = new Uint8Array(this.valueHex);\n\t\t//endregion\n\n\t\tif((intBuffer[this.blockLength - 1] & 0x80) !== 0x00)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif(view[0] === 0x00)\n\t\t\tthis.warnings.push(\"Needlessly long format of SID encoding\");\n\n\t\tif(this.blockLength <= 8)\n\t\t\tthis.valueDec = utilFromBase(view, 7);\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = true;\n\t\t\tthis.warnings.push(\"Too big SID for decoding, hex only\");\n\t\t}\n\n\t\treturn (inputOffset + this.blockLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tif(this.isHexOnly)\n\t\t{\n\t\t\tif(sizeOnly === true)\n\t\t\t\treturn (new ArrayBuffer(this.valueHex.byteLength));\n\n\t\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\t\tretBuf = new ArrayBuffer(this.blockLength);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tfor(let i = 0; i < (this.blockLength - 1); i++)\n\t\t\t\tretView[i] = curView[i] | 0x80;\n\n\t\t\tretView[this.blockLength - 1] = curView[this.blockLength - 1];\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tconst encodedBuf = utilToBase(this.valueDec, 7);\n\t\tif(encodedBuf.byteLength === 0)\n\t\t{\n\t\t\tthis.error = \"Error during encoding SID value\";\n\t\t\treturn (new ArrayBuffer(0));\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(encodedBuf.byteLength);\n\n\t\tif(sizeOnly === false)\n\t\t{\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tfor(let i = 0; i < (encodedBuf.byteLength - 1); i++)\n\t\t\t\tretView[i] = encodedView[i] | 0x80;\n\n\t\t\tretView[encodedBuf.byteLength - 1] = encodedView[encodedBuf.byteLength - 1];\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Create string representation of current SID block\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tlet result = \"\";\n\n\t\tif(this.isHexOnly === true)\n\t\t\tresult = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\t\telse\n\t\t{\n\t\t\tif(this.isFirstSid)\n\t\t\t{\n\t\t\t\tlet sidValue = this.valueDec;\n\n\t\t\t\tif(this.valueDec <= 39)\n\t\t\t\t\tresult = \"0.\";\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(this.valueDec <= 79)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = \"1.\";\n\t\t\t\t\t\tsidValue -= 40;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = \"2.\";\n\t\t\t\t\t\tsidValue -= 80;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult += sidValue.toString();\n\t\t\t}\n\t\t\telse\n\t\t\t\tresult = this.valueDec.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.valueDec = this.valueDec;\n\t\tobject.isFirstSid = this.isFirstSid;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalObjectIdentifierValueBlock extends ValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalObjectIdentifierValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.fromString(getParametersValue(parameters, \"value\", \"\"));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tlet resultOffset = inputOffset;\n\n\t\twhile(inputLength > 0)\n\t\t{\n\t\t\tconst sidBlock = new LocalSidValueBlock();\n\t\t\tresultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n\t\t\tif(resultOffset === (-1))\n\t\t\t{\n\t\t\t\tthis.blockLength = 0;\n\t\t\t\tthis.error = sidBlock.error;\n\t\t\t\treturn resultOffset;\n\t\t\t}\n\n\t\t\tif(this.value.length === 0)\n\t\t\t\tsidBlock.isFirstSid = true;\n\n\t\t\tthis.blockLength += sidBlock.blockLength;\n\t\t\tinputLength -= sidBlock.blockLength;\n\n\t\t\tthis.value.push(sidBlock);\n\t\t}\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf = new ArrayBuffer(0);\n\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tconst valueBuf = this.value[i].toBER(sizeOnly);\n\t\t\tif(valueBuf.byteLength === 0)\n\t\t\t{\n\t\t\t\tthis.error = this.value[i].error;\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t\t}\n\n\t\t\tretBuf = utilConcatBuf(retBuf, valueBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Create \"LocalObjectIdentifierValueBlock\" class from string\n\t * @param {string} string Input string to convert from\n\t * @returns {boolean}\n\t */\n\tfromString(string)\n\t{\n\t\tthis.value = []; // Clear existing SID values\n\n\t\tlet pos1 = 0;\n\t\tlet pos2 = 0;\n\n\t\tlet sid = \"\";\n\n\t\tlet flag = false;\n\n\t\tdo\n\t\t{\n\t\t\tpos2 = string.indexOf(\".\", pos1);\n\t\t\tif(pos2 === (-1))\n\t\t\t\tsid = string.substr(pos1);\n\t\t\telse\n\t\t\t\tsid = string.substr(pos1, pos2 - pos1);\n\n\t\t\tpos1 = pos2 + 1;\n\n\t\t\tif(flag)\n\t\t\t{\n\t\t\t\tconst sidBlock = this.value[0];\n\n\t\t\t\tlet plus = 0;\n\n\t\t\t\tswitch(sidBlock.valueDec)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tplus = 40;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tplus = 80;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.value = []; // clear SID array\n\t\t\t\t\t\treturn false; // ???\n\t\t\t\t}\n\n\t\t\t\tconst parsedSID = parseInt(sid, 10);\n\t\t\t\tif(isNaN(parsedSID))\n\t\t\t\t\treturn true;\n\n\t\t\t\tsidBlock.valueDec = parsedSID + plus;\n\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst sidBlock = new LocalSidValueBlock();\n\t\t\t\tsidBlock.valueDec = parseInt(sid, 10);\n\t\t\t\tif(isNaN(sidBlock.valueDec))\n\t\t\t\t\treturn true;\n\n\t\t\t\tif(this.value.length === 0)\n\t\t\t\t{\n\t\t\t\t\tsidBlock.isFirstSid = true;\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\n\t\t\t\tthis.value.push(sidBlock);\n\t\t\t}\n\t\t} while(pos2 !== (-1));\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Converts \"LocalObjectIdentifierValueBlock\" class to string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tlet result = \"\";\n\t\tlet isHexOnly = false;\n\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tisHexOnly = this.value[i].isHexOnly;\n\n\t\t\tlet sidStr = this.value[i].toString();\n\n\t\t\tif(i !== 0)\n\t\t\t\tresult = `${result}.`;\n\n\t\t\tif(isHexOnly)\n\t\t\t{\n\t\t\t\tsidStr = `{${sidStr}}`;\n\n\t\t\t\tif(this.value[i].isFirstSid)\n\t\t\t\t\tresult = `2.{${sidStr} - 80}`;\n\t\t\t\telse\n\t\t\t\t\tresult += sidStr;\n\t\t\t}\n\t\t\telse\n\t\t\t\tresult += sidStr;\n\t\t}\n\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"ObjectIdentifierValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.toString();\n\t\tobject.sidArray = [];\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\tobject.sidArray.push(this.value[i].toJSON());\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class ObjectIdentifier extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"ObjectIdentifier\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalObjectIdentifierValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 6; // OBJECT IDENTIFIER\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"OBJECT IDENTIFIER\";\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${this.valueBlock.toString()}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of all string's classes\n//**************************************************************************************\nclass LocalUtf8StringValueBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Constructor for \"LocalUtf8StringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isHexOnly = true;\n\t\tthis.value = \"\"; // String representation of decoded ArrayBuffer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Utf8StringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class Utf8String extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Utf8String\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalUtf8StringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 12; // Utf8String\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UTF8String\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint8Array(inputBuffer));\n\n\t\ttry\n\t\t{\n\t\t\t//noinspection JSDeprecatedSymbols\n\t\t\tthis.valueBlock.value = decodeURIComponent(escape(this.valueBlock.value));\n\t\t}\n\t\tcatch(ex)\n\t\t{\n\t\t\tthis.warnings.push(`Error during \"decodeURIComponent\": ${ex}, using raw string`);\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\t//noinspection JSDeprecatedSymbols\n\t\tconst str = unescape(encodeURIComponent(inputString));\n\t\tconst strLen = str.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLen);\n\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLen; i++)\n\t\t\tview[i] = str.charCodeAt(i);\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${this.valueBlock.value}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//region Declaration of ASN.1 RelativeObjectIdentifier type class\n//**************************************************************************************\nclass LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalRelativeSidValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {number} [valueDec]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.valueDec = getParametersValue(parameters, \"valueDec\", -1);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"relativeSidBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tif (inputLength === 0)\n\t\t\treturn inputOffset;\n\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif (checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\n\t\tthis.valueHex = new ArrayBuffer(inputLength);\n\t\tlet view = new Uint8Array(this.valueHex);\n\n\t\tfor (let i = 0; i < inputLength; i++)\n\t\t{\n\t\t\tview[i] = intBuffer[i] & 0x7F;\n\n\t\t\tthis.blockLength++;\n\n\t\t\tif ((intBuffer[i] & 0x80) === 0x00)\n\t\t\t\tbreak;\n\t\t}\n\n\t\t//region Ajust size of valueHex buffer\n\t\tconst tempValueHex = new ArrayBuffer(this.blockLength);\n\t\tconst tempView = new Uint8Array(tempValueHex);\n\n\t\tfor (let i = 0; i < this.blockLength; i++)\n\t\t\ttempView[i] = view[i];\n\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tthis.valueHex = tempValueHex.slice(0);\n\t\tview = new Uint8Array(this.valueHex);\n\t\t//endregion\n\n\t\tif ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif (view[0] === 0x00)\n\t\t\tthis.warnings.push(\"Needlessly long format of SID encoding\");\n\n\t\tif (this.blockLength <= 8)\n\t\t\tthis.valueDec = utilFromBase(view, 7);\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = true;\n\t\t\tthis.warnings.push(\"Too big SID for decoding, hex only\");\n\t\t}\n\n\t\treturn (inputOffset + this.blockLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tif (this.isHexOnly)\n\t\t{\n\t\t\tif (sizeOnly === true)\n\t\t\t\treturn (new ArrayBuffer(this.valueHex.byteLength));\n\n\t\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\t\tretBuf = new ArrayBuffer(this.blockLength);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tfor (let i = 0; i < (this.blockLength - 1); i++)\n\t\t\t\tretView[i] = curView[i] | 0x80;\n\n\t\t\tretView[this.blockLength - 1] = curView[this.blockLength - 1];\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tconst encodedBuf = utilToBase(this.valueDec, 7);\n\t\tif (encodedBuf.byteLength === 0)\n\t\t{\n\t\t\tthis.error = \"Error during encoding SID value\";\n\t\t\treturn (new ArrayBuffer(0));\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(encodedBuf.byteLength);\n\n\t\tif (sizeOnly === false)\n\t\t{\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tfor (let i = 0; i < (encodedBuf.byteLength - 1); i++)\n\t\t\t\tretView[i] = encodedView[i] | 0x80;\n\n\t\t\tretView[encodedBuf.byteLength - 1] = encodedView[encodedBuf.byteLength - 1];\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Create string representation of current SID block\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tlet result = \"\";\n\n\t\tif (this.isHexOnly === true)\n\t\t\tresult = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\t\telse {\n\t\t\tresult = this.valueDec.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry {\n\t\t\tobject = super.toJSON();\n\t\t} catch (ex) {}\n\t\t//endregion\n\n\t\tobject.valueDec = this.valueDec;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalRelativeObjectIdentifierValueBlock extends ValueBlock {\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalRelativeObjectIdentifierValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.fromString(getParametersValue(parameters, \"value\", \"\"));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tlet resultOffset = inputOffset;\n\n\t\twhile (inputLength > 0)\n\t\t{\n\t\t\tconst sidBlock = new LocalRelativeSidValueBlock();\n\t\t\tresultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n\t\t\tif (resultOffset === (-1))\n\t\t\t{\n\t\t\t\tthis.blockLength = 0;\n\t\t\t\tthis.error = sidBlock.error;\n\t\t\t\treturn resultOffset;\n\t\t\t}\n\n\t\t\tthis.blockLength += sidBlock.blockLength;\n\t\t\tinputLength -= sidBlock.blockLength;\n\n\t\t\tthis.value.push(sidBlock);\n\t\t}\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf = new ArrayBuffer(0);\n\n\t\tfor (let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tconst valueBuf = this.value[i].toBER(sizeOnly);\n\t\t\tif (valueBuf.byteLength === 0)\n\t\t\t{\n\t\t\t\tthis.error = this.value[i].error;\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t\t}\n\n\t\t\tretBuf = utilConcatBuf(retBuf, valueBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Create \"LocalRelativeObjectIdentifierValueBlock\" class from string\n\t * @param {string} string Input string to convert from\n\t * @returns {boolean}\n\t */\n\tfromString(string)\n\t{\n\t\tthis.value = []; // Clear existing SID values\n\n\t\tlet pos1 = 0;\n\t\tlet pos2 = 0;\n\n\t\tlet sid = \"\";\n\n\t\tdo\n\t\t{\n\t\t\tpos2 = string.indexOf(\".\", pos1);\n\t\t\tif (pos2 === (-1))\n\t\t\t\tsid = string.substr(pos1);\n\t\t\telse\n\t\t\t\tsid = string.substr(pos1, pos2 - pos1);\n\n\t\t\tpos1 = pos2 + 1;\n\n\t\t\tconst sidBlock = new LocalRelativeSidValueBlock();\n\t\t\tsidBlock.valueDec = parseInt(sid, 10);\n\t\t\tif (isNaN(sidBlock.valueDec))\n\t\t\t\treturn true;\n\n\t\t\tthis.value.push(sidBlock);\n\n\t\t} while (pos2 !== (-1));\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Converts \"LocalRelativeObjectIdentifierValueBlock\" class to string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tlet result = \"\";\n\t\tlet isHexOnly = false;\n\n\t\tfor (let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tisHexOnly = this.value[i].isHexOnly;\n\n\t\t\tlet sidStr = this.value[i].toString();\n\n\t\t\tif (i !== 0)\n\t\t\t\tresult = `${result}.`;\n\n\t\t\tif (isHexOnly)\n\t\t\t{\n\t\t\t\tsidStr = `{${sidStr}}`;\n\t\t\t\tresult += sidStr;\n\t\t\t} else\n\t\t\t\tresult += sidStr;\n\t\t}\n\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"RelativeObjectIdentifierValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t} catch (ex) {}\n\t\t//endregion\n\n\t\tobject.value = this.toString();\n\t\tobject.sidArray = [];\n\t\tfor (let i = 0; i < this.value.length; i++)\n\t\t\tobject.sidArray.push(this.value[i].toJSON());\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class RelativeObjectIdentifier extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"RelativeObjectIdentifier\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalRelativeObjectIdentifierValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 13; // RELATIVE OBJECT IDENTIFIER\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"RelativeObjectIdentifier\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n/**\n * @extends LocalBaseBlock\n * @extends HexBlock\n */\nclass LocalBmpStringValueBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBmpStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isHexOnly = true;\n\t\tthis.value = \"\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BmpStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class BmpString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"BmpString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBmpStringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 30; // BmpString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BMPString\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tconst copyBuffer = inputBuffer.slice(0);\n\t\tconst valueView = new Uint8Array(copyBuffer);\n\n\t\tfor(let i = 0; i < valueView.length; i += 2)\n\t\t{\n\t\t\tconst temp = valueView[i];\n\n\t\t\tvalueView[i] = valueView[i + 1];\n\t\t\tvalueView[i + 1] = temp;\n\t\t}\n\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint16Array(copyBuffer));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\tconst strLength = inputString.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLength * 2);\n\t\tconst valueHexView = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLength; i++)\n\t\t{\n\t\t\tconst codeBuf = utilToBase(inputString.charCodeAt(i), 8);\n\t\t\tconst codeView = new Uint8Array(codeBuf);\n\t\t\tif(codeView.length > 2)\n\t\t\t\tcontinue;\n\n\t\t\tconst dif = 2 - codeView.length;\n\n\t\t\tfor(let j = (codeView.length - 1); j >= 0; j--)\n\t\t\t\tvalueHexView[i * 2 + j + dif] = codeView[j];\n\t\t}\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${this.valueBlock.value}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalUniversalStringValueBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalUniversalStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isHexOnly = true;\n\t\tthis.value = \"\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UniversalStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class UniversalString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"UniversalString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalUniversalStringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 28; // UniversalString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UniversalString\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tconst copyBuffer = inputBuffer.slice(0);\n\t\tconst valueView = new Uint8Array(copyBuffer);\n\n\t\tfor(let i = 0; i < valueView.length; i += 4)\n\t\t{\n\t\t\tvalueView[i] = valueView[i + 3];\n\t\t\tvalueView[i + 1] = valueView[i + 2];\n\t\t\tvalueView[i + 2] = 0x00;\n\t\t\tvalueView[i + 3] = 0x00;\n\t\t}\n\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint32Array(copyBuffer));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\tconst strLength = inputString.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLength * 4);\n\t\tconst valueHexView = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLength; i++)\n\t\t{\n\t\t\tconst codeBuf = utilToBase(inputString.charCodeAt(i), 8);\n\t\t\tconst codeView = new Uint8Array(codeBuf);\n\t\t\tif(codeView.length > 4)\n\t\t\t\tcontinue;\n\n\t\t\tconst dif = 4 - codeView.length;\n\n\t\t\tfor(let j = (codeView.length - 1); j >= 0; j--)\n\t\t\t\tvalueHexView[i * 4 + j + dif] = codeView[j];\n\t\t}\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${this.valueBlock.value}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalSimpleStringValueBlock extends HexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalSimpleStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.value = \"\";\n\t\tthis.isHexOnly = true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"SimpleStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nclass LocalSimpleStringBlock extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalSimpleStringBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalSimpleStringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"SIMPLESTRING\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint8Array(inputBuffer));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\tconst strLen = inputString.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLen);\n\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLen; i++)\n\t\t\tview[i] = inputString.charCodeAt(i);\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n\ttoString() {\n\t\treturn `${this.constructor.blockName()} : ${this.valueBlock.value}`;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class NumericString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"NumericString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 18; // NumericString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"NumericString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class PrintableString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"PrintableString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 19; // PrintableString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"PrintableString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class TeletexString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"TeletexString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 20; // TeletexString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"TeletexString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class VideotexString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"VideotexString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 21; // VideotexString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"VideotexString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class IA5String extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"IA5String\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 22; // IA5String\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"IA5String\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class GraphicString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"GraphicString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 25; // GraphicString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"GraphicString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class VisibleString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"VisibleString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 26; // VisibleString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"VisibleString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class GeneralString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"GeneralString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 27; // GeneralString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"GeneralString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class CharacterString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"CharacterString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 29; // CharacterString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"CharacterString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of all date and time classes\n//**************************************************************************************\n/**\n * @extends VisibleString\n */\nexport class UTCTime extends VisibleString\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"UTCTime\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [value] String representatio of the date\n\t * @property {Date} [valueDate] JavaScript \"Date\" object\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.year = 0;\n\t\tthis.month = 0;\n\t\tthis.day = 0;\n\t\tthis.hour = 0;\n\t\tthis.minute = 0;\n\t\tthis.second = 0;\n\n\t\t//region Create UTCTime from ASN.1 UTC string value\n\t\tif(\"value\" in parameters)\n\t\t{\n\t\t\tthis.fromString(parameters.value);\n\n\t\t\tthis.valueBlock.valueHex = new ArrayBuffer(parameters.value.length);\n\t\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\t\tfor(let i = 0; i < parameters.value.length; i++)\n\t\t\t\tview[i] = parameters.value.charCodeAt(i);\n\t\t}\n\t\t//endregion\n\t\t//region Create GeneralizedTime from JavaScript Date type\n\t\tif(\"valueDate\" in parameters)\n\t\t{\n\t\t\tthis.fromDate(parameters.valueDate);\n\t\t\tthis.valueBlock.valueHex = this.toBuffer();\n\t\t}\n\t\t//endregion\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 23; // UTCTime\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.fromString(String.fromCharCode.apply(null, new Uint8Array(inputBuffer)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal string into ArrayBuffer\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBuffer()\n\t{\n\t\tconst str = this.toString();\n\n\t\tconst buffer = new ArrayBuffer(str.length);\n\t\tconst view = new Uint8Array(buffer);\n\n\t\tfor(let i = 0; i < str.length; i++)\n\t\t\tview[i] = str.charCodeAt(i);\n\n\t\treturn buffer;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting \"Date\" object into ASN.1 internal string\n\t * @param {!Date} inputDate JavaScript \"Date\" object\n\t */\n\tfromDate(inputDate)\n\t{\n\t\tthis.year = inputDate.getUTCFullYear();\n\t\tthis.month = inputDate.getUTCMonth() + 1;\n\t\tthis.day = inputDate.getUTCDate();\n\t\tthis.hour = inputDate.getUTCHours();\n\t\tthis.minute = inputDate.getUTCMinutes();\n\t\tthis.second = inputDate.getUTCSeconds();\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Function converting ASN.1 internal string into \"Date\" object\n\t * @returns {Date}\n\t */\n\ttoDate()\n\t{\n\t\treturn (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\t//region Parse input string\n\t\tconst parser = /(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})Z/ig;\n\t\tconst parserArray = parser.exec(inputString);\n\t\tif(parserArray === null)\n\t\t{\n\t\t\tthis.error = \"Wrong input string for convertion\";\n\t\t\treturn;\n\t\t}\n\t\t//endregion\n\n\t\t//region Store parsed values\n\t\tconst year = parseInt(parserArray[1], 10);\n\t\tif(year >= 50)\n\t\t\tthis.year = 1900 + year;\n\t\telse\n\t\t\tthis.year = 2000 + year;\n\n\t\tthis.month = parseInt(parserArray[2], 10);\n\t\tthis.day = parseInt(parserArray[3], 10);\n\t\tthis.hour = parseInt(parserArray[4], 10);\n\t\tthis.minute = parseInt(parserArray[5], 10);\n\t\tthis.second = parseInt(parserArray[6], 10);\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal class into JavaScript string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tconst outputArray = new Array(7);\n\n\t\toutputArray[0] = padNumber(((this.year < 2000) ? (this.year - 1900) : (this.year - 2000)), 2);\n\t\toutputArray[1] = padNumber(this.month, 2);\n\t\toutputArray[2] = padNumber(this.day, 2);\n\t\toutputArray[3] = padNumber(this.hour, 2);\n\t\toutputArray[4] = padNumber(this.minute, 2);\n\t\toutputArray[5] = padNumber(this.second, 2);\n\t\toutputArray[6] = \"Z\";\n\n\t\treturn outputArray.join(\"\");\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UTCTime\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.year = this.year;\n\t\tobject.month = this.month;\n\t\tobject.day = this.day;\n\t\tobject.hour = this.hour;\n\t\tobject.minute = this.minute;\n\t\tobject.second = this.second;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends VisibleString\n */\nexport class GeneralizedTime extends VisibleString\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"GeneralizedTime\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [value] String representatio of the date\n\t * @property {Date} [valueDate] JavaScript \"Date\" object\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.year = 0;\n\t\tthis.month = 0;\n\t\tthis.day = 0;\n\t\tthis.hour = 0;\n\t\tthis.minute = 0;\n\t\tthis.second = 0;\n\t\tthis.millisecond = 0;\n\n\t\t//region Create UTCTime from ASN.1 UTC string value\n\t\tif(\"value\" in parameters)\n\t\t{\n\t\t\tthis.fromString(parameters.value);\n\n\t\t\tthis.valueBlock.valueHex = new ArrayBuffer(parameters.value.length);\n\t\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\t\tfor(let i = 0; i < parameters.value.length; i++)\n\t\t\t\tview[i] = parameters.value.charCodeAt(i);\n\t\t}\n\t\t//endregion\n\t\t//region Create GeneralizedTime from JavaScript Date type\n\t\tif(\"valueDate\" in parameters)\n\t\t{\n\t\t\tthis.fromDate(parameters.valueDate);\n\t\t\tthis.valueBlock.valueHex = this.toBuffer();\n\t\t}\n\t\t//endregion\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 24; // GeneralizedTime\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.fromString(String.fromCharCode.apply(null, new Uint8Array(inputBuffer)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal string into ArrayBuffer\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBuffer()\n\t{\n\t\tconst str = this.toString();\n\n\t\tconst buffer = new ArrayBuffer(str.length);\n\t\tconst view = new Uint8Array(buffer);\n\n\t\tfor(let i = 0; i < str.length; i++)\n\t\t\tview[i] = str.charCodeAt(i);\n\n\t\treturn buffer;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting \"Date\" object into ASN.1 internal string\n\t * @param {!Date} inputDate JavaScript \"Date\" object\n\t */\n\tfromDate(inputDate)\n\t{\n\t\tthis.year = inputDate.getUTCFullYear();\n\t\tthis.month = inputDate.getUTCMonth() + 1;\n\t\tthis.day = inputDate.getUTCDate();\n\t\tthis.hour = inputDate.getUTCHours();\n\t\tthis.minute = inputDate.getUTCMinutes();\n\t\tthis.second = inputDate.getUTCSeconds();\n\t\tthis.millisecond = inputDate.getUTCMilliseconds();\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Function converting ASN.1 internal string into \"Date\" object\n\t * @returns {Date}\n\t */\n\ttoDate()\n\t{\n\t\treturn (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\t//region Initial variables\n\t\tlet isUTC = false;\n\n\t\tlet timeString = \"\";\n\t\tlet dateTimeString = \"\";\n\t\tlet fractionPart = 0;\n\n\t\tlet parser;\n\n\t\tlet hourDifference = 0;\n\t\tlet minuteDifference = 0;\n\t\t//endregion\n\n\t\t//region Convert as UTC time\n\t\tif(inputString[inputString.length - 1] === \"Z\")\n\t\t{\n\t\t\ttimeString = inputString.substr(0, inputString.length - 1);\n\n\t\t\tisUTC = true;\n\t\t}\n\t\t//endregion\n\t\t//region Convert as local time\n\t\telse\n\t\t{\n\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\tconst number = new Number(inputString[inputString.length - 1]);\n\n\t\t\tif(isNaN(number.valueOf()))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\ttimeString = inputString;\n\t\t}\n\t\t//endregion\n\n\t\t//region Check that we do not have a \"+\" and \"-\" symbols inside UTC time\n\t\tif(isUTC)\n\t\t{\n\t\t\tif(timeString.indexOf(\"+\") !== (-1))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\tif(timeString.indexOf(\"-\") !== (-1))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\t\t}\n\t\t//endregion\n\t\t//region Get \"UTC time difference\" in case of local time\n\t\telse\n\t\t{\n\t\t\tlet multiplier = 1;\n\t\t\tlet differencePosition = timeString.indexOf(\"+\");\n\t\t\tlet differenceString = \"\";\n\n\t\t\tif(differencePosition === (-1))\n\t\t\t{\n\t\t\t\tdifferencePosition = timeString.indexOf(\"-\");\n\t\t\t\tmultiplier = (-1);\n\t\t\t}\n\n\t\t\tif(differencePosition !== (-1))\n\t\t\t{\n\t\t\t\tdifferenceString = timeString.substr(differencePosition + 1);\n\t\t\t\ttimeString = timeString.substr(0, differencePosition);\n\n\t\t\t\tif((differenceString.length !== 2) && (differenceString.length !== 4))\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\t\tlet number = new Number(differenceString.substr(0, 2));\n\n\t\t\t\tif(isNaN(number.valueOf()))\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\t\thourDifference = multiplier * number;\n\n\t\t\t\tif(differenceString.length === 4)\n\t\t\t\t{\n\t\t\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\t\t\tnumber = new Number(differenceString.substr(2, 2));\n\n\t\t\t\t\tif(isNaN(number.valueOf()))\n\t\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\t\t\tminuteDifference = multiplier * number;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//endregion\n\n\t\t//region Get position of fraction point\n\t\tlet fractionPointPosition = timeString.indexOf(\".\"); // Check for \"full stop\" symbol\n\t\tif(fractionPointPosition === (-1))\n\t\t\tfractionPointPosition = timeString.indexOf(\",\"); // Check for \"comma\" symbol\n\t\t//endregion\n\n\t\t//region Get fraction part\n\t\tif(fractionPointPosition !== (-1))\n\t\t{\n\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\tconst fractionPartCheck = new Number(`0${timeString.substr(fractionPointPosition)}`);\n\n\t\t\tif(isNaN(fractionPartCheck.valueOf()))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\tfractionPart = fractionPartCheck.valueOf();\n\n\t\t\tdateTimeString = timeString.substr(0, fractionPointPosition);\n\t\t}\n\t\telse\n\t\t\tdateTimeString = timeString;\n\t\t//endregion\n\n\t\t//region Parse internal date\n\t\tswitch(true)\n\t\t{\n\t\t\tcase (dateTimeString.length === 8): // \"YYYYMMDD\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})/ig;\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\"); // Here we should not have a \"fraction point\"\n\t\t\t\tbreak;\n\t\t\tcase (dateTimeString.length === 10): // \"YYYYMMDDHH\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})/ig;\n\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t{\n\t\t\t\t\tlet fractionResult = 60 * fractionPart;\n\t\t\t\t\tthis.minute = Math.floor(fractionResult);\n\n\t\t\t\t\tfractionResult = 60 * (fractionResult - this.minute);\n\t\t\t\t\tthis.second = Math.floor(fractionResult);\n\n\t\t\t\t\tfractionResult = 1000 * (fractionResult - this.second);\n\t\t\t\t\tthis.millisecond = Math.floor(fractionResult);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase (dateTimeString.length === 12): // \"YYYYMMDDHHMM\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t{\n\t\t\t\t\tlet fractionResult = 60 * fractionPart;\n\t\t\t\t\tthis.second = Math.floor(fractionResult);\n\n\t\t\t\t\tfractionResult = 1000 * (fractionResult - this.second);\n\t\t\t\t\tthis.millisecond = Math.floor(fractionResult);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase (dateTimeString.length === 14): // \"YYYYMMDDHHMMSS\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t{\n\t\t\t\t\tconst fractionResult = 1000 * fractionPart;\n\t\t\t\t\tthis.millisecond = Math.floor(fractionResult);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\t\t}\n\t\t//endregion\n\n\t\t//region Put parsed values at right places\n\t\tconst parserArray = parser.exec(dateTimeString);\n\t\tif(parserArray === null)\n\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\tfor(let j = 1; j < parserArray.length; j++)\n\t\t{\n\t\t\tswitch(j)\n\t\t\t{\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.year = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.month = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tthis.day = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tthis.hour = parseInt(parserArray[j], 10) + hourDifference;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tthis.minute = parseInt(parserArray[j], 10) + minuteDifference;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tthis.second = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\t\t\t}\n\t\t}\n\t\t//endregion\n\n\t\t//region Get final date\n\t\tif(isUTC === false)\n\t\t{\n\t\t\tconst tempDate = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond);\n\n\t\t\tthis.year = tempDate.getUTCFullYear();\n\t\t\tthis.month = tempDate.getUTCMonth();\n\t\t\tthis.day = tempDate.getUTCDay();\n\t\t\tthis.hour = tempDate.getUTCHours();\n\t\t\tthis.minute = tempDate.getUTCMinutes();\n\t\t\tthis.second = tempDate.getUTCSeconds();\n\t\t\tthis.millisecond = tempDate.getUTCMilliseconds();\n\t\t}\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal class into JavaScript string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tconst outputArray = [];\n\n\t\toutputArray.push(padNumber(this.year, 4));\n\t\toutputArray.push(padNumber(this.month, 2));\n\t\toutputArray.push(padNumber(this.day, 2));\n\t\toutputArray.push(padNumber(this.hour, 2));\n\t\toutputArray.push(padNumber(this.minute, 2));\n\t\toutputArray.push(padNumber(this.second, 2));\n\t\tif(this.millisecond !== 0)\n\t\t{\n\t\t\toutputArray.push(\".\");\n\t\t\toutputArray.push(padNumber(this.millisecond, 3));\n\t\t}\n\t\toutputArray.push(\"Z\");\n\n\t\treturn outputArray.join(\"\");\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"GeneralizedTime\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.year = this.year;\n\t\tobject.month = this.month;\n\t\tobject.day = this.day;\n\t\tobject.hour = this.hour;\n\t\tobject.minute = this.minute;\n\t\tobject.second = this.second;\n\t\tobject.millisecond = this.millisecond;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class DATE extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"DATE\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 31; // DATE\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"DATE\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class TimeOfDay extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"TimeOfDay\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 32; // TimeOfDay\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"TimeOfDay\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class DateTime extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"DateTime\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 33; // DateTime\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"DateTime\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class Duration extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Duration\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 34; // Duration\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Duration\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class TIME extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Time\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 14; // Time\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"TIME\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type Choice\n//**************************************************************************************\nexport class Choice\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Choice\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Array} [value] Array of ASN.1 types for make a choice from\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.value = getParametersValue(parameters, \"value\", []);\n\t\tthis.optional = getParametersValue(parameters, \"optional\", false);\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type Any\n//**************************************************************************************\nexport class Any\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Any\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.name = getParametersValue(parameters, \"name\", \"\");\n\t\tthis.optional = getParametersValue(parameters, \"optional\", false);\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type Repeated\n//**************************************************************************************\nexport class Repeated\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Repeated\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.name = getParametersValue(parameters, \"name\", \"\");\n\t\tthis.optional = getParametersValue(parameters, \"optional\", false);\n\t\tthis.value = getParametersValue(parameters, \"value\", new Any());\n\t\tthis.local = getParametersValue(parameters, \"local\", false); // Could local or global array to store elements\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type RawData\n//**************************************************************************************\n/**\n * @description Special class providing ability to have \"toBER/fromBER\" for raw ArrayBuffer\n */\nexport class RawData\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Repeated\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.data = getParametersValue(parameters, \"data\", new ArrayBuffer(0));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tthis.data = inputBuffer.slice(inputOffset, inputLength);\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn this.data;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Major ASN.1 BER decoding function\n//**************************************************************************************\n/**\n * Internal library function for decoding ASN.1 BER\n * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n * @returns {{offset: number, result: Object}}\n */\nfunction LocalFromBER(inputBuffer, inputOffset, inputLength)\n{\n\tconst incomingOffset = inputOffset; // Need to store initial offset since \"inputOffset\" is changing in the function\n\n\t//region Local function changing a type for ASN.1 classes\n\tfunction localChangeType(inputObject, newType)\n\t{\n\t\tif(inputObject instanceof newType)\n\t\t\treturn inputObject;\n\n\t\tconst newObject = new newType();\n\t\tnewObject.idBlock = inputObject.idBlock;\n\t\tnewObject.lenBlock = inputObject.lenBlock;\n\t\tnewObject.warnings = inputObject.warnings;\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tnewObject.valueBeforeDecode = inputObject.valueBeforeDecode.slice(0);\n\n\t\treturn newObject;\n\t}\n\t//endregion\n\n\t//region Create a basic ASN.1 type since we need to return errors and warnings from the function\n\tlet returnObject = new BaseBlock({}, Object);\n\t//endregion\n\n\t//region Basic check for parameters\n\tconst baseBlock = new LocalBaseBlock();\n\tif(checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) === false)\n\t{\n\t\treturnObject.error = baseBlock.error;\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\t//endregion\n\n\t//region Getting Uint8Array from ArrayBuffer\n\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t//endregion\n\n\t//region Initial checks\n\tif(intBuffer.length === 0)\n\t{\n\t\treturnObject.error = \"Zero buffer length\";\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\t//endregion\n\n\t//region Decode indentifcation block of ASN.1 BER structure\n\tlet resultOffset = returnObject.idBlock.fromBER(inputBuffer, inputOffset, inputLength);\n\treturnObject.warnings.concat(returnObject.idBlock.warnings);\n\tif(resultOffset === (-1))\n\t{\n\t\treturnObject.error = returnObject.idBlock.error;\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\n\tinputOffset = resultOffset;\n\tinputLength -= returnObject.idBlock.blockLength;\n\t//endregion\n\n\t//region Decode length block of ASN.1 BER structure\n\tresultOffset = returnObject.lenBlock.fromBER(inputBuffer, inputOffset, inputLength);\n\treturnObject.warnings.concat(returnObject.lenBlock.warnings);\n\tif(resultOffset === (-1))\n\t{\n\t\treturnObject.error = returnObject.lenBlock.error;\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\n\tinputOffset = resultOffset;\n\tinputLength -= returnObject.lenBlock.blockLength;\n\t//endregion\n\n\t//region Check for usign indefinite length form in encoding for primitive types\n\tif((returnObject.idBlock.isConstructed === false) &&\n\t\t(returnObject.lenBlock.isIndefiniteForm === true))\n\t{\n\t\treturnObject.error = \"Indefinite length form used for primitive encoding form\";\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\t//endregion\n\n\t//region Switch ASN.1 block type\n\tlet newASN1Type = BaseBlock;\n\n\tswitch(returnObject.idBlock.tagClass)\n\t{\n\t\t//region UNIVERSAL\n\t\tcase 1:\n\t\t\t//region Check for reserved tag numbers\n\t\t\tif((returnObject.idBlock.tagNumber >= 37) &&\n\t\t\t\t(returnObject.idBlock.isHexOnly === false))\n\t\t\t{\n\t\t\t\treturnObject.error = \"UNIVERSAL 37 and upper tags are reserved by ASN.1 standard\";\n\t\t\t\treturn {\n\t\t\t\t\toffset: (-1),\n\t\t\t\t\tresult: returnObject\n\t\t\t\t};\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\tswitch(returnObject.idBlock.tagNumber)\n\t\t\t{\n\t\t\t\t//region EndOfContent type\n\t\t\t\tcase 0:\n\t\t\t\t\t//region Check for EndOfContent type\n\t\t\t\t\tif((returnObject.idBlock.isConstructed === true) &&\n\t\t\t\t\t\t(returnObject.lenBlock.length > 0))\n\t\t\t\t\t{\n\t\t\t\t\t\treturnObject.error = \"Type [UNIVERSAL 0] is reserved\";\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\toffset: (-1),\n\t\t\t\t\t\t\tresult: returnObject\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t//endregion\n\n\t\t\t\t\tnewASN1Type = EndOfContent;\n\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Boolean type\n\t\t\t\tcase 1:\n\t\t\t\t\tnewASN1Type = Boolean;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Integer type\n\t\t\t\tcase 2:\n\t\t\t\t\tnewASN1Type = Integer;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region BitString type\n\t\t\t\tcase 3:\n\t\t\t\t\tnewASN1Type = BitString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region OctetString type\n\t\t\t\tcase 4:\n\t\t\t\t\tnewASN1Type = OctetString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Null type\n\t\t\t\tcase 5:\n\t\t\t\t\tnewASN1Type = Null;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region OBJECT IDENTIFIER type\n\t\t\t\tcase 6:\n\t\t\t\t\tnewASN1Type = ObjectIdentifier;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Enumerated type\n\t\t\t\tcase 10:\n\t\t\t\t\tnewASN1Type = Enumerated;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Utf8String type\n\t\t\t\tcase 12:\n\t\t\t\t\tnewASN1Type = Utf8String;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Time type\n\t\t\t\t//region RELATIVE OBJECT IDENTIFIER type\n\t\t\t\tcase 13:\n\t\t\t\t\tnewASN1Type = RelativeObjectIdentifier;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\tcase 14:\n\t\t\t\t\tnewASN1Type = TIME;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region ASN.1 reserved type\n\t\t\t\tcase 15:\n\t\t\t\t\treturnObject.error = \"[UNIVERSAL 15] is reserved by ASN.1 standard\";\n\t\t\t\t\treturn {\n\t\t\t\t\t\toffset: (-1),\n\t\t\t\t\t\tresult: returnObject\n\t\t\t\t\t};\n\t\t\t\t//endregion\n\t\t\t\t//region Sequence type\n\t\t\t\tcase 16:\n\t\t\t\t\tnewASN1Type = Sequence;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Set type\n\t\t\t\tcase 17:\n\t\t\t\t\tnewASN1Type = Set;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region NumericString type\n\t\t\t\tcase 18:\n\t\t\t\t\tnewASN1Type = NumericString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region PrintableString type\n\t\t\t\tcase 19:\n\t\t\t\t\tnewASN1Type = PrintableString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region TeletexString type\n\t\t\t\tcase 20:\n\t\t\t\t\tnewASN1Type = TeletexString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region VideotexString type\n\t\t\t\tcase 21:\n\t\t\t\t\tnewASN1Type = VideotexString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region IA5String type\n\t\t\t\tcase 22:\n\t\t\t\t\tnewASN1Type = IA5String;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region UTCTime type\n\t\t\t\tcase 23:\n\t\t\t\t\tnewASN1Type = UTCTime;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region GeneralizedTime type\n\t\t\t\tcase 24:\n\t\t\t\t\tnewASN1Type = GeneralizedTime;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region GraphicString type\n\t\t\t\tcase 25:\n\t\t\t\t\tnewASN1Type = GraphicString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region VisibleString type\n\t\t\t\tcase 26:\n\t\t\t\t\tnewASN1Type = VisibleString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region GeneralString type\n\t\t\t\tcase 27:\n\t\t\t\t\tnewASN1Type = GeneralString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region UniversalString type\n\t\t\t\tcase 28:\n\t\t\t\t\tnewASN1Type = UniversalString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region CharacterString type\n\t\t\t\tcase 29:\n\t\t\t\t\tnewASN1Type = CharacterString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region BmpString type\n\t\t\t\tcase 30:\n\t\t\t\t\tnewASN1Type = BmpString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region DATE type\n\t\t\t\tcase 31:\n\t\t\t\t\tnewASN1Type = DATE;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region TimeOfDay type\n\t\t\t\tcase 32:\n\t\t\t\t\tnewASN1Type = TimeOfDay;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Date-Time type\n\t\t\t\tcase 33:\n\t\t\t\t\tnewASN1Type = DateTime;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Duration type\n\t\t\t\tcase 34:\n\t\t\t\t\tnewASN1Type = Duration;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region default\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tlet newObject;\n\n\t\t\t\t\t\tif(returnObject.idBlock.isConstructed === true)\n\t\t\t\t\t\t\tnewObject = new Constructed();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tnewObject = new Primitive();\n\n\t\t\t\t\t\tnewObject.idBlock = returnObject.idBlock;\n\t\t\t\t\t\tnewObject.lenBlock = returnObject.lenBlock;\n\t\t\t\t\t\tnewObject.warnings = returnObject.warnings;\n\n\t\t\t\t\t\treturnObject = newObject;\n\t\t\t\t\t}\n\t\t\t\t//endregion\n\t\t\t}\n\t\t\tbreak;\n\t\t//endregion\n\t\t//region All other tag classes\n\t\tcase 2: // APPLICATION\n\t\tcase 3: // CONTEXT-SPECIFIC\n\t\tcase 4: // PRIVATE\n\t\tdefault:\n\t\t\t{\n\t\t\t\tif(returnObject.idBlock.isConstructed === true)\n\t\t\t\t\tnewASN1Type = Constructed;\n\t\t\t\telse\n\t\t\t\t\tnewASN1Type = Primitive;\n\t\t\t}\n\t\t//endregion\n\t}\n\t//endregion\n\n\t//region Change type and perform BER decoding\n\treturnObject = localChangeType(returnObject, newASN1Type);\n\tresultOffset = returnObject.fromBER(inputBuffer, inputOffset, (returnObject.lenBlock.isIndefiniteForm === true) ? inputLength : returnObject.lenBlock.length);\n\t//endregion\n\n\t//region Coping incoming buffer for entire ASN.1 block\n\treturnObject.valueBeforeDecode = inputBuffer.slice(incomingOffset, incomingOffset + returnObject.blockLength);\n\t//endregion\n\n\treturn {\n\t\toffset: resultOffset,\n\t\tresult: returnObject\n\t};\n}\n//**************************************************************************************\n/**\n * Major function for decoding ASN.1 BER array into internal library structuries\n * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array of bytes\n */\nexport function fromBER(inputBuffer)\n{\n\tif(inputBuffer.byteLength === 0)\n\t{\n\t\tconst result = new BaseBlock({}, Object);\n\t\tresult.error = \"Input buffer has zero length\";\n\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult\n\t\t};\n\t}\n\n\treturn LocalFromBER(inputBuffer, 0, inputBuffer.byteLength);\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Major scheme verification function\n//**************************************************************************************\n/**\n * Compare of two ASN.1 object trees\n * @param {!Object} root Root of input ASN.1 object tree\n * @param {!Object} inputData Input ASN.1 object tree\n * @param {!Object} inputSchema Input ASN.1 schema to compare with\n * @return {{verified: boolean}|{verified:boolean, result: Object}}\n */\nexport function compareSchema(root, inputData, inputSchema)\n{\n\t//region Special case for Choice schema element type\n\tif(inputSchema instanceof Choice)\n\t{\n\t\tconst choiceResult = false;\n\n\t\tfor(let j = 0; j < inputSchema.value.length; j++)\n\t\t{\n\t\t\tconst result = compareSchema(root, inputData, inputSchema.value[j]);\n\t\t\tif(result.verified === true)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tverified: true,\n\t\t\t\t\tresult: root\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif(choiceResult === false)\n\t\t{\n\t\t\tconst _result = {\n\t\t\t\tverified: false,\n\t\t\t\tresult: {\n\t\t\t\t\terror: \"Wrong values for Choice type\"\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t_result.name = inputSchema.name;\n\n\t\t\treturn _result;\n\t\t}\n\t}\n\t//endregion\n\n\t//region Special case for Any schema element type\n\tif(inputSchema instanceof Any)\n\t{\n\t\t//region Add named component of ASN.1 schema\n\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\troot[inputSchema.name] = inputData;\n\t\t//endregion\n\n\t\treturn {\n\t\t\tverified: true,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\n\t//region Initial check\n\tif((root instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong root object\" }\n\t\t};\n\t}\n\n\tif((inputData instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 data\" }\n\t\t};\n\t}\n\n\tif((inputSchema instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif((\"idBlock\" in inputSchema) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\t//endregion\n\n\t//region Comparing idBlock properties in ASN.1 data and ASN.1 schema\n\t//region Encode and decode ASN.1 schema idBlock\n\t/// <remarks>This encoding/decoding is neccessary because could be an errors in schema definition</remarks>\n\tif((\"fromBER\" in inputSchema.idBlock) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif((\"toBER\" in inputSchema.idBlock) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tconst encodedId = inputSchema.idBlock.toBER(false);\n\tif(encodedId.byteLength === 0)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Error encoding idBlock for ASN.1 schema\" }\n\t\t};\n\t}\n\n\tconst decodedOffset = inputSchema.idBlock.fromBER(encodedId, 0, encodedId.byteLength);\n\tif(decodedOffset === (-1))\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Error decoding idBlock for ASN.1 schema\" }\n\t\t};\n\t}\n\t//endregion\n\n\t//region tagClass\n\tif(inputSchema.idBlock.hasOwnProperty(\"tagClass\") === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.tagClass !== inputData.idBlock.tagClass)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region tagNumber\n\tif(inputSchema.idBlock.hasOwnProperty(\"tagNumber\") === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.tagNumber !== inputData.idBlock.tagNumber)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region isConstructed\n\tif(inputSchema.idBlock.hasOwnProperty(\"isConstructed\") === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.isConstructed !== inputData.idBlock.isConstructed)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region isHexOnly\n\tif((\"isHexOnly\" in inputSchema.idBlock) === false) // Since 'isHexOnly' is an inhirited property\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.isHexOnly !== inputData.idBlock.isHexOnly)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region valueHex\n\tif(inputSchema.idBlock.isHexOnly === true)\n\t{\n\t\tif((\"valueHex\" in inputSchema.idBlock) === false) // Since 'valueHex' is an inhirited property\n\t\t{\n\t\t\treturn {\n\t\t\t\tverified: false,\n\t\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t\t};\n\t\t}\n\n\t\tconst schemaView = new Uint8Array(inputSchema.idBlock.valueHex);\n\t\tconst asn1View = new Uint8Array(inputData.idBlock.valueHex);\n\n\t\tif(schemaView.length !== asn1View.length)\n\t\t{\n\t\t\treturn {\n\t\t\t\tverified: false,\n\t\t\t\tresult: root\n\t\t\t};\n\t\t}\n\n\t\tfor(let i = 0; i < schemaView.length; i++)\n\t\t{\n\t\t\tif(schemaView[i] !== asn1View[1])\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tverified: false,\n\t\t\t\t\tresult: root\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\t//endregion\n\t//endregion\n\n\t//region Add named component of ASN.1 schema\n\tif(inputSchema.hasOwnProperty(\"name\"))\n\t{\n\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\tif(inputSchema.name !== \"\")\n\t\t\troot[inputSchema.name] = inputData;\n\t}\n\t//endregion\n\n\t//region Getting next ASN.1 block for comparition\n\tif(inputSchema.idBlock.isConstructed === true)\n\t{\n\t\tlet admission = 0;\n\t\tlet result = { verified: false };\n\n\t\tlet maxLength = inputSchema.valueBlock.value.length;\n\n\t\tif(maxLength > 0)\n\t\t{\n\t\t\tif(inputSchema.valueBlock.value[0] instanceof Repeated)\n\t\t\t\tmaxLength = inputData.valueBlock.value.length;\n\t\t}\n\n\t\t//region Special case when constructive value has no elements\n\t\tif(maxLength === 0)\n\t\t{\n\t\t\treturn {\n\t\t\t\tverified: true,\n\t\t\t\tresult: root\n\t\t\t};\n\t\t}\n\t\t//endregion\n\n\t\t//region Special case when \"inputData\" has no values and \"inputSchema\" has all optional values\n\t\tif((inputData.valueBlock.value.length === 0) &&\n\t\t\t(inputSchema.valueBlock.value.length !== 0))\n\t\t{\n\t\t\tlet _optional = true;\n\n\t\t\tfor(let i = 0; i < inputSchema.valueBlock.value.length; i++)\n\t\t\t\t_optional = _optional && (inputSchema.valueBlock.value[i].optional || false);\n\n\t\t\tif(_optional === true)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tverified: true,\n\t\t\t\t\tresult: root\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t//region Delete early added name of block\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t{\n\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\troot.error = \"Inconsistent object length\";\n\n\t\t\treturn {\n\t\t\t\tverified: false,\n\t\t\t\tresult: root\n\t\t\t};\n\t\t}\n\t\t//endregion\n\n\t\tfor(let i = 0; i < maxLength; i++)\n\t\t{\n\t\t\t//region Special case when there is an \"optional\" element of ASN.1 schema at the end\n\t\t\tif((i - admission) >= inputData.valueBlock.value.length)\n\t\t\t{\n\t\t\t\tif(inputSchema.valueBlock.value[i].optional === false)\n\t\t\t\t{\n\t\t\t\t\tconst _result = {\n\t\t\t\t\t\tverified: false,\n\t\t\t\t\t\tresult: root\n\t\t\t\t\t};\n\n\t\t\t\t\troot.error = \"Inconsistent length between ASN.1 data and schema\";\n\n\t\t\t\t\t//region Delete early added name of block\n\t\t\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t\t\t_result.name = inputSchema.name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//endregion\n\n\t\t\t\t\treturn _result;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//endregion\n\t\t\telse\n\t\t\t{\n\t\t\t\t//region Special case for Repeated type of ASN.1 schema element\n\t\t\t\tif(inputSchema.valueBlock.value[0] instanceof Repeated)\n\t\t\t\t{\n\t\t\t\t\tresult = compareSchema(root, inputData.valueBlock.value[i], inputSchema.valueBlock.value[0].value);\n\t\t\t\t\tif(result.verified === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(inputSchema.valueBlock.value[0].optional === true)\n\t\t\t\t\t\t\tadmission++;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//region Delete early added name of block\n\t\t\t\t\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\t\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//endregion\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif((\"name\" in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].name.length > 0))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet arrayRoot = {};\n\n\t\t\t\t\t\tif((\"local\" in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].local === true))\n\t\t\t\t\t\t\tarrayRoot = inputData;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tarrayRoot = root;\n\n\t\t\t\t\t\tif(typeof arrayRoot[inputSchema.valueBlock.value[0].name] === \"undefined\")\n\t\t\t\t\t\t\tarrayRoot[inputSchema.valueBlock.value[0].name] = [];\n\n\t\t\t\t\t\tarrayRoot[inputSchema.valueBlock.value[0].name].push(inputData.valueBlock.value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//endregion\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = compareSchema(root, inputData.valueBlock.value[i - admission], inputSchema.valueBlock.value[i]);\n\t\t\t\t\tif(result.verified === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(inputSchema.valueBlock.value[i].optional === true)\n\t\t\t\t\t\t\tadmission++;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//region Delete early added name of block\n\t\t\t\t\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\t\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//endregion\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(result.verified === false) // The situation may take place if last element is \"optional\" and verification failed\n\t\t{\n\t\t\tconst _result = {\n\t\t\t\tverified: false,\n\t\t\t\tresult: root\n\t\t\t};\n\n\t\t\t//region Delete early added name of block\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t{\n\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t{\n\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t_result.name = inputSchema.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\treturn _result;\n\t\t}\n\n\t\treturn {\n\t\t\tverified: true,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region Ability to parse internal value for primitive-encoded value (value of OctetString, for example)\n\tif((\"primitiveSchema\" in inputSchema) &&\n\t\t(\"valueHex\" in inputData.valueBlock))\n\t{\n\t\t//region Decoding of raw ASN.1 data\n\t\tconst asn1 = fromBER(inputData.valueBlock.valueHex);\n\t\tif(asn1.offset === (-1))\n\t\t{\n\t\t\tconst _result = {\n\t\t\t\tverified: false,\n\t\t\t\tresult: asn1.result\n\t\t\t};\n\n\t\t\t//region Delete early added name of block\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t{\n\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t{\n\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t_result.name = inputSchema.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\treturn _result;\n\t\t}\n\t\t//endregion\n\n\t\treturn compareSchema(root, asn1.result, inputSchema.primitiveSchema);\n\t}\n\n\treturn {\n\t\tverified: true,\n\t\tresult: root\n\t};\n\t//endregion\n}\n//**************************************************************************************\n//noinspection JSUnusedGlobalSymbols\n/**\n * ASN.1 schema verification for ArrayBuffer data\n * @param {!ArrayBuffer} inputBuffer Input BER-encoded ASN.1 data\n * @param {!Object} inputSchema Input ASN.1 schema to verify against to\n * @return {{verified: boolean}|{verified:boolean, result: Object}}\n */\nexport function verifySchema(inputBuffer, inputSchema)\n{\n\t//region Initial check\n\tif((inputSchema instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema type\" }\n\t\t};\n\t}\n\t//endregion\n\n\t//region Decoding of raw ASN.1 data\n\tconst asn1 = fromBER(inputBuffer);\n\tif(asn1.offset === (-1))\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: asn1.result\n\t\t};\n\t}\n\t//endregion\n\n\t//region Compare ASN.1 struct with input schema\n\treturn compareSchema(asn1.result, asn1.result, inputSchema);\n\t//endregion\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Major function converting JSON to ASN.1 objects\n//**************************************************************************************\n//noinspection JSUnusedGlobalSymbols\n/**\n * Converting from JSON to ASN.1 objects\n * @param {string|Object} json JSON string or object to convert to ASN.1 objects\n */\nexport function fromJSON(json)\n{\n\t// TODO Implement\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n","//**************************************************************************************\r\n/**\r\n * Making UTC date from local date\r\n * @param {Date} date Date to convert from\r\n * @returns {Date}\r\n */\r\nexport function getUTCDate(date)\r\n{\r\n\t// noinspection NestedFunctionCallJS, MagicNumberJS\r\n\treturn new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Get value for input parameters, or set a default value\r\n * @param {Object} parameters\r\n * @param {string} name\r\n * @param defaultValue\r\n */\r\nexport function getParametersValue(parameters, name, defaultValue)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tif((parameters instanceof Object) === false)\r\n\t\treturn defaultValue;\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(name in parameters)\r\n\t\treturn parameters[name];\r\n\t\r\n\treturn defaultValue;\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Converts \"ArrayBuffer\" into a hexdecimal string\r\n * @param {ArrayBuffer} inputBuffer\r\n * @param {number} [inputOffset=0]\r\n * @param {number} [inputLength=inputBuffer.byteLength]\r\n * @param {boolean} [insertSpace=false]\r\n * @returns {string}\r\n */\r\nexport function bufferToHexCodes(inputBuffer, inputOffset = 0, inputLength = (inputBuffer.byteLength - inputOffset), insertSpace = false)\r\n{\r\n\tlet result = \"\";\r\n\t\r\n\tfor(const item of (new Uint8Array(inputBuffer, inputOffset, inputLength)))\r\n\t{\r\n\t\t// noinspection ChainedFunctionCallJS\r\n\t\tconst str = item.toString(16).toUpperCase();\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\t\tif(str.length === 1)\r\n\t\t\tresult += \"0\";\r\n\t\t\r\n\t\tresult += str;\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(insertSpace)\r\n\t\t\tresult += \" \";\r\n\t}\r\n\t\r\n\treturn result.trim();\r\n}\r\n//**************************************************************************************\r\n// noinspection JSValidateJSDoc, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Check input \"ArrayBuffer\" for common functions\r\n * @param {LocalBaseBlock} baseBlock\r\n * @param {ArrayBuffer} inputBuffer\r\n * @param {number} inputOffset\r\n * @param {number} inputLength\r\n * @returns {boolean}\r\n */\r\nexport function checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif((inputBuffer instanceof ArrayBuffer) === false)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputBuffer must be \\\"ArrayBuffer\\\"\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputBuffer.byteLength === 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputOffset < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputLength < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif((inputBuffer.byteLength - inputOffset - inputLength) < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Convert number from 2^base to 2^10\r\n * @param {Uint8Array} inputBuffer\r\n * @param {number} inputBase\r\n * @returns {number}\r\n */\r\nexport function utilFromBase(inputBuffer, inputBase)\r\n{\r\n\tlet result = 0;\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tif(inputBuffer.length === 1)\r\n\t\treturn inputBuffer[0];\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tfor(let i = (inputBuffer.length - 1); i >= 0; i--)\r\n\t\tresult += inputBuffer[(inputBuffer.length - 1) - i] * Math.pow(2, inputBase * i);\r\n\t\r\n\treturn result;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Convert number from 2^10 to 2^base\r\n * @param {!number} value The number to convert\r\n * @param {!number} base The base for 2^base\r\n * @param {number} [reserved=0] Pre-defined number of bytes in output array (-1 = limited by function itself)\r\n * @returns {ArrayBuffer}\r\n */\r\nexport function utilToBase(value, base, reserved = (-1))\r\n{\r\n\tconst internalReserved = reserved;\r\n\tlet internalValue = value;\r\n\t\r\n\tlet result = 0;\r\n\tlet biggest = Math.pow(2, base);\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tfor(let i = 1; i < 8; i++)\r\n\t{\r\n\t\tif(value < biggest)\r\n\t\t{\r\n\t\t\tlet retBuf;\r\n\t\t\t\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(internalReserved < 0)\r\n\t\t\t{\r\n\t\t\t\tretBuf = new ArrayBuffer(i);\r\n\t\t\t\tresult = i;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\t\tif(internalReserved < i)\r\n\t\t\t\t\treturn (new ArrayBuffer(0));\r\n\t\t\t\t\r\n\t\t\t\tretBuf = new ArrayBuffer(internalReserved);\r\n\t\t\t\t\r\n\t\t\t\tresult = internalReserved;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst retView = new Uint8Array(retBuf);\r\n\t\t\t\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tfor(let j = (i - 1); j >= 0; j--)\r\n\t\t\t{\r\n\t\t\t\tconst basis = Math.pow(2, j * base);\r\n\t\t\t\t\r\n\t\t\t\tretView[result - j - 1] = Math.floor(internalValue / basis);\r\n\t\t\t\tinternalValue -= (retView[result - j - 1]) * basis;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn retBuf;\r\n\t\t}\r\n\t\t\r\n\t\tbiggest *= Math.pow(2, base);\r\n\t}\r\n\t\r\n\treturn new ArrayBuffer(0);\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Concatenate two ArrayBuffers\r\n * @param {...ArrayBuffer} buffers Set of ArrayBuffer\r\n */\r\nexport function utilConcatBuf(...buffers)\r\n{\r\n\t//region Initial variables\r\n\tlet outputLength = 0;\r\n\tlet prevLength = 0;\r\n\t//endregion\r\n\t\r\n\t//region Calculate output length\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const buffer of buffers)\r\n\t\toutputLength += buffer.byteLength;\r\n\t//endregion\r\n\t\r\n\tconst retBuf = new ArrayBuffer(outputLength);\r\n\tconst retView = new Uint8Array(retBuf);\r\n\t\r\n\tfor(const buffer of buffers)\r\n\t{\r\n\t\t// noinspection NestedFunctionCallJS\r\n\t\tretView.set(new Uint8Array(buffer), prevLength);\r\n\t\tprevLength += buffer.byteLength;\r\n\t}\r\n\t\r\n\treturn retBuf;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Concatenate two Uint8Array\r\n * @param {...Uint8Array} views Set of Uint8Array\r\n */\r\nexport function utilConcatView(...views)\r\n{\r\n\t//region Initial variables\r\n\tlet outputLength = 0;\r\n\tlet prevLength = 0;\r\n\t//endregion\r\n\t\r\n\t//region Calculate output length\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const view of views)\r\n\t\toutputLength += view.length;\r\n\t//endregion\r\n\t\r\n\tconst retBuf = new ArrayBuffer(outputLength);\r\n\tconst retView = new Uint8Array(retBuf);\r\n\t\r\n\tfor(const view of views)\r\n\t{\r\n\t\tretView.set(view, prevLength);\r\n\t\tprevLength += view.length;\r\n\t}\r\n\t\r\n\treturn retView;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Decoding of \"two complement\" values\r\n * The function must be called in scope of instance of \"hexBlock\" class (\"valueHex\" and \"warnings\" properties must be present)\r\n * @returns {number}\r\n */\r\nexport function utilDecodeTC()\r\n{\r\n\tconst buf = new Uint8Array(this.valueHex);\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(this.valueHex.byteLength >= 2)\r\n\t{\r\n\t\t//noinspection JSBitwiseOperatorUsage, ConstantOnRightSideOfComparisonJS, LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst condition1 = (buf[0] === 0xFF) && (buf[1] & 0x80);\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst condition2 = (buf[0] === 0x00) && ((buf[1] & 0x80) === 0x00);\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(condition1 || condition2)\r\n\t\t\tthis.warnings.push(\"Needlessly long format\");\r\n\t}\r\n\t\r\n\t//region Create big part of the integer\r\n\tconst bigIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n\tconst bigIntView = new Uint8Array(bigIntBuffer);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < this.valueHex.byteLength; i++)\r\n\t\tbigIntView[i] = 0;\r\n\t\r\n\t// noinspection MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\tbigIntView[0] = (buf[0] & 0x80); // mask only the biggest bit\r\n\t\r\n\tconst bigInt = utilFromBase(bigIntView, 8);\r\n\t//endregion\r\n\t\r\n\t//region Create small part of the integer\r\n\tconst smallIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n\tconst smallIntView = new Uint8Array(smallIntBuffer);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let j = 0; j < this.valueHex.byteLength; j++)\r\n\t\tsmallIntView[j] = buf[j];\r\n\t\r\n\t// noinspection MagicNumberJS\r\n\tsmallIntView[0] &= 0x7F; // mask biggest bit\r\n\t\r\n\tconst smallInt = utilFromBase(smallIntView, 8);\r\n\t//endregion\r\n\t\r\n\treturn (smallInt - bigInt);\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Encode integer value to \"two complement\" format\r\n * @param {number} value Value to encode\r\n * @returns {ArrayBuffer}\r\n */\r\nexport function utilEncodeTC(value)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, ConditionalExpressionJS\r\n\tconst modValue = (value < 0) ? (value * (-1)) : value;\r\n\tlet bigInt = 128;\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tfor(let i = 1; i < 8; i++)\r\n\t{\r\n\t\tif(modValue <= bigInt)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(value < 0)\r\n\t\t\t{\r\n\t\t\t\tconst smallInt = bigInt - modValue;\r\n\t\t\t\t\r\n\t\t\t\tconst retBuf = utilToBase(smallInt, 8, i);\r\n\t\t\t\tconst retView = new Uint8Array(retBuf);\r\n\t\t\t\t\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tretView[0] |= 0x80;\r\n\t\t\t\t\r\n\t\t\t\treturn retBuf;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet retBuf = utilToBase(modValue, 8, i);\r\n\t\t\tlet retView = new Uint8Array(retBuf);\r\n\t\t\t\r\n\t\t\t//noinspection JSBitwiseOperatorUsage, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\t\tif(retView[0] & 0x80)\r\n\t\t\t{\r\n\t\t\t\t//noinspection JSCheckFunctionSignatures\r\n\t\t\t\tconst tempBuf = retBuf.slice(0);\r\n\t\t\t\tconst tempView = new Uint8Array(tempBuf);\r\n\t\t\t\t\r\n\t\t\t\tretBuf = new ArrayBuffer(retBuf.byteLength + 1);\r\n\t\t\t\t// noinspection ReuseOfLocalVariableJS\r\n\t\t\t\tretView = new Uint8Array(retBuf);\r\n\t\t\t\t\r\n\t\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\t\tfor(let k = 0; k < tempBuf.byteLength; k++)\r\n\t\t\t\t\tretView[k + 1] = tempView[k];\r\n\t\t\t\t\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tretView[0] = 0x00;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn retBuf;\r\n\t\t}\r\n\t\t\r\n\t\tbigInt *= Math.pow(2, 8);\r\n\t}\r\n\t\r\n\treturn (new ArrayBuffer(0));\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS, ParameterNamingConventionJS\r\n/**\r\n * Compare two array buffers\r\n * @param {!ArrayBuffer} inputBuffer1\r\n * @param {!ArrayBuffer} inputBuffer2\r\n * @returns {boolean}\r\n */\r\nexport function isEqualBuffer(inputBuffer1, inputBuffer2)\r\n{\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(inputBuffer1.byteLength !== inputBuffer2.byteLength)\r\n\t\treturn false;\r\n\t\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tconst view1 = new Uint8Array(inputBuffer1);\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tconst view2 = new Uint8Array(inputBuffer2);\r\n\t\r\n\tfor(let i = 0; i < view1.length; i++)\r\n\t{\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(view1[i] !== view2[i])\r\n\t\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Pad input number with leade \"0\" if needed\r\n * @returns {string}\r\n * @param {number} inputNumber\r\n * @param {number} fullLength\r\n */\r\nexport function padNumber(inputNumber, fullLength)\r\n{\r\n\tconst str = inputNumber.toString(10);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(fullLength < str.length)\r\n\t\treturn \"\";\r\n\t\r\n\tconst dif = fullLength - str.length;\r\n\t\r\n\tconst padding = new Array(dif);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < dif; i++)\r\n\t\tpadding[i] = \"0\";\r\n\t\r\n\tconst paddingString = padding.join(\"\");\r\n\t\r\n\treturn paddingString.concat(str);\r\n}\r\n//**************************************************************************************\r\nconst base64Template = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\nconst base64UrlTemplate = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, OverlyComplexFunctionJS, FunctionTooLongJS, FunctionNamingConventionJS\r\n/**\r\n * Encode string into BASE64 (or \"base64url\")\r\n * @param {string} input\r\n * @param {boolean} useUrlTemplate If \"true\" then output would be encoded using \"base64url\"\r\n * @param {boolean} skipPadding Skip BASE-64 padding or not\r\n * @param {boolean} skipLeadingZeros Skip leading zeros in input data or not\r\n * @returns {string}\r\n */\r\nexport function toBase64(input, useUrlTemplate = false, skipPadding = false, skipLeadingZeros = false)\r\n{\r\n\tlet i = 0;\r\n\t\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tlet flag1 = 0;\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tlet flag2 = 0;\r\n\t\r\n\tlet output = \"\";\r\n\t\r\n\t// noinspection ConditionalExpressionJS\r\n\tconst template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n\t\r\n\tif(skipLeadingZeros)\r\n\t{\r\n\t\tlet nonZeroPosition = 0;\r\n\t\t\r\n\t\tfor(let i = 0; i < input.length; i++)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(input.charCodeAt(i) !== 0)\r\n\t\t\t{\r\n\t\t\t\tnonZeroPosition = i;\r\n\t\t\t\t// noinspection BreakStatementJS\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection AssignmentToFunctionParameterJS\r\n\t\tinput = input.slice(nonZeroPosition);\r\n\t}\r\n\t\r\n\twhile(i < input.length)\r\n\t{\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr1 = input.charCodeAt(i++);\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(i >= input.length)\r\n\t\t\tflag1 = 1;\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr2 = input.charCodeAt(i++);\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(i >= input.length)\r\n\t\t\tflag2 = 1;\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr3 = input.charCodeAt(i++);\r\n\t\t\r\n\t\t// noinspection LocalVariableNamingConventionJS\r\n\t\tconst enc1 = chr1 >> 2;\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst enc2 = ((chr1 & 0x03) << 4) | (chr2 >> 4);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tlet enc3 = ((chr2 & 0x0F) << 2) | (chr3 >> 6);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tlet enc4 = chr3 & 0x3F;\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\tif(flag1 === 1)\r\n\t\t{\r\n\t\t\t// noinspection NestedAssignmentJS, AssignmentResultUsedJS, MagicNumberJS\r\n\t\t\tenc3 = enc4 = 64;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(flag2 === 1)\r\n\t\t\t{\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tenc4 = 64;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(skipPadding)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\t\tif(enc3 === 64)\r\n\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}`;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\t\t\tif(enc4 === 64)\r\n\t\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}`;\r\n\t\t\t\telse\r\n\t\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMoreThanThreeNegationsJS, FunctionWithMultipleLoopsJS, OverlyComplexFunctionJS, FunctionNamingConventionJS\r\n/**\r\n * Decode string from BASE64 (or \"base64url\")\r\n * @param {string} input\r\n * @param {boolean} [useUrlTemplate=false] If \"true\" then output would be encoded using \"base64url\"\r\n * @param {boolean} [cutTailZeros=false] If \"true\" then cut tailing zeroz from function result\r\n * @returns {string}\r\n */\r\nexport function fromBase64(input, useUrlTemplate = false, cutTailZeros = false)\r\n{\r\n\t// noinspection ConditionalExpressionJS\r\n\tconst template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n\t\r\n\t//region Aux functions\r\n\t// noinspection FunctionWithMultipleReturnPointsJS, NestedFunctionJS\r\n\tfunction indexof(toSearch)\r\n\t{\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, MagicNumberJS\r\n\t\tfor(let i = 0; i < 64; i++)\r\n\t\t{\r\n\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\tif(template.charAt(i) === toSearch)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection MagicNumberJS\r\n\t\treturn 64;\r\n\t}\r\n\t\r\n\t// noinspection NestedFunctionJS\r\n\tfunction test(incoming)\r\n\t{\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, ConditionalExpressionJS, MagicNumberJS\r\n\t\treturn ((incoming === 64) ? 0x00 : incoming);\r\n\t}\r\n\t//endregion\r\n\t\r\n\tlet i = 0;\r\n\t\r\n\tlet output = \"\";\r\n\t\r\n\twhile(i < input.length)\r\n\t{\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc1 = indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc2 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc3 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc4 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t\r\n\t\t// noinspection LocalVariableNamingConventionJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr1 = (test(enc1) << 2) | (test(enc2) >> 4);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr2 = ((test(enc2) & 0x0F) << 4) | (test(enc3) >> 2);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr3 = ((test(enc3) & 0x03) << 6) | test(enc4);\r\n\t\t\r\n\t\toutput += String.fromCharCode(chr1);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\tif(enc3 !== 64)\r\n\t\t\toutput += String.fromCharCode(chr2);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\tif(enc4 !== 64)\r\n\t\t\toutput += String.fromCharCode(chr3);\r\n\t}\r\n\t\r\n\tif(cutTailZeros)\r\n\t{\r\n\t\tconst outputLength = output.length;\r\n\t\tlet nonZeroStart = (-1);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\tfor(let i = (outputLength - 1); i >= 0; i--)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(output.charCodeAt(i) !== 0)\r\n\t\t\t{\r\n\t\t\t\tnonZeroStart = i;\r\n\t\t\t\t// noinspection BreakStatementJS\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS, NegatedIfStatementJS\r\n\t\tif(nonZeroStart !== (-1))\r\n\t\t\toutput = output.slice(0, nonZeroStart + 1);\r\n\t\telse\r\n\t\t\toutput = \"\";\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n//**************************************************************************************\r\nexport function arrayBufferToString(buffer)\r\n{\r\n\tlet resultString = \"\";\r\n\tconst view = new Uint8Array(buffer);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const element of view)\r\n\t\tresultString += String.fromCharCode(element);\r\n\t\r\n\treturn resultString;\r\n}\r\n//**************************************************************************************\r\nexport function stringToArrayBuffer(str)\r\n{\r\n\tconst stringLength = str.length;\r\n\t\r\n\tconst resultBuffer = new ArrayBuffer(stringLength);\r\n\tconst resultView = new Uint8Array(resultBuffer);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < stringLength; i++)\r\n\t\tresultView[i] = str.charCodeAt(i);\r\n\t\r\n\treturn resultBuffer;\r\n}\r\n//**************************************************************************************\r\nconst log2 = Math.log(2);\r\n//**************************************************************************************\r\n// noinspection FunctionNamingConventionJS\r\n/**\r\n * Get nearest to input length power of 2\r\n * @param {number} length Current length of existing array\r\n * @returns {number}\r\n */\r\nexport function nearestPowerOf2(length)\r\n{\r\n\tconst base = (Math.log(length) / log2);\r\n\t\r\n\tconst floor = Math.floor(base);\r\n\tconst round = Math.round(base);\r\n\t\r\n\t// noinspection ConditionalExpressionJS\r\n\treturn ((floor === round) ? floor : round);\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Delete properties by name from specified object\r\n * @param {Object} object Object to delete properties from\r\n * @param {Array.<string>} propsArray Array of properties names\r\n */\r\nexport function clearProps(object, propsArray)\r\n{\r\n\tfor(const prop of propsArray)\r\n\t\tdelete object[prop];\r\n}\r\n//**************************************************************************************\r\n","var bigInt = (function (undefined) {\r\n    \"use strict\";\r\n\r\n    var BASE = 1e7,\r\n        LOG_BASE = 7,\r\n        MAX_INT = 9007199254740992,\r\n        MAX_INT_ARR = smallToArray(MAX_INT),\r\n        DEFAULT_ALPHABET = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\n\r\n    var supportsNativeBigInt = typeof BigInt === \"function\";\r\n\r\n    function Integer(v, radix, alphabet, caseSensitive) {\r\n        if (typeof v === \"undefined\") return Integer[0];\r\n        if (typeof radix !== \"undefined\") return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\r\n        return parseValue(v);\r\n    }\r\n\r\n    function BigInteger(value, sign) {\r\n        this.value = value;\r\n        this.sign = sign;\r\n        this.isSmall = false;\r\n    }\r\n    BigInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function SmallInteger(value) {\r\n        this.value = value;\r\n        this.sign = value < 0;\r\n        this.isSmall = true;\r\n    }\r\n    SmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function NativeBigInt(value) {\r\n        this.value = value;\r\n    }\r\n    NativeBigInt.prototype = Object.create(Integer.prototype);\r\n\r\n    function isPrecise(n) {\r\n        return -MAX_INT < n && n < MAX_INT;\r\n    }\r\n\r\n    function smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes\r\n        if (n < 1e7)\r\n            return [n];\r\n        if (n < 1e14)\r\n            return [n % 1e7, Math.floor(n / 1e7)];\r\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];\r\n    }\r\n\r\n    function arrayToSmall(arr) { // If BASE changes this function may need to change\r\n        trim(arr);\r\n        var length = arr.length;\r\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n            switch (length) {\r\n                case 0: return 0;\r\n                case 1: return arr[0];\r\n                case 2: return arr[0] + arr[1] * BASE;\r\n                default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function trim(v) {\r\n        var i = v.length;\r\n        while (v[--i] === 0);\r\n        v.length = i + 1;\r\n    }\r\n\r\n    function createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger\r\n        var x = new Array(length);\r\n        var i = -1;\r\n        while (++i < length) {\r\n            x[i] = 0;\r\n        }\r\n        return x;\r\n    }\r\n\r\n    function truncate(n) {\r\n        if (n > 0) return Math.floor(n);\r\n        return Math.ceil(n);\r\n    }\r\n\r\n    function add(a, b) { // assumes a and b are arrays with a.length >= b.length\r\n        var l_a = a.length,\r\n            l_b = b.length,\r\n            r = new Array(l_a),\r\n            carry = 0,\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l_b; i++) {\r\n            sum = a[i] + b[i] + carry;\r\n            carry = sum >= base ? 1 : 0;\r\n            r[i] = sum - carry * base;\r\n        }\r\n        while (i < l_a) {\r\n            sum = a[i] + carry;\r\n            carry = sum === base ? 1 : 0;\r\n            r[i++] = sum - carry * base;\r\n        }\r\n        if (carry > 0) r.push(carry);\r\n        return r;\r\n    }\r\n\r\n    function addAny(a, b) {\r\n        if (a.length >= b.length) return add(a, b);\r\n        return add(b, a);\r\n    }\r\n\r\n    function addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l; i++) {\r\n            sum = a[i] - base + carry;\r\n            carry = Math.floor(sum / base);\r\n            r[i] = sum - carry * base;\r\n            carry += 1;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign);\r\n        }\r\n        return new BigInteger(addAny(a, b), this.sign);\r\n    };\r\n    BigInteger.prototype.plus = BigInteger.prototype.add;\r\n\r\n    SmallInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n            b = smallToArray(Math.abs(b));\r\n        }\r\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0);\r\n    };\r\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n\r\n    NativeBigInt.prototype.add = function (v) {\r\n        return new NativeBigInt(this.value + parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\r\n\r\n    function subtract(a, b) { // assumes a and b are arrays with a >= b\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            r = new Array(a_l),\r\n            borrow = 0,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < b_l; i++) {\r\n            difference = a[i] - borrow - b[i];\r\n            if (difference < 0) {\r\n                difference += base;\r\n                borrow = 1;\r\n            } else borrow = 0;\r\n            r[i] = difference;\r\n        }\r\n        for (i = b_l; i < a_l; i++) {\r\n            difference = a[i] - borrow;\r\n            if (difference < 0) difference += base;\r\n            else {\r\n                r[i++] = difference;\r\n                break;\r\n            }\r\n            r[i] = difference;\r\n        }\r\n        for (; i < a_l; i++) {\r\n            r[i] = a[i];\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function subtractAny(a, b, sign) {\r\n        var value;\r\n        if (compareAbs(a, b) >= 0) {\r\n            value = subtract(a, b);\r\n        } else {\r\n            value = subtract(b, a);\r\n            sign = !sign;\r\n        }\r\n        value = arrayToSmall(value);\r\n        if (typeof value === \"number\") {\r\n            if (sign) value = -value;\r\n            return new SmallInteger(value);\r\n        }\r\n        return new BigInteger(value, sign);\r\n    }\r\n\r\n    function subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            carry = -b,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < l; i++) {\r\n            difference = a[i] + carry;\r\n            carry = Math.floor(difference / base);\r\n            difference %= base;\r\n            r[i] = difference < 0 ? difference + base : difference;\r\n        }\r\n        r = arrayToSmall(r);\r\n        if (typeof r === \"number\") {\r\n            if (sign) r = -r;\r\n            return new SmallInteger(r);\r\n        } return new BigInteger(r, sign);\r\n    }\r\n\r\n    BigInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall)\r\n            return subtractSmall(a, Math.abs(b), this.sign);\r\n        return subtractAny(a, b, this.sign);\r\n    };\r\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n\r\n    SmallInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            return new SmallInteger(a - b);\r\n        }\r\n        return subtractSmall(b, Math.abs(a), a >= 0);\r\n    };\r\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n\r\n    NativeBigInt.prototype.subtract = function (v) {\r\n        return new NativeBigInt(this.value - parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\r\n\r\n    BigInteger.prototype.negate = function () {\r\n        return new BigInteger(this.value, !this.sign);\r\n    };\r\n    SmallInteger.prototype.negate = function () {\r\n        var sign = this.sign;\r\n        var small = new SmallInteger(-this.value);\r\n        small.sign = !sign;\r\n        return small;\r\n    };\r\n    NativeBigInt.prototype.negate = function () {\r\n        return new NativeBigInt(-this.value);\r\n    }\r\n\r\n    BigInteger.prototype.abs = function () {\r\n        return new BigInteger(this.value, false);\r\n    };\r\n    SmallInteger.prototype.abs = function () {\r\n        return new SmallInteger(Math.abs(this.value));\r\n    };\r\n    NativeBigInt.prototype.abs = function () {\r\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value);\r\n    }\r\n\r\n\r\n    function multiplyLong(a, b) {\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            l = a_l + b_l,\r\n            r = createArray(l),\r\n            base = BASE,\r\n            product, carry, i, a_i, b_j;\r\n        for (i = 0; i < a_l; ++i) {\r\n            a_i = a[i];\r\n            for (var j = 0; j < b_l; ++j) {\r\n                b_j = b[j];\r\n                product = a_i * b_j + r[i + j];\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n                r[i + j + 1] += carry;\r\n            }\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            carry = 0,\r\n            product, i;\r\n        for (i = 0; i < l; i++) {\r\n            product = a[i] * b + carry;\r\n            carry = Math.floor(product / base);\r\n            r[i] = product - carry * base;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    function shiftLeft(x, n) {\r\n        var r = [];\r\n        while (n-- > 0) r.push(0);\r\n        return r.concat(x);\r\n    }\r\n\r\n    function multiplyKaratsuba(x, y) {\r\n        var n = Math.max(x.length, y.length);\r\n\r\n        if (n <= 30) return multiplyLong(x, y);\r\n        n = Math.ceil(n / 2);\r\n\r\n        var b = x.slice(n),\r\n            a = x.slice(0, n),\r\n            d = y.slice(n),\r\n            c = y.slice(0, n);\r\n\r\n        var ac = multiplyKaratsuba(a, c),\r\n            bd = multiplyKaratsuba(b, d),\r\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n\r\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n        trim(product);\r\n        return product;\r\n    }\r\n\r\n    // The following function is derived from a surface fit of a graph plotting the performance difference\r\n    // between long multiplication and karatsuba multiplication versus the lengths of the two arrays.\r\n    function useKaratsuba(l1, l2) {\r\n        return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;\r\n    }\r\n\r\n    BigInteger.prototype.multiply = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value, b = n.value,\r\n            sign = this.sign !== n.sign,\r\n            abs;\r\n        if (n.isSmall) {\r\n            if (b === 0) return Integer[0];\r\n            if (b === 1) return this;\r\n            if (b === -1) return this.negate();\r\n            abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                return new BigInteger(multiplySmall(a, abs), sign);\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes\r\n            return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n        return new BigInteger(multiplyLong(a, b), sign);\r\n    };\r\n\r\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\n    function multiplySmallAndArray(a, b, sign) { // a >= 0\r\n        if (a < BASE) {\r\n            return new BigInteger(multiplySmall(b, a), sign);\r\n        }\r\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign);\r\n    }\r\n    SmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value);\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);\r\n    };\r\n    BigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);\r\n    };\r\n    SmallInteger.prototype.multiply = function (v) {\r\n        return parseValue(v)._multiplyBySmall(this);\r\n    };\r\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n\r\n    NativeBigInt.prototype.multiply = function (v) {\r\n        return new NativeBigInt(this.value * parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\r\n\r\n    function square(a) {\r\n        //console.assert(2 * BASE * BASE < MAX_INT);\r\n        var l = a.length,\r\n            r = createArray(l + l),\r\n            base = BASE,\r\n            product, carry, i, a_i, a_j;\r\n        for (i = 0; i < l; i++) {\r\n            a_i = a[i];\r\n            carry = 0 - a_i * a_i;\r\n            for (var j = i; j < l; j++) {\r\n                a_j = a[j];\r\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n            }\r\n            r[i + l] = carry;\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.square = function () {\r\n        return new BigInteger(square(this.value), false);\r\n    };\r\n\r\n    SmallInteger.prototype.square = function () {\r\n        var value = this.value * this.value;\r\n        if (isPrecise(value)) return new SmallInteger(value);\r\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false);\r\n    };\r\n\r\n    NativeBigInt.prototype.square = function (v) {\r\n        return new NativeBigInt(this.value * this.value);\r\n    }\r\n\r\n    function divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            base = BASE,\r\n            result = createArray(b.length),\r\n            divisorMostSignificantDigit = b[b_l - 1],\r\n            // normalization\r\n            lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n            remainder = multiplySmall(a, lambda),\r\n            divisor = multiplySmall(b, lambda),\r\n            quotientDigit, shift, carry, borrow, i, l, q;\r\n        if (remainder.length <= a_l) remainder.push(0);\r\n        divisor.push(0);\r\n        divisorMostSignificantDigit = divisor[b_l - 1];\r\n        for (shift = a_l - b_l; shift >= 0; shift--) {\r\n            quotientDigit = base - 1;\r\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);\r\n            }\r\n            // quotientDigit <= base - 1\r\n            carry = 0;\r\n            borrow = 0;\r\n            l = divisor.length;\r\n            for (i = 0; i < l; i++) {\r\n                carry += quotientDigit * divisor[i];\r\n                q = Math.floor(carry / base);\r\n                borrow += remainder[shift + i] - (carry - q * base);\r\n                carry = q;\r\n                if (borrow < 0) {\r\n                    remainder[shift + i] = borrow + base;\r\n                    borrow = -1;\r\n                } else {\r\n                    remainder[shift + i] = borrow;\r\n                    borrow = 0;\r\n                }\r\n            }\r\n            while (borrow !== 0) {\r\n                quotientDigit -= 1;\r\n                carry = 0;\r\n                for (i = 0; i < l; i++) {\r\n                    carry += remainder[shift + i] - base + divisor[i];\r\n                    if (carry < 0) {\r\n                        remainder[shift + i] = carry + base;\r\n                        carry = 0;\r\n                    } else {\r\n                        remainder[shift + i] = carry;\r\n                        carry = 1;\r\n                    }\r\n                }\r\n                borrow += carry;\r\n            }\r\n            result[shift] = quotientDigit;\r\n        }\r\n        // denormalization\r\n        remainder = divModSmall(remainder, lambda)[0];\r\n        return [arrayToSmall(result), arrayToSmall(remainder)];\r\n    }\r\n\r\n    function divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/\r\n        // Performs faster than divMod1 on larger input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            result = [],\r\n            part = [],\r\n            base = BASE,\r\n            guess, xlen, highx, highy, check;\r\n        while (a_l) {\r\n            part.unshift(a[--a_l]);\r\n            trim(part);\r\n            if (compareAbs(part, b) < 0) {\r\n                result.push(0);\r\n                continue;\r\n            }\r\n            xlen = part.length;\r\n            highx = part[xlen - 1] * base + part[xlen - 2];\r\n            highy = b[b_l - 1] * base + b[b_l - 2];\r\n            if (xlen > b_l) {\r\n                highx = (highx + 1) * base;\r\n            }\r\n            guess = Math.ceil(highx / highy);\r\n            do {\r\n                check = multiplySmall(b, guess);\r\n                if (compareAbs(check, part) <= 0) break;\r\n                guess--;\r\n            } while (guess);\r\n            result.push(guess);\r\n            part = subtract(part, check);\r\n        }\r\n        result.reverse();\r\n        return [arrayToSmall(result), arrayToSmall(part)];\r\n    }\r\n\r\n    function divModSmall(value, lambda) {\r\n        var length = value.length,\r\n            quotient = createArray(length),\r\n            base = BASE,\r\n            i, q, remainder, divisor;\r\n        remainder = 0;\r\n        for (i = length - 1; i >= 0; --i) {\r\n            divisor = remainder * base + value[i];\r\n            q = truncate(divisor / lambda);\r\n            remainder = divisor - q * lambda;\r\n            quotient[i] = q | 0;\r\n        }\r\n        return [quotient, remainder | 0];\r\n    }\r\n\r\n    function divModAny(self, v) {\r\n        var value, n = parseValue(v);\r\n        if (supportsNativeBigInt) {\r\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)];\r\n        }\r\n        var a = self.value, b = n.value;\r\n        var quotient;\r\n        if (b === 0) throw new Error(\"Cannot divide by zero\");\r\n        if (self.isSmall) {\r\n            if (n.isSmall) {\r\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];\r\n            }\r\n            return [Integer[0], self];\r\n        }\r\n        if (n.isSmall) {\r\n            if (b === 1) return [self, Integer[0]];\r\n            if (b == -1) return [self.negate(), Integer[0]];\r\n            var abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                value = divModSmall(a, abs);\r\n                quotient = arrayToSmall(value[0]);\r\n                var remainder = value[1];\r\n                if (self.sign) remainder = -remainder;\r\n                if (typeof quotient === \"number\") {\r\n                    if (self.sign !== n.sign) quotient = -quotient;\r\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)];\r\n                }\r\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        var comparison = compareAbs(a, b);\r\n        if (comparison === -1) return [Integer[0], self];\r\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n\r\n        // divMod1 is faster on smaller input sizes\r\n        if (a.length + b.length <= 200)\r\n            value = divMod1(a, b);\r\n        else value = divMod2(a, b);\r\n\r\n        quotient = value[0];\r\n        var qSign = self.sign !== n.sign,\r\n            mod = value[1],\r\n            mSign = self.sign;\r\n        if (typeof quotient === \"number\") {\r\n            if (qSign) quotient = -quotient;\r\n            quotient = new SmallInteger(quotient);\r\n        } else quotient = new BigInteger(quotient, qSign);\r\n        if (typeof mod === \"number\") {\r\n            if (mSign) mod = -mod;\r\n            mod = new SmallInteger(mod);\r\n        } else mod = new BigInteger(mod, mSign);\r\n        return [quotient, mod];\r\n    }\r\n\r\n    BigInteger.prototype.divmod = function (v) {\r\n        var result = divModAny(this, v);\r\n        return {\r\n            quotient: result[0],\r\n            remainder: result[1]\r\n        };\r\n    };\r\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n\r\n\r\n    BigInteger.prototype.divide = function (v) {\r\n        return divModAny(this, v)[0];\r\n    };\r\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\r\n        return new NativeBigInt(this.value / parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n\r\n    BigInteger.prototype.mod = function (v) {\r\n        return divModAny(this, v)[1];\r\n    };\r\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\r\n        return new NativeBigInt(this.value % parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n\r\n    BigInteger.prototype.pow = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value,\r\n            value, x, y;\r\n        if (b === 0) return Integer[1];\r\n        if (a === 0) return Integer[0];\r\n        if (a === 1) return Integer[1];\r\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.sign) {\r\n            return Integer[0];\r\n        }\r\n        if (!n.isSmall) throw new Error(\"The exponent \" + n.toString() + \" is too large.\");\r\n        if (this.isSmall) {\r\n            if (isPrecise(value = Math.pow(a, b)))\r\n                return new SmallInteger(truncate(value));\r\n        }\r\n        x = this;\r\n        y = Integer[1];\r\n        while (true) {\r\n            if (b & 1 === 1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === 0) break;\r\n            b /= 2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    };\r\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n\r\n    NativeBigInt.prototype.pow = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value, b = n.value;\r\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\r\n        if (b === _0) return Integer[1];\r\n        if (a === _0) return Integer[0];\r\n        if (a === _1) return Integer[1];\r\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.isNegative()) return new NativeBigInt(_0);\r\n        var x = this;\r\n        var y = Integer[1];\r\n        while (true) {\r\n            if ((b & _1) === _1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === _0) break;\r\n            b /= _2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    }\r\n\r\n    BigInteger.prototype.modPow = function (exp, mod) {\r\n        exp = parseValue(exp);\r\n        mod = parseValue(mod);\r\n        if (mod.isZero()) throw new Error(\"Cannot take modPow with modulus 0\");\r\n        var r = Integer[1],\r\n            base = this.mod(mod);\r\n        if (exp.isNegative()) {\r\n            exp = exp.multiply(Integer[-1]);\r\n            base = base.modInv(mod);\r\n        }\r\n        while (exp.isPositive()) {\r\n            if (base.isZero()) return Integer[0];\r\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n            exp = exp.divide(2);\r\n            base = base.square().mod(mod);\r\n        }\r\n        return r;\r\n    };\r\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\n    function compareAbs(a, b) {\r\n        if (a.length !== b.length) {\r\n            return a.length > b.length ? 1 : -1;\r\n        }\r\n        for (var i = a.length - 1; i >= 0; i--) {\r\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    BigInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) return 1;\r\n        return compareAbs(a, b);\r\n    };\r\n    SmallInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = Math.abs(this.value),\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            b = Math.abs(b);\r\n            return a === b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        return -1;\r\n    };\r\n    NativeBigInt.prototype.compareAbs = function (v) {\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        a = a >= 0 ? a : -a;\r\n        b = b >= 0 ? b : -b;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n\r\n    BigInteger.prototype.compare = function (v) {\r\n        // See discussion about comparison with Infinity:\r\n        // https://github.com/peterolson/BigInteger.js/issues/61\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (this.sign !== n.sign) {\r\n            return n.sign ? 1 : -1;\r\n        }\r\n        if (n.isSmall) {\r\n            return this.sign ? -1 : 1;\r\n        }\r\n        return compareAbs(a, b) * (this.sign ? -1 : 1);\r\n    };\r\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n\r\n    SmallInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            return a == b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        if (a < 0 !== n.sign) {\r\n            return a < 0 ? -1 : 1;\r\n        }\r\n        return a < 0 ? 1 : -1;\r\n    };\r\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n\r\n    NativeBigInt.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\r\n\r\n    BigInteger.prototype.equals = function (v) {\r\n        return this.compare(v) === 0;\r\n    };\r\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n\r\n    BigInteger.prototype.notEquals = function (v) {\r\n        return this.compare(v) !== 0;\r\n    };\r\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n\r\n    BigInteger.prototype.greater = function (v) {\r\n        return this.compare(v) > 0;\r\n    };\r\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n\r\n    BigInteger.prototype.lesser = function (v) {\r\n        return this.compare(v) < 0;\r\n    };\r\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n\r\n    BigInteger.prototype.greaterOrEquals = function (v) {\r\n        return this.compare(v) >= 0;\r\n    };\r\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n\r\n    BigInteger.prototype.lesserOrEquals = function (v) {\r\n        return this.compare(v) <= 0;\r\n    };\r\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n\r\n    BigInteger.prototype.isEven = function () {\r\n        return (this.value[0] & 1) === 0;\r\n    };\r\n    SmallInteger.prototype.isEven = function () {\r\n        return (this.value & 1) === 0;\r\n    };\r\n    NativeBigInt.prototype.isEven = function () {\r\n        return (this.value & BigInt(1)) === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isOdd = function () {\r\n        return (this.value[0] & 1) === 1;\r\n    };\r\n    SmallInteger.prototype.isOdd = function () {\r\n        return (this.value & 1) === 1;\r\n    };\r\n    NativeBigInt.prototype.isOdd = function () {\r\n        return (this.value & BigInt(1)) === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isPositive = function () {\r\n        return !this.sign;\r\n    };\r\n    SmallInteger.prototype.isPositive = function () {\r\n        return this.value > 0;\r\n    };\r\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\r\n\r\n    BigInteger.prototype.isNegative = function () {\r\n        return this.sign;\r\n    };\r\n    SmallInteger.prototype.isNegative = function () {\r\n        return this.value < 0;\r\n    };\r\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\r\n\r\n    BigInteger.prototype.isUnit = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isUnit = function () {\r\n        return Math.abs(this.value) === 1;\r\n    };\r\n    NativeBigInt.prototype.isUnit = function () {\r\n        return this.abs().value === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isZero = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isZero = function () {\r\n        return this.value === 0;\r\n    };\r\n    NativeBigInt.prototype.isZero = function () {\r\n        return this.value === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isDivisibleBy = function (v) {\r\n        var n = parseValue(v);\r\n        if (n.isZero()) return false;\r\n        if (n.isUnit()) return true;\r\n        if (n.compareAbs(2) === 0) return this.isEven();\r\n        return this.mod(n).isZero();\r\n    };\r\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\n    function isBasicPrime(v) {\r\n        var n = v.abs();\r\n        if (n.isUnit()) return false;\r\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n        if (n.lesser(49)) return true;\r\n        // we don't know if it's prime: let the other functions figure it out\r\n    }\r\n\r\n    function millerRabinTest(n, a) {\r\n        var nPrev = n.prev(),\r\n            b = nPrev,\r\n            r = 0,\r\n            d, t, i, x;\r\n        while (b.isEven()) b = b.divide(2), r++;\r\n        next: for (i = 0; i < a.length; i++) {\r\n            if (n.lesser(a[i])) continue;\r\n            x = bigInt(a[i]).modPow(b, n);\r\n            if (x.isUnit() || x.equals(nPrev)) continue;\r\n            for (d = r - 1; d != 0; d--) {\r\n                x = x.square().mod(n);\r\n                if (x.isUnit()) return false;\r\n                if (x.equals(nPrev)) continue next;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Set \"strict\" to true to force GRH-supported lower bound of 2*log(N)^2\r\n    BigInteger.prototype.isPrime = function (strict) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var bits = n.bitLength();\r\n        if (bits <= 64)\r\n            return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\r\n        var logN = Math.log(2) * bits.toJSNumber();\r\n        var t = Math.ceil((strict === true) ? (2 * Math.pow(logN, 2)) : logN);\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt(i + 2));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n\r\n    BigInteger.prototype.isProbablePrime = function (iterations, rng) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var t = iterations === undefined ? 5 : iterations;\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt.randBetween(2, n.minus(2), rng));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n\r\n    BigInteger.prototype.modInv = function (n) {\r\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n        while (!newR.isZero()) {\r\n            q = r.divide(newR);\r\n            lastT = t;\r\n            lastR = r;\r\n            t = newT;\r\n            r = newR;\r\n            newT = lastT.subtract(q.multiply(newT));\r\n            newR = lastR.subtract(q.multiply(newR));\r\n        }\r\n        if (!r.isUnit()) throw new Error(this.toString() + \" and \" + n.toString() + \" are not co-prime\");\r\n        if (t.compare(0) === -1) {\r\n            t = t.add(n);\r\n        }\r\n        if (this.isNegative()) {\r\n            return t.negate();\r\n        }\r\n        return t;\r\n    };\r\n\r\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n\r\n    BigInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return subtractSmall(value, 1, this.sign);\r\n        }\r\n        return new BigInteger(addSmall(value, 1), this.sign);\r\n    };\r\n    SmallInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n        return new BigInteger(MAX_INT_ARR, false);\r\n    };\r\n    NativeBigInt.prototype.next = function () {\r\n        return new NativeBigInt(this.value + BigInt(1));\r\n    }\r\n\r\n    BigInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return new BigInteger(addSmall(value, 1), true);\r\n        }\r\n        return subtractSmall(value, 1, this.sign);\r\n    };\r\n    SmallInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n        return new BigInteger(MAX_INT_ARR, true);\r\n    };\r\n    NativeBigInt.prototype.prev = function () {\r\n        return new NativeBigInt(this.value - BigInt(1));\r\n    }\r\n\r\n    var powersOfTwo = [1];\r\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\n    function shift_isSmall(n) {\r\n        return Math.abs(n) <= BASE;\r\n    }\r\n\r\n    BigInteger.prototype.shiftLeft = function (v) {\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftRight(-n);\r\n        var result = this;\r\n        if (result.isZero()) return result;\r\n        while (n >= powers2Length) {\r\n            result = result.multiply(highestPower2);\r\n            n -= powers2Length - 1;\r\n        }\r\n        return result.multiply(powersOfTwo[n]);\r\n    };\r\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n\r\n    BigInteger.prototype.shiftRight = function (v) {\r\n        var remQuo;\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftLeft(-n);\r\n        var result = this;\r\n        while (n >= powers2Length) {\r\n            if (result.isZero() || (result.isNegative() && result.isUnit())) return result;\r\n            remQuo = divModAny(result, highestPower2);\r\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n            n -= powers2Length - 1;\r\n        }\r\n        remQuo = divModAny(result, powersOfTwo[n]);\r\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n    };\r\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\n    function bitwise(x, y, fn) {\r\n        y = parseValue(y);\r\n        var xSign = x.isNegative(), ySign = y.isNegative();\r\n        var xRem = xSign ? x.not() : x,\r\n            yRem = ySign ? y.not() : y;\r\n        var xDigit = 0, yDigit = 0;\r\n        var xDivMod = null, yDivMod = null;\r\n        var result = [];\r\n        while (!xRem.isZero() || !yRem.isZero()) {\r\n            xDivMod = divModAny(xRem, highestPower2);\r\n            xDigit = xDivMod[1].toJSNumber();\r\n            if (xSign) {\r\n                xDigit = highestPower2 - 1 - xDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            yDivMod = divModAny(yRem, highestPower2);\r\n            yDigit = yDivMod[1].toJSNumber();\r\n            if (ySign) {\r\n                yDigit = highestPower2 - 1 - yDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            xRem = xDivMod[0];\r\n            yRem = yDivMod[0];\r\n            result.push(fn(xDigit, yDigit));\r\n        }\r\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\r\n        for (var i = result.length - 1; i >= 0; i -= 1) {\r\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]));\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    BigInteger.prototype.not = function () {\r\n        return this.negate().prev();\r\n    };\r\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\r\n\r\n    BigInteger.prototype.and = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a & b; });\r\n    };\r\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\r\n\r\n    BigInteger.prototype.or = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a | b; });\r\n    };\r\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\r\n\r\n    BigInteger.prototype.xor = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a ^ b; });\r\n    };\r\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n\r\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\n    function roughLOB(n) { // get lowestOneBit (rough)\r\n        // SmallInteger: return Min(lowestOneBit(n), 1 << 30)\r\n        // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]\r\n        var v = n.value,\r\n            x = typeof v === \"number\" ? v | LOBMASK_I :\r\n                typeof v === \"bigint\" ? v | BigInt(LOBMASK_I) :\r\n                    v[0] + v[1] * BASE | LOBMASK_BI;\r\n        return x & -x;\r\n    }\r\n\r\n    function integerLogarithm(value, base) {\r\n        if (base.compareTo(value) <= 0) {\r\n            var tmp = integerLogarithm(value, base.square(base));\r\n            var p = tmp.p;\r\n            var e = tmp.e;\r\n            var t = p.multiply(base);\r\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 };\r\n        }\r\n        return { p: bigInt(1), e: 0 };\r\n    }\r\n\r\n    BigInteger.prototype.bitLength = function () {\r\n        var n = this;\r\n        if (n.compareTo(bigInt(0)) < 0) {\r\n            n = n.negate().subtract(bigInt(1));\r\n        }\r\n        if (n.compareTo(bigInt(0)) === 0) {\r\n            return bigInt(0);\r\n        }\r\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1));\r\n    }\r\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\r\n\r\n    function max(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.greater(b) ? a : b;\r\n    }\r\n    function min(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.lesser(b) ? a : b;\r\n    }\r\n    function gcd(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        if (a.equals(b)) return a;\r\n        if (a.isZero()) return b;\r\n        if (b.isZero()) return a;\r\n        var c = Integer[1], d, t;\r\n        while (a.isEven() && b.isEven()) {\r\n            d = min(roughLOB(a), roughLOB(b));\r\n            a = a.divide(d);\r\n            b = b.divide(d);\r\n            c = c.multiply(d);\r\n        }\r\n        while (a.isEven()) {\r\n            a = a.divide(roughLOB(a));\r\n        }\r\n        do {\r\n            while (b.isEven()) {\r\n                b = b.divide(roughLOB(b));\r\n            }\r\n            if (a.greater(b)) {\r\n                t = b; b = a; a = t;\r\n            }\r\n            b = b.subtract(a);\r\n        } while (!b.isZero());\r\n        return c.isUnit() ? a : a.multiply(c);\r\n    }\r\n    function lcm(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        return a.divide(gcd(a, b)).multiply(b);\r\n    }\r\n    function randBetween(a, b, rng) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        var usedRNG = rng || Math.random;\r\n        var low = min(a, b), high = max(a, b);\r\n        var range = high.subtract(low).add(1);\r\n        if (range.isSmall) return low.add(Math.floor(usedRNG() * range));\r\n        var digits = toBase(range, BASE).value;\r\n        var result = [], restricted = true;\r\n        for (var i = 0; i < digits.length; i++) {\r\n            var top = restricted ? digits[i] : BASE;\r\n            var digit = truncate(usedRNG() * top);\r\n            result.push(digit);\r\n            if (digit < top) restricted = false;\r\n        }\r\n        return low.add(Integer.fromArray(result, BASE, false));\r\n    }\r\n\r\n    var parseBase = function (text, base, alphabet, caseSensitive) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        text = String(text);\r\n        if (!caseSensitive) {\r\n            text = text.toLowerCase();\r\n            alphabet = alphabet.toLowerCase();\r\n        }\r\n        var length = text.length;\r\n        var i;\r\n        var absBase = Math.abs(base);\r\n        var alphabetValues = {};\r\n        for (i = 0; i < alphabet.length; i++) {\r\n            alphabetValues[alphabet[i]] = i;\r\n        }\r\n        for (i = 0; i < length; i++) {\r\n            var c = text[i];\r\n            if (c === \"-\") continue;\r\n            if (c in alphabetValues) {\r\n                if (alphabetValues[c] >= absBase) {\r\n                    if (c === \"1\" && absBase === 1) continue;\r\n                    throw new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n                }\r\n            }\r\n        }\r\n        base = parseValue(base);\r\n        var digits = [];\r\n        var isNegative = text[0] === \"-\";\r\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c]));\r\n            else if (c === \"<\") {\r\n                var start = i;\r\n                do { i++; } while (text[i] !== \">\" && i < text.length);\r\n                digits.push(parseValue(text.slice(start + 1, i)));\r\n            }\r\n            else throw new Error(c + \" is not a valid character\");\r\n        }\r\n        return parseBaseFromArray(digits, base, isNegative);\r\n    };\r\n\r\n    function parseBaseFromArray(digits, base, isNegative) {\r\n        var val = Integer[0], pow = Integer[1], i;\r\n        for (i = digits.length - 1; i >= 0; i--) {\r\n            val = val.add(digits[i].times(pow));\r\n            pow = pow.times(base);\r\n        }\r\n        return isNegative ? val.negate() : val;\r\n    }\r\n\r\n    function stringify(digit, alphabet) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        if (digit < alphabet.length) {\r\n            return alphabet[digit];\r\n        }\r\n        return \"<\" + digit + \">\";\r\n    }\r\n\r\n    function toBase(n, base) {\r\n        base = bigInt(base);\r\n        if (base.isZero()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            throw new Error(\"Cannot convert nonzero numbers to base 0.\");\r\n        }\r\n        if (base.equals(-1)) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            if (n.isNegative())\r\n                return {\r\n                    value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber()))\r\n                        .map(Array.prototype.valueOf, [1, 0])\r\n                    ),\r\n                    isNegative: false\r\n                };\r\n\r\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1))\r\n                .map(Array.prototype.valueOf, [0, 1]);\r\n            arr.unshift([1]);\r\n            return {\r\n                value: [].concat.apply([], arr),\r\n                isNegative: false\r\n            };\r\n        }\r\n\r\n        var neg = false;\r\n        if (n.isNegative() && base.isPositive()) {\r\n            neg = true;\r\n            n = n.abs();\r\n        }\r\n        if (base.isUnit()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n\r\n            return {\r\n                value: Array.apply(null, Array(n.toJSNumber()))\r\n                    .map(Number.prototype.valueOf, 1),\r\n                isNegative: neg\r\n            };\r\n        }\r\n        var out = [];\r\n        var left = n, divmod;\r\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n            divmod = left.divmod(base);\r\n            left = divmod.quotient;\r\n            var digit = divmod.remainder;\r\n            if (digit.isNegative()) {\r\n                digit = base.minus(digit).abs();\r\n                left = left.next();\r\n            }\r\n            out.push(digit.toJSNumber());\r\n        }\r\n        out.push(left.toJSNumber());\r\n        return { value: out.reverse(), isNegative: neg };\r\n    }\r\n\r\n    function toBaseString(n, base, alphabet) {\r\n        var arr = toBase(n, base);\r\n        return (arr.isNegative ? \"-\" : \"\") + arr.value.map(function (x) {\r\n            return stringify(x, alphabet);\r\n        }).join('');\r\n    }\r\n\r\n    BigInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    SmallInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    NativeBigInt.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    BigInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix !== 10) return toBaseString(this, radix, alphabet);\r\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = \"0000000\", digit;\r\n        while (--l >= 0) {\r\n            digit = String(v[l]);\r\n            str += zeros.slice(digit.length) + digit;\r\n        }\r\n        var sign = this.sign ? \"-\" : \"\";\r\n        return sign + str;\r\n    };\r\n\r\n    SmallInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix != 10) return toBaseString(this, radix, alphabet);\r\n        return String(this.value);\r\n    };\r\n\r\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\r\n\r\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () { return this.toString(); }\r\n\r\n    BigInteger.prototype.valueOf = function () {\r\n        return parseInt(this.toString(), 10);\r\n    };\r\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n\r\n    SmallInteger.prototype.valueOf = function () {\r\n        return this.value;\r\n    };\r\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\r\n        return parseInt(this.toString(), 10);\r\n    }\r\n\r\n    function parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x))\r\n                return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\r\n            throw new Error(\"Invalid integer: \" + v);\r\n        }\r\n        var sign = v[0] === \"-\";\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error(\"Invalid integer: \" + split.join(\"e\"));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === \"+\") exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error(\"Invalid integer: \" + exp + \" is not a valid exponent.\");\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf(\".\");\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);\r\n            }\r\n            if (exp < 0) throw new Error(\"Cannot include negative exponent part for integers\");\r\n            text += (new Array(exp + 1)).join(\"0\");\r\n            v = text;\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error(\"Invalid integer: \" + v);\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(sign ? \"-\" + v : v));\r\n        }\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l;\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign);\r\n    }\r\n\r\n    function parseNumberValue(v) {\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(v));\r\n        }\r\n        if (isPrecise(v)) {\r\n            if (v !== truncate(v)) throw new Error(v + \" is not an integer.\");\r\n            return new SmallInteger(v);\r\n        }\r\n        return parseStringValue(v.toString());\r\n    }\r\n\r\n    function parseValue(v) {\r\n        if (typeof v === \"number\") {\r\n            return parseNumberValue(v);\r\n        }\r\n        if (typeof v === \"string\") {\r\n            return parseStringValue(v);\r\n        }\r\n        if (typeof v === \"bigint\") {\r\n            return new NativeBigInt(v);\r\n        }\r\n        return v;\r\n    }\r\n    // Pre-define numbers in range [-999,999]\r\n    for (var i = 0; i < 1000; i++) {\r\n        Integer[i] = parseValue(i);\r\n        if (i > 0) Integer[-i] = parseValue(-i);\r\n    }\r\n    // Backwards compatibility\r\n    Integer.one = Integer[1];\r\n    Integer.zero = Integer[0];\r\n    Integer.minusOne = Integer[-1];\r\n    Integer.max = max;\r\n    Integer.min = min;\r\n    Integer.gcd = gcd;\r\n    Integer.lcm = lcm;\r\n    Integer.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt; };\r\n    Integer.randBetween = randBetween;\r\n\r\n    Integer.fromArray = function (digits, base, isNegative) {\r\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);\r\n    };\r\n\r\n    return Integer;\r\n})();\r\n\r\n// Node.js check\r\nif (typeof module !== \"undefined\" && module.hasOwnProperty(\"exports\")) {\r\n    module.exports = bigInt;\r\n}\r\n\r\n//amd check\r\nif (typeof define === \"function\" && define.amd) {\r\n    define( function () {\r\n        return bigInt;\r\n    });\r\n}\r\n","import { Any, compareSchema, ObjectIdentifier, Sequence } from \"asn1js\";\nimport { getParametersValue, clearProps } from \"pvutils\";\n//**************************************************************************************\n/**\n * Class from RFC5280\n */\nexport default class AlgorithmIdentifier {\n  //**********************************************************************************\n  /**\n   * Constructor for AlgorithmIdentifier class\n   * @param {Object} [source={}]\n   * @param {Object} [source.schema] asn1js parsed value to initialize the class from\n   * @property {string} [algorithmId] ObjectIdentifier for algorithm (string representation)\n   */\n  constructor(source = {}) {\n    if (typeof(source) == \"string\") {\n      throw new TypeError(\"Unimplemented: Not accepting string yet.\")\n    }\n    if (source instanceof ArrayBuffer) {\n      const asn1 = fromBER(source)\n      this.fromSchema(asn1.result);\n    } else {\n      /**\n       * @type {string}\n       * @desc ObjectIdentifier for algorithm (string representation)\n       */\n      this.algorithmId = getParametersValue(\n          source,\n          \"algorithmId\"\n      );\n\n      if (\"algorithmParams\" in source)\n        /**\n         * @type {Object}\n         * @desc Any algorithm source\n         */\n        this.algorithmParams = getParametersValue(\n            source,\n            \"algorithmParams\",\n            AlgorithmIdentifier.defaultValues(\"algorithmParams\")\n        );\n    }\n  }\n  //**********************************************************************************\n  /**\n   * Return default values for all class members\n   * @param {string} memberName String name for a class member\n   */\n   /* FIXME: algorithmParams is options hence not removed and we need to complete this with all parameters with their default value covered here.\n   */\n  static defaultValues(memberName) {\n    switch (memberName) {\n      case \"algorithmParams\":\n        return new Any();\n      default:\n        throw new Error(\n          `Invalid member name for AlgorithmIdentifier class: ${memberName}`\n        );\n    }\n  }\n  //**********************************************************************************\n  /**\n   * Compare values with default values for all class members\n   * @param {string} memberName String name for a class member\n   * @param {*} memberValue Value to compare with default value\n   */\n  static compareWithDefault(memberName, memberValue) {\n    switch (memberName) {\n      case \"algorithmId\":\n        return memberValue === \"\";\n      case \"algorithmParams\":\n        return memberValue instanceof asn1js.Any;\n      default:\n        throw new Error(\n          `Invalid member name for AlgorithmIdentifier class: ${memberName}`\n        );\n    }\n  }\n  //**********************************************************************************\n  /**\n   * Return value of pre-defined ASN.1 schema for current class\n   *\n   * ASN.1 schema:\n   * ```asn1\n   * AlgorithmIdentifier  ::=  Sequence  {\n   *    algorithm               OBJECT IDENTIFIER,\n   *    parameters              ANY DEFINED BY algorithm OPTIONAL  }\n   * ```\n   *\n   * @param {Object} parameters Input parameters for the schema\n   * @returns {Object} asn1js schema object\n   */\n  static schema(parameters = {}) {\n    /**\n     * @type {Object}\n     * @property {string} algorithmIdentifier ObjectIdentifier for the algorithm\n     * @property {string} algorithmParams Any algorithm parameters\n     */\n    const names = getParametersValue(parameters, \"names\", {});\n\n    return new Sequence({\n      name: names.blockName || \"\",\n      optional: names.optional || false,\n      value: [\n        new ObjectIdentifier({ name: names.algorithmIdentifier || \"algorithm\" }),\n        new Any({ name: names.algorithmParams || \"parameters\", optional: true }),\n      ],\n    });\n  }\n  //**********************************************************************************\n  /**\n   * Convert parsed asn1js object into current class\n   * @param {!Object} schema\n   */\n  fromSchema(schema) {\n    //region Clear input data first\n    clearProps(schema, [\"algorithm\", \"params\"]);\n    //endregion\n\n    //region Check the schema is valid\n    const asn1 = compareSchema(\n      schema,\n      schema,\n      AlgorithmIdentifier.schema({\n        names: {\n          algorithmIdentifier: \"algorithm\",\n          algorithmParams: \"params\",\n        },\n      })\n    );\n\n    if (asn1.verified === false)\n      throw new Error(\n        \"Object's schema was not verified against input data for AlgorithmIdentifier\"\n      );\n    //endregion\n\n    //region Get internal properties from parsed schema\n    this.algorithmId = asn1.result.algorithm.valueBlock.toString();\n    if (\"params\" in asn1.result) this.algorithmParams = asn1.result.params;\n    //endregion\n  }\n  //**********************************************************************************\n  /**\n   * Convert current object to asn1js object and set correct values\n   * @returns {Object} asn1js object\n   */\n  toSchema() {\n    //region Create array for output sequence\n    const outputArray = [];\n\n    outputArray.push(new ObjectIdentifier({ value: this.algorithmId }));\n    if (\n      \"algorithmParams\" in this &&\n      this.algorithmParams instanceof asn1js.Any === false\n    )\n      outputArray.push(this.algorithmParams);\n    //endregion\n\n    //region Construct and return new ASN.1 schema for this object\n    return new Sequence({\n      value: outputArray,\n    });\n    //endregion\n  }\n  //**********************************************************************************\n  /**\n   * Convertion for the class to JSON object\n   * @returns {Object}\n   */\n  toJSON() {\n    const object = {\n      algorithmId: this.algorithmId,\n    };\n\n    if (\n      \"algorithmParams\" in this &&\n      this.algorithmParams instanceof asn1js.Any === false\n    )\n      object.algorithmParams = this.algorithmParams.toJSON();\n\n    return object;\n  }\n  //**********************************************************************************\n  /**\n   * Check that two \"AlgorithmIdentifiers\" are equal\n   * @param {AlgorithmIdentifier} algorithmIdentifier\n   * @returns {boolean}\n   */\n  isEqual(algorithmIdentifier) {\n    //region Check input type\n    if (algorithmIdentifier instanceof AlgorithmIdentifier === false)\n      return false;\n    //endregion\n\n    //region Check \"algorithm_id\"\n    if (this.algorithmId !== algorithmIdentifier.algorithmId) return false;\n    //endregion\n\n    //region Check \"algorithm_params\"\n    if (\"algorithmParams\" in this) {\n      if (\"algorithmParams\" in algorithmIdentifier)\n        return (\n          JSON.stringify(this.algorithmParams) ===\n          JSON.stringify(algorithmIdentifier.algorithmParams)\n        );\n\n      return false;\n    }\n\n    if (\"algorithmParams\" in algorithmIdentifier) return false;\n    //endregion\n\n    return true;\n  }\n  //**********************************************************************************\n}\n//**************************************************************************************\n","import {\n  BitString,\n  compareSchema,\n  Sequence,\n  fromBER,  \n} from \"asn1js\";\nimport { getParametersValue, clearProps } from \"pvutils\";\nimport AlgorithmIdentifier from \"./AlgorithmIdentifier.js\";\n//**************************************************************************************\n/**\n * Class from RFC5280\n */\nexport default class PublicKeyInfo {\n  //**********************************************************************************\n  /**\n   * Constructor for PublicKeyInfo class\n   * @param {Object} [source={}]\n   * @param {Object} [source.schema] asn1js parsed value to initialize the class from\n   * @property {string} [algorithmId] ObjectIdentifier for algorithm (string representation)\n   */\n  constructor(source = {}) {\n    if (typeof(source) == \"string\") {\n      throw new TypeError(\"Not accepting string. For base64, convert to ArrayBuffer.\")\n    }\n    if (source instanceof ArrayBuffer) {\n      const asn1 = fromBER(source)\n      this.fromSchema(asn1.result);\n    } else {\n      /**\n       * @type {string}\n       * @desc ObjectIdentifier for algorithm (string representation)\n       */\n      this.signatureAlgorithm = getParametersValue(\n          source,\n          \"signatureAlgorithm\"\n      );\n\t  this.publicKey = getParametersValue(\n          source,\n          \"publicKey\"\n      );\n    }\n  }\n \n  //**********************************************************************************\n  /**\n   * Return value of pre-defined ASN.1 schema for current class\n   *\n   * ASN.1 schema:\n   * ```asn1\n   * PublicKeyInfo  ::=  Sequence  {\n   *    signatureAlgorithm               AlgorithmIdentifier,\n   *    publicKey              BIT-STRING  }\n   * ```\n   *\n   * @param {Object} parameters Input parameters for the schema\n   * @returns {Object} asn1js schema object\n   */\n  static schema(parameters = {}) {\n    /**\n     * @type {Object}\n     * @property {string} signatureAlgorithm ObjectIdentifier for the algorithm\n     * @property {string} publicKey Any algorithm parameters\n     */\n    const names = getParametersValue(parameters, \"names\", {});\n\n    return new Sequence({\n      name: names.blockName || \"\",\n      optional: true,\n      value: [\n\t\tAlgorithmIdentifier.schema(\n\t\t\tnames.signatureAlgorithm || {\n\t\t\t  names: {\n\t\t\t\tblockName: \"signatureAlgorithm\",\n\t\t\t  },\n\t\t\t}\n\t\t),\n        new BitString({ name: \"publicKey\"}),\n      ],\n    });\n  }\n  //**********************************************************************************\n  /**\n   * Convert parsed asn1js object into current class\n   * @param {!Object} schema\n   */\n  fromSchema(schema) {\n    //region Clear input data first\n    clearProps(schema, [\"signatureAlgorithm\", \"publicKey\"]);\n    //endregion\n\n    //region Check the schema is valid\n    const asn1 = compareSchema(\n      schema,\n      schema,\n      PublicKeyInfo.schema({\n        names: {\n          signatureAlgorithm: \"signatureAlgorithm\",\n          publicKey: \"publicKey\",\n        },\n      })\n    );\n\n    if (asn1.verified === false)\n      throw new Error(\n        \"Object's schema was not verified against input data for AlgorithmIdentifier\"\n      );\n    //endregion\n  }\n}\n//**************************************************************************************\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","import {\n  BitString,\n  compareSchema,\n  Integer,\n  OctetString,\n  Sequence,\n  fromBER, Utf8String\n} from \"asn1js\";\nimport { getParametersValue, clearProps, bufferToHexCodes } from \"pvutils\";\nimport PublicKeyInfo from \"./PublicKeyInfo.js\";\nimport { ethers } from \"ethers\";\nimport bigInt from 'big-integer';\n\nexport class DevconTicket {\n  //**********************************************************************************\n  /**\n   * Constructor for Attribute class\n   * @param {Object} [source={}] source is an object\n   * @param {Object} [source:ArrayBuffer] source is DER encoded\n   * @param {Object} [source:String]  source is CER encoded\n   */\n  constructor(source = {}) {\n    if (typeof (source) == \"string\") {\n      throw new TypeError(\"Unimplemented: Not accepting string yet.\")\n    }\n    if (source instanceof ArrayBuffer) {\n      const asn1 = fromBER(source)\n      this.fromSchema(asn1.result);\n    } else {\n      this.devconId = getParametersValue(\n          source,\n          \"devconId\"\n      );\n      this.ticketId = getParametersValue(\n          source,\n          \"ticketId\"\n      );\n      this.ticketClass = getParametersValue(\n          source,\n          \"ticketClass\"\n      );\n    }\n  }\n\n  static schema(parameters = {}) {\n    const names = getParametersValue(parameters, \"names\", {});\n\n    return new Sequence({\n      name: names.blockName || \"ticket\",\n      value: [\n        new Utf8String({\n          name: names.devconId || \"devconId\",\n        }),\n        new Integer({\n          name: names.ticketId || \"ticketId\",\n        }),\n        new Integer({\n          name: names.ticketClass || \"ticketClass\",\n        }),\n      ],\n    });\n  }\n\n  //**********************************************************************************\n  /**\n   * Convert parsed asn1js object into current class\n   * @param {!Object} schema\n   */\n  fromSchema(schema) {\n    //region Clear input data first\n    clearProps(schema, [\n      //   \"ticket\",\n      \"devconId\",\n      \"ticketId\",\n      \"ticketClass\",\n    ]);\n    //endregion\n\n    //region Check the schema is valid\n    const asn1 = compareSchema(schema, schema, DevconTicket.schema());\n\n    if (asn1.verified === false)\n      throw new Error(\"Object's schema was not verified against input data for DevconTicket\");\n\n    //endregion\n\n    //region Get internal properties from parsed schema\n    // noinspection JSUnresolvedVariable\n\n    if (\"devconId\" in asn1.result) {\n      this.devconId = asn1.result[\"devconId\"].valueBlock.value;\n    }\n\n    if (\"ticketId\" in asn1.result) {\n      const ticketId = asn1.result[\"ticketId\"].valueBlock._valueHex;\n      this.ticketId = bigInt(\"0x\" + bufferToHexCodes(ticketId));\n    }\n\n    if (\"ticketClass\" in asn1.result) {\n      const ticketClass = asn1.result[\"ticketClass\"].valueBlock._valueHex;\n      this.ticketClass = bigInt(\"0x\" + bufferToHexCodes(ticketClass));\n    }\n\n    //endregion\n  }\n}\n\nexport class SignedDevconTicket {\n  //**********************************************************************************\n  /**\n   * Constructor for Attribute class\n   * @param {Object} [source={}] source is an object\n   * @param {Object} [source:ArrayBuffer] source is DER encoded\n   * @param {Object} [source:String]  source is DER encoded\n   */\n  constructor(source = {}) {\n    if (typeof(source) == \"string\") {\n\n      const ticketEncoded = (source.startsWith(\"https://\")) ?\n          (new URL(source)).searchParams.get('ticket') : source;\n      \n      let base64str = ticketEncoded\n          .split('_').join('/')\n          .split('-').join('+')\n          .split('.').join('=');\n\n      // source = Uint8Array.from(Buffer.from(base64str, 'base64')).buffer;\n      if (typeof Buffer !== 'undefined') {\n        source = Uint8Array.from(Buffer.from(base64str, 'base64')).buffer;\n      } else {\n        source = Uint8Array.from(atob(base64str), c => c.charCodeAt(0)).buffer;\n      }\n      \n    }\n\n    if (source instanceof ArrayBuffer) {\n      const asn1 = fromBER(source);\n      this.fromSchema(asn1.result);\n    } else {\n      this.ticket = new DevconTicket(source.ticket);\n\n      this.commitment = getParametersValue(\n          source,\n          \"commitment\"\n      );\n\n      // TODO: issue #75\n      // this.signatureAlgorithm = new AlgorithmIdentifier(source.signatureAlgorithm);\n\t  \n\t  this.publicKeyInfo = new PublicKeyInfo(source.publicKeyInfo)\n\n      this.signatureValue = getParametersValue(\n          source,\n          \"signatureValue\"\n      );\n    }\n  }\n\n  //**********************************************************************************\n  /**\n   * Return value of pre-defined ASN.1 schema for current class\n   *\n   * ASN.1 schema:\n   * ```asn1\n   * CertificateList  ::=  SEQUENCE  {\n   *    tbsCertList          TBSCertList,\n   *    signatureAlgorithm   AlgorithmIdentifier,\n   *    signatureValue       BIT STRING  }\n   * ```\n   *\n   * @param {Object} parameters Input parameters for the schema\n   * @returns {Object} asn1js schema object\n   */\n  static schema(parameters = {}) {\n    /**\n     * @type {Object}\n     * @property {string} [blockName]\n     * @property {string} [signatureAlgorithm]\n     * @property {string} [signatureValue]\n     */\n    const names = getParametersValue(parameters, \"names\", {});\n\n    return new Sequence({\n      name: names.blockName || \"SignedDevconTicket\",\n      value: [\n        DevconTicket.schema(parameters),\n        new OctetString({\n          name: \"commitment\",\n        }),\n        /* PublicKeyInfo is specified in schema here but not appearing in the constructed data object.\n         * This is because the underlying AlgorithmIdentifier isn't fully implemented and also\n         * that this data is not important for the 1st delivery deadline, won't be read by client anyway.\n         * TODO: add support for PublicKeyInfo https://github.com/TokenScript/attestation/issues/75\n         */\n        // new Sequence( {\n        //   name: \"publicKeyInfo\",\n        //   optional: true,\n        //   value: [\n        //     PublicKeyInfo.schema(\n        //         names.publicKeyInfo || {\n        //           names: {\n        //             blockName: \"publicKeyInfo\",\n        //           },\n        //         }\n        //     )\n        //   ]\n        // }),\n\n        new BitString({\n          name: \"signatureValue\",\n        }),\n      ],\n    });\n  }\n  //**********************************************************************************\n  /**\n   * Convert parsed asn1js object into current class\n   * @param {!Object} schema\n   */\n  fromSchema(schema) {\n    //region Clear input data first\n    clearProps(schema, [\n      //   \"ticket\",\n      \"ticket\",\n      \"commitment\",\n      // TODO: #75\n\t  \"publicKeyInfo\",\n      \"signatureValue\",\n    ]);\n    //endregion\n\n    //region Check the schema is valid\n    const asn1 = compareSchema(schema, schema, SignedDevconTicket.schema());\n\n    if (asn1.verified === false)\n\t\tthrow new Error(\"Object's schema was not verified against input data for SignedDevconTicket\");\n\n    //endregion\n\n    //region Get internal properties from parsed schema\n    // noinspection JSUnresolvedVariable\n\n    this.ticket = new DevconTicket(asn1.result.ticket.valueBeforeDecode)\n\n    if (\"commitment\" in asn1.result)\n      this.commitment = asn1.result[\"commitment\"].valueBlock.valueHex;\n\n    // TODO: issue #75\n    // this.signatureAlgorithm = new AlgorithmIdentifier(asn1.result.signatureAlgorithm);\n\tthis.publicKeyInfo = new PublicKeyInfo({\n      schema: asn1.result.publicKeyInfo,\n    });\n\n    const signatureValue = asn1.result.signatureValue;\n    this.signatureValue = signatureValue.valueBlock.valueHex;    //endregion\n  }\n}\n","import './token-negotiator-local/negotiator/modal/';\nimport \"./theme/style.css\";\n\n\n\n","// @ts-ignore\nimport { tokenConfig } from \"./../tokenConfig\";\n// @ts-ignore\nimport { base64ToUint8array } from './../utils';\nimport ClientStateService from './clientStateService';\nimport { tokenComponent } from \"./tokenComponent\";\n\nexport class Modal {\n\n  constructor(filter = {}, tokenName:any, options = {}) {\n    if (!tokenName) console.log(\"Negotiator: tokenName is a required parameter\");\n    // @ts-ignore\n    this.XMLconfig = tokenConfig[tokenName];\n    // @ts-ignore\n    this.tokenParser = this.XMLconfig.tokenParser;\n  };\n\n  getTokens(\n    filter={}, \n    tokenName=\"devcon-ticket\", \n    tokensOrigin=\"http://localhost:3002/\"\n  ) {\n    return new Promise((resolve, reject) => {\n      if (window.location.href === tokensOrigin) {\n        // @ts-ignore\n        const tokensOutput = this.readTokens(this.XMLconfig.localStorageItemName);\n        if (tokensOutput.success && !tokensOutput.noTokens) {\n          const decodedTokens:any = this.decodeTokens(tokensOutput.tokens);\n          const filteredTokens:any = this.filterTokens(decodedTokens, filter);\n          tokensOutput.tokens = filteredTokens;\n          resolve(tokensOutput);\n        } else {\n          reject(false);\n        }\n      }\n    })\n  }\n\n  filterTokens(decodedTokens:any, filter = {}) {\n    // @ts-ignore\n    if (Object.keys(filter).length == 0) filter = this.filter;\n    let res:any = [];\n    if (\n      decodedTokens.length\n      && typeof filter === \"object\"\n      && Object.keys(filter).length\n    ) {\n      let filterKeys = Object.keys(filter);\n      decodedTokens.forEach((token:any) => {\n        let fitFilter = 1;\n        filterKeys.forEach(key => {\n          if (token[key].toString() != filter[key].toString()) fitFilter = 0;\n        })\n        if (fitFilter) res.push(token);\n      })\n      return res;\n    } else {\n      return decodedTokens;\n    }\n  }\n\n  // read tokens from local storage and return as object {tokens: [], noTokens: boolean, success: boolean}\n  readTokens(localStorageItemName:any) {\n    const storageTickets = localStorage.getItem(localStorageItemName);\n    let tokens:any = [];\n    let output:any = { tokens: [], noTokens: true, success: true };\n    try {\n      if (storageTickets && storageTickets.length) {\n        // Build new list of tickets from current and query ticket { ticket, secret }\n        tokens = JSON.parse(storageTickets);\n        if (tokens.length !== 0) {\n          tokens.forEach((item:any) => {\n            if (item.token && item.secret) output.tokens.push(item);\n          })\n        }\n        if (output.tokens.length) {\n          output.noTokens = false;\n        }\n      }\n    } catch (e) {\n      console.log('Cant parse tokens in LocalStorage');\n      // @ts-ignore\n      if (typeof callBack === \"function\") {\n        output.success = false;\n      }\n    }\n    return output;\n  }\n  \n  decodeTokens(rawTokens:any) {\n    return rawTokens.map((tokenData:any) => {\n      if (tokenData.token) {\n        // @ts-ignore\n        let decodedToken = new this.tokenParser(base64ToUint8array(tokenData.token).buffer);\n        // @ts-ignore\n        if (decodedToken && decodedToken[this.XMLconfig.unsignedTokenDataName]) return decodedToken[this.XMLconfig.unsignedTokenDataName];\n      }\n    });\n  };\n\n  // // TODO Consider where this should live. NOT Used inside modal.\n  // getRawToken(unsignedToken) {\n  //   let tokensOutput = this.readTokens();\n  //   if (tokensOutput.success && !tokensOutput.noTokens) {\n  //     let rawTokens = tokensOutput.tokens;\n  //     let token = false;\n  //     if (rawTokens.length) {\n  //       rawTokens.forEach(tokenData => {\n  //         if (tokenData.token) {\n  //           let decodedToken = new this.tokenParser(this.base64ToUint8array(tokenData.token).buffer);\n  //           if (decodedToken && decodedToken[this.unsignedTokenDataName]) {\n  //             let decodedTokenData = decodedToken[this.unsignedTokenDataName];\n  //             if (compareObjects(decodedTokenData, unsignedToken)) {\n  //               token = tokenData;\n  //             }\n  //           }\n  //         } else {\n  //           console.log('empty token data received');\n  //         }\n  //       })\n  //     }\n  //     return token;\n  //   }\n  // }\n\n  // listenForIframeMessages(event) {\n  //   // console.log('listenForIframeMessages fired');\n  //   let tokensOriginURL = new URL(this.tokensOrigin);\n  //   // listen only tokensOriginURL\n  //   if (event.origin !== tokensOriginURL.origin) {\n  //     return;\n  //   }\n  //   // console.log('parent: event = ', event.data);\n  //   // iframeCommand required for interaction\n  //   if (\n  //     typeof event.data.iframeCommand === \"undefined\"\n  //     || typeof event.data.iframeData === \"undefined\"\n  //   ) {\n  //     return;\n  //   }\n  //   // iframeCommand contain command code\n  //   let command = event.data.iframeCommand;\n  //   // iframeData contains command content (tokens data, useToken , hide/display iframe)\n  //   let data = event.data.iframeData;\n  //   console.log('parent: command, data = ', command, data);\n  //   switch (command) {\n  //     case \"iframeWrap\":\n  //       if (data == \"show\") {\n  //         this.tokenIframeWrap.style.display = 'block';\n  //       } else if (data == \"hide\") {\n  //         this.tokenIframeWrap.style.display = 'none';\n  //       }\n  //       break;\n  //     case \"tokensData\":\n  //       // tokens received, disable listener\n  //       this.detachPostMessageListener(this.listenForIframeMessages);\n  //       // TODO remove iframeWraper\n  //       this.tokenIframeWrap.remove();\n  //       if (data.success && !data.noTokens) {\n  //         data.tokens = this.filterTokens(data.tokens);\n  //       }\n  //       this.negotiateCallback(data);\n  //       break;\n  //     case \"useTokenData\":\n  //       this.tokenIframeWrap.remove();\n  //       this.signCallback && this.signCallback(data);\n  //       this.signCallback = false;\n  //       break;\n  //     case \"iframeReady\":\n  //       if (event && event.source) {\n  //         event.source.postMessage(this.queuedCommand, event.origin);\n  //         this.queuedCommand = '';\n  //       }\n  //       break;\n  //     default:\n  //   }\n  // }\n\n  // createIframe() {\n  //   console.log('createIframe fired');\n  //   // open iframe and request tokens\n  //   this.attachPostMessageListener(this.listenForIframeMessages.bind(this));\n  //   const iframe = document.createElement('iframe');\n  //   this.iframe = iframe;\n  //   iframe.src = this.tokensOrigin;\n  //   iframe.style.width = '800px';\n  //   iframe.style.height = '700px';\n  //   iframe.style.maxWidth = '100%';\n  //   iframe.style.background = '#fff';\n  //   let iframeWrap = document.createElement('div');\n  //   this.tokenIframeWrap = iframeWrap;\n  //   iframeWrap.setAttribute('style', 'width:100%; min-height: 100vh; position: fixed; align-items: center; justify-content: center; display: none; top: 0; left: 0; background: #fffa');\n  //   iframeWrap.appendChild(iframe);\n  //   document.body.appendChild(iframeWrap);\n  // }\n\n  // attachPostMessageListener(listener) {\n  //   if (window.addEventListener) {\n  //     window.addEventListener(\"message\", listener, false);\n  //   } else {\n  //     // IE8\n  //     window.attachEvent(\"onmessage\", listener);\n  //   }\n  // }\n  // detachPostMessageListener(listener) {\n  //   if (window.addEventListener) {\n  //     window.removeEventListener(\"message\", listener, false);\n  //   } else {\n  //     // IE8\n  //     window.detachEvent(\"onmessage\", listener);\n  //   }\n  // }\n\n  // addTokenThroughIframe(magicLink) {\n  //   console.log('createTokenIframe fired for : ' + magicLink);\n  //   const iframe = document.createElement('iframe');\n  //   this.addTokenIframe = iframe;\n  //   iframe.src = magicLink;\n  //   iframe.style.width = '1px';\n  //   iframe.style.height = '1px';\n  //   iframe.style.opacity = 0;\n  //   document.body.appendChild(iframe);\n  // }\n\n  // listenForParentMessages(event) {\n  //   let referrer = new URL(document.referrer);\n  //   if (event.origin !== referrer.origin) return;\n  //   if (\n  //     typeof event.data.parentCommand === \"undefined\"\n  //     || typeof event.data.parentData === \"undefined\"\n  //   ) {\n  //     return;\n  //   }\n  //   // parentCommand contain command code\n  //   let command = event.data.parentCommand;\n  //   // parentData contains command content (token to sign or empty object)\n  //   let data = event.data.parentData;\n  //   console.log('iframe: command, data = ', command, data);\n  //   switch (command) {\n  //     case \"signToken\":\n  //       // we receive decoded token, we have to find appropriate raw token\n  //       if (typeof window.Authenticator === \"undefined\") {\n  //         console.log('Authenticator not defined.');\n  //         return;\n  //       }\n  //       let rawTokenData = this.getRawToken(data);\n  //       let base64ticket = rawTokenData.token;\n  //       let ticketSecret = rawTokenData.secret;\n  //       this.authenticator = new Authenticator(this);\n  //       let tokenObj = {\n  //         ticketBlob: base64ticket,\n  //         ticketSecret: ticketSecret,\n  //         attestationOrigin: this.attestationOrigin,\n  //       };\n  //       if (rawTokenData && rawTokenData.id) tokenObj.email = rawTokenData.id;\n  //       if (rawTokenData && rawTokenData.magic_link) tokenObj.magicLink = rawTokenData.magic_link;\n  //       this.authenticator.getAuthenticationBlob(tokenObj,\n  //         res => {\n  //           console.log('sign result:', res);\n  //           window.parent.postMessage({ iframeCommand: \"useTokenData\", iframeData: { useToken: res, message: '', success: !!res } }, referrer.origin);\n  //         });\n  //       break;\n  //     case \"tokensList\":\n  //       this.returnTokensToParent();\n  //       break;\n  //     default:\n  //   }\n  // }\n\n  // commandDisplayIframe() {\n  //   let referrer = new URL(document.referrer);\n  //   window.parent.postMessage({ iframeCommand: \"iframeWrap\", iframeData: 'show' }, referrer.origin);\n  // }\n\n  // commandHideIframe() {\n  //   let referrer = new URL(document.referrer);\n  //   window.parent.postMessage({ iframeCommand: \"iframeWrap\", iframeData: 'hide' }, referrer.origin);\n  // }\n\n  // returnTokensToParent() {\n  //   let tokensOutput = this.readTokens();\n  //   if (tokensOutput.success && !tokensOutput.noTokens) {\n  //     let decodedTokens = this.decodeTokens(tokensOutput.tokens);\n  //     let filteredTokens = this.filterTokens(decodedTokens);\n  //     tokensOutput.tokens = filteredTokens;\n  //   }\n  //   let referrer = new URL(document.referrer);\n  //   window.parent.postMessage({ iframeCommand: \"tokensData\", iframeData: tokensOutput }, referrer.origin);\n  // }\n}\n\n// TODO: Move into Negotiator\nconst clientStateService = new ClientStateService();\nwindow.addEventListener('message', function(event) { modalEventReciever(event.data); }, false);\nconst modalClickHandler = () => {\n  const element = document.querySelector(\".tk-modal .modal\");\n  const isOpen = element.classList.contains(\"open\");\n  element.classList.toggle(\"open\");\n  if(!isOpen) {\n    window.top.postMessage({ evt: 'hideModal', state: 'open' }, \"*\");\n    element.classList.add(\"open\");\n    return 'open';\n  } else {\n    window.top.postMessage({ evt: 'hideModal', state: 'close' }, \"*\");\n    element.classList.remove(\"open\");\n    return 'close';\n  }\n}\nfunction addTokens(tokenContainer:any, str:string) { tokenContainer.innerHTML = str; }\nconst initNegotiator = (data:any) => {\n  appendModalContent();\n  applyModalAnimationSmoothing();\n  const negotiatorModal = new Modal(data.filter, data.tokenName, data.options);\n  negotiatorModal.getTokens().then((results:any) => {\n    if(results.tokens) {\n      const tokenContainer = document.querySelector('.tk-modal .token-container');\n      addTokens(tokenContainer, results.tokens.map((data:any, index:number) => {\n        return tokenComponent(data, index);\n      }).join(''));\n    }\n  });\n}\nconst applyModalAnimationSmoothing = () => {\n  // Smooth transitions after initial page load.\n  // @ts-ignore\n  document.getElementsByClassName('modal')[0].style.transition = 'all 0.2s ease-out';\n}\nconst modalEventReciever = (data:any) => {\n  switch(data.evt) {\n    case 'getTokenButtonHTML':\n      // TODO - expects entire config as per mock\n      const dataEvtMock = { evt: { tokenName: 'devcon-ticket', filter: {}, options: { tokenSelectorContainer: \".tokenSelectorContainerElement\" } } } ;\n      initNegotiator(dataEvtMock.evt);\n      modalEventSender.emitTokenButtonHTML();\n      break;\n    case 'setSelectedTokens':\n      modalEventSender.emitSelectedTokens();\n      break;\n    case 'setToggleModalHandler':\n      modalEventSender.emitModalToggleState();\n      break;\n  }\n}\nconst modalEventSender = {\n  emitTokenButtonHTML: () => {\n    window.top.postMessage({ \n      evt: 'setTokenButtonHTML', \n      button: `\n        <button\n          onclick=\"negotiator.modalClickHandler()\"\n          style=\"height:80px; width:80px; border: 0; background-image: url('${document.location.href}/theme/fab-button.svg'); box-shadow: 0 2px 5px 0 #676767; border-radius: 64px; cursor: pointer; z-index: 999; position: relative;\">\n        </button>\n      ` }, \n    \"*\");\n  },\n  emitSelectedTokens: () => {\n    window.top.postMessage({ \n      evt: 'setSelectedTokens', \n      selectedTokens: clientStateService.selectedTokens\n     }, \n    \"*\");\n  },\n  // @ts-ignore\n  modalClickTimer: null, \n  emitModalToggleState: () => {\n    const toggleModalState = modalClickHandler();\n    // @ts-ignore\n    clearTimeout(this.modalClickTimer);\n    if(toggleModalState === 'close') {\n      // @ts-ignore\n      this.modalClickTimer = setTimeout(() => {\n        window.top.postMessage({ evt: 'hideModal', state: toggleModalState }, \"*\");\n      }, 1000);\n    } else {\n      window.top.postMessage({ evt: 'showModal', state: toggleModalState }, \"*\");\n    }\n  }\n}\n\n// Modal token selection toggle event (this is triggered when the end user toggles on/off a token)\n// @ts-ignore\nwindow.tokenToggleSelection = () => {\n  var output:any = [];\n  document.querySelectorAll('.token .mobileToggle').forEach((token:any) => {\n    if(token.checked === true) {\n      output.push(JSON.parse(token.dataset.token));\n    }\n  });\n  clientStateService.selectedTokens = output;\n  modalEventSender.emitSelectedTokens();\n}\n\nconst appendModalContent = () => {\n  document.querySelector('.tk-modal').innerHTML = `\n  <div class=\"modal\">\n    <div class=\"brand\"></div>\n    <p class=\"headline\">Available Tokens</p>\n    <div class=\"token-container\">\n      <p style=\"padding: 0 16px; color: grey\">No tokens available.</p>\n    </div>\n  </div>`;\n}\n\n// DEVELOPMENT MODE:\n(() => {\n  // THIS LINE ALLOWS MODAL TO SHOW FOR DEVELOPMENT USE ONLY\n  // TODO: APPLY A DEVELOPMENT FLAG TO THIS / SO IN PRODUCTION THE MODAL \n  // WILL BE HIDDEN FROM VIEW.\n  if (window.top === window.self) { \n    const dataEvtMock = { evt: { tokenName: 'devcon-ticket', filter: {}, options: { tokenSelectorContainer: \".tokenSelectorContainerElement\" } } } ;\n    initNegotiator(dataEvtMock.evt);\n    // @ts-ignore\n    document.getElementsByClassName('modal')[0].style.opacity = 1;\n  }\n})();\n\n","import { SignedDevconTicket } from './../Attestation/SignedDevonTicket';\n\n/*\n\n  tokenUid: String (unique token id name)\n  attestationOrigin: String (origin location of attestation check)\n  tokenOrigin: String (url location of  token outlet)\n  tokenIdName: String (used for query params ref)\n  tokenUrlName: String (used for query params ref)\n  tokenSecretName: String (used for query params ref)\n  unsignedTokenDataName: String (key to locate nested data within decoded ticket)\n  tokenParser: Ticket Class ()\n  localStorageItemName: String (namespace used to locate tokens)\n  localStorageEthKeyItemName: String (namespace used to locate keys)\n\n  TODO - tokenParser isn't scaleable e.g. this lib can't hold 1m of token definitions.\n  This should be held inside the Modal or Outlet.\n\n*/\n\nexport const tokenConfig = {\n  \"devcon-ticket\": {\n      tokenUid: 'devcon-ticket',\n      attestationOrigin: \"https://stage.attestation.id\",\n      tokenOrigin: \"http://localhost:3002/\",\n      // tokenOrigin: \"https://devcontickets.herokuapp.com/outlet/\",\n      tokenUrlName: 'ticket',\n      tokenSecretName: 'secret',\n      tokenIdName: 'id',\n      unsignedTokenDataName: 'ticket',\n      tokenParser: SignedDevconTicket, \n      localStorageItemName: 'dcTokens',\n      localStorageEthKeyItemName: 'dcEthKeys',\n  }\n}","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","export const compareObjects = (o1, o2) => {\n  for (var p in o1) {\n    if (o1.hasOwnProperty(p)) {\n      if (o1[p].toString() !== o2[p].toString()) {\n        return false;\n      }\n    }\n  }\n  for (var p in o2) {\n    if (o2.hasOwnProperty(p)) {\n      if (o1[p].toString() !== o2[p].toString()) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nexport const base64ToUint8array = (base64str) => {\n  base64str = base64str.split('-').join('+').split('_').join('/').split('.').join('=');\n  if (typeof Buffer !== 'undefined') return Uint8Array.from(Buffer.from(base64str, 'base64'));\n  else return Uint8Array.from(atob(base64str), c => c.charCodeAt(0));\n}","class ClientTokenService {\n\n  state: { \n    data: {\n      selectedTokens: any[]; \n    };\n  };\n\n  constructor() {\n    this.state = {\n      data: {\n        selectedTokens: []\n      }\n    }\n  }\n      \n  get selectedTokens() {\n    return this.state.data.selectedTokens\n  }\n\n  set selectedTokens(tokens) {\n    this.state.data.selectedTokens = tokens;\n  }\n\n}\n\nexport default ClientTokenService;","// @ts-ignore\nimport tokenImage from './../../../theme/fab-button.svg';\n\nexport const tokenComponent = (data:any, index:number) => {\n  return `\n      <div class='token'>\n        <div class='content'>\n          <svg class='emblem' src=${tokenImage} />\n          <div class='data'>\n            <p class='title'>Devcon Ticket #${index+1}</p>\n            <p class='detail'>Discount for Hotels and VIP Section</p>\n          </div>\n        </div>\n        <div class='toggle'>\n          <input onClick='tokenToggleSelection()' data-index='${index}' data-token='${JSON.stringify(data)}' type='checkbox' name='toggle${index}' class='mobileToggle' id='toggle${index}'>\n          <label for='toggle${index}'></label>\n        </div>\n      </div>\n    `;\n}\n\nexport default tokenComponent;","export default \"data:image/svg+xml,export default \\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDM1IDM1IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoNC43NDA3NSwwLDAsNC43NDA3NSwwLjM0NTM5LC0wLjAwODY3NzQzKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMy42MTUiIGN5PSIzLjcwOSIgcj0iMy42NTQiIHN0eWxlPSJmaWxsOnJnYig0OCw0OCw4Mik7Ii8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNy41ODMxMSw1Ljg0MTk4KSI+CiAgICAgICAgPHBhdGggZD0iTTMzNS4yMSwyNzAuNzEiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0yMzguNDMxLDE2Ny4xMjNMMzM1LjQyLDIxNy40NkwzMzUuNDIsMEwyMzguNDMxLDE2Ny4xMjNaIiBzdHlsZT0iZmlsbDpyZ2IoNTAsMTYzLDIxNSk7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik00MjkuNzM0LDE2Ny4xMjNMMzM1LjQyLDIxNy40NkwzMzUuNDIsMEw0MjkuNzM0LDE2Ny4xMjNaIiBzdHlsZT0iZmlsbDpyZ2IoMzMsNjcsMTQ1KTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjIwLjA2cHg7Ii8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNy41ODMxMSw1Ljg0MTk4KSI+CiAgICAgICAgPHBhdGggZD0iTTI2Mi4xMSwxNzAuNzdMMzM1LjQyLDIxNy40NkwzMzUuNDIsNDMuNDlMMjYyLjExLDE3MC43N1oiIHN0eWxlPSJmaWxsOnJnYigyMjgsMzUsMzkpO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MjAuMDZweDsiLz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8cGF0aCBkPSJNNDA4Ljc0LDE3MC43N0wzMzUuNDIsMjE3LjQ2TDMzNS40Miw0My40OUw0MDguNzQsMTcwLjc3WiIgc3R5bGU9ImZpbGw6cmdiKDEyOCwyMSwyOCk7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0yODAuNDQsMTgyLjQ0TDMzNS40MiwyMTcuNDZMMzM1LjQyLDg2Ljk5TDI4MC40NCwxODIuNDRaIiBzdHlsZT0iZmlsbDpyZ2IoMjUyLDIwNiwxMyk7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0zOTAuNDEsMTgyLjQ0TDMzNS40MiwyMTcuNDZMMzM1LjQyLDg2Ljk5TDM5MC40MSwxODIuNDRaIiBzdHlsZT0iZmlsbDpyZ2IoMjQyLDE4MCwzNyk7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0yOTguNzYsMTk0LjEyTDMzNS40MiwyMTcuNDZMMzM1LjQyLDEzMC40OEwyOTguNzYsMTk0LjEyWiIgc3R5bGU9ImZpbGw6cmdiKDI0OSwyMzksOTYpO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MjAuMDZweDsiLz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8cGF0aCBkPSJNMzcyLjA4LDE5NC4xMkwzMzUuNDIsMjE3LjQ2TDMzNS40MiwxMzAuNDhMMzcyLjA4LDE5NC4xMloiIHN0eWxlPSJmaWxsOnJnYigyMzYsMjI1LDI2KTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjIwLjA2cHg7Ii8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNy41ODMxMSw1Ljg0MTk4KSI+CiAgICAgICAgPHBhdGggZD0iTTQyOS43MzQsMTY3LjIzMkwzMzUuNDIsMzExLjc5TDMzNS40MiwyMzYuMjlMNDI5LjczNCwxNjcuMjMyWiIgc3R5bGU9ImZpbGw6cmdiKDMzLDY3LDE0NSk7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0yMzguODYxLDE2Ny4yMzJMMzM1LjQyLDMxMS43OUwzMzUuNDIsMjM2LjI5TDIzOC44NjEsMTY3LjIzMloiIHN0eWxlPSJmaWxsOnJnYig1MCwxNjMsMjE1KTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjIwLjA2cHg7Ii8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNy41ODMxMSw1Ljg0MTk4KSI+CiAgICAgICAgPHBhdGggZD0iTTM5NS4wNSwxOTguMjZMMzM1LjQzLDI4NS4zNUwzMzUuNDMsMjM2LjIzTDM5NS4wNSwxOTguMjZaIiBzdHlsZT0iZmlsbDpyZ2IoMTI4LDIxLDI4KTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjIwLjA2cHg7Ii8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNy41ODMxMSw1Ljg0MTk4KSI+CiAgICAgICAgPHBhdGggZD0iTTI3Ni4wOCwxOTguMjZMMzM1LjQzLDI4NS4zNUwzMzUuNDMsMjM2LjIzTDI3Ni4wOCwxOTguMjZaIiBzdHlsZT0iZmlsbDpyZ2IoMjI4LDM1LDM5KTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjIwLjA2cHg7Ii8+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNy41ODMxMSw1Ljg0MTk4KSI+CiAgICAgICAgPHBhdGggZD0iTTM2Mi40NiwyMTkuMDJMMzM1LjQ2LDI1OC40NUwzMzUuNDYsMjM2LjIxTDM2Mi40NiwyMTkuMDJaIiBzdHlsZT0iZmlsbDpyZ2IoMjQyLDE4MCwzNyk7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyMC4wNnB4OyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC4wNzQ3ODEyLDAsMCwwLjA3NDc4MTIsLTcuNTgzMTEsNS44NDE5OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0zMDguNTksMjE5LjAyTDMzNS40NiwyNTguNDVMMzM1LjQ2LDIzNi4yMUwzMDguNTksMjE5LjAyWiIgc3R5bGU9ImZpbGw6cmdiKDI1MiwyMDYsMTMpO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MjAuMDZweDsiLz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE4Ljc1MiIgeT0iMjUuMjQ2IiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE4Ljc1MiIgeT0iMTYuOTE3IiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE2MjMsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE5Ljg2MiIgeT0iMTkuMDAzIiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjIyLjA3OCIgeT0iMTkuMDAzIiB3aWR0aD0iMy4zNzRweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzUwNCwwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjIwLjk3MyIgeT0iMjEuMDc4IiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE2MjMsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE5Ljg2MiIgeT0iMjMuMTU5IiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE2MjMsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE3LjY0MSIgeT0iMjMuMTU5IiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE2MjMsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE1LjQxOSIgeT0iMTkuMDAzIiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE2LjUyNiIgeT0iMjEuMDc4IiB3aWR0aD0iMy4zNzRweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzUwNCwwLDAsMC43ODE2MjMsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE3LjY0MSIgeT0iMTkuMDAzIiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE5Ljg2MiIgeT0iMTQuODQxIiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDc0NzgxMiwwLDAsMC4wNzQ3ODEyLC03LjU4MzExLDUuODQxOTgpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxMy4zNzIzLC0wLC0wLDEzLjM3MjMsMTAxLjQwNCwtNzguMTIxKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI19JbWFnZTEiIHg9IjE3LjY0MSIgeT0iMTQuODQxIiB3aWR0aD0iMy4zNzNweCIgaGVpZ2h0PSIzLjEyNnB4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg0MzMxNywwLDAsMC43ODE0MzYsMCwwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsLTAuODE5MTkzLC0xLjI0MzMpIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNi43NjM5Miw3LjA4NTI4KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zMzUuMjEsMjcwLjcxIiBzdHlsZT0iZmlsbDpub25lOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgwLjA3NDc4MTIsMCwwLDAuMDc0NzgxMiwtNi43NjM5Miw3LjA4NTI4KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yNDMuNzgsMTU5LjFMMzM1LjQyLDIxNy40NkwzMzUuNDIsMEwyNDMuNzgsMTU5LjFaIiBzdHlsZT0iZmlsbDpyZ2IoNTAsMTYzLDIxNSk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00MjcuMDYsMTU5LjFMMzM1LjQyLDIxNy40NkwzMzUuNDIsMEw0MjcuMDYsMTU5LjFaIiBzdHlsZT0iZmlsbDpyZ2IoMzMsNjcsMTQ1KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTI2Mi4xMSwxNzAuNzdMMzM1LjQyLDIxNy40NkwzMzUuNDIsNDMuNDlMMjYyLjExLDE3MC43N1oiIHN0eWxlPSJmaWxsOnJnYigyMjgsMzUsMzkpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNNDA4Ljc0LDE3MC43N0wzMzUuNDIsMjE3LjQ2TDMzNS40Miw0My40OUw0MDguNzQsMTcwLjc3WiIgc3R5bGU9ImZpbGw6cmdiKDEyOCwyMSwyOCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yODAuNDQsMTgyLjQ0TDMzNS40MiwyMTcuNDZMMzM1LjQyLDg2Ljk5TDI4MC40NCwxODIuNDRaIiBzdHlsZT0iZmlsbDpyZ2IoMjUyLDIwNiwxMyk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zOTAuNDEsMTgyLjQ0TDMzNS40MiwyMTcuNDZMMzM1LjQyLDg2Ljk5TDM5MC40MSwxODIuNDRaIiBzdHlsZT0iZmlsbDpyZ2IoMjQyLDE4MCwzNyk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yOTguNzYsMTk0LjEyTDMzNS40MiwyMTcuNDZMMzM1LjQyLDEzMC40OEwyOTguNzYsMTk0LjEyWiIgc3R5bGU9ImZpbGw6cmdiKDI0OSwyMzksOTYpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzcyLjA4LDE5NC4xMkwzMzUuNDIsMjE3LjQ2TDMzNS40MiwxMzAuNDhMMzcyLjA4LDE5NC4xMloiIHN0eWxlPSJmaWxsOnJnYigyMzYsMjI1LDI2KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQyNy4wNiwxNzcuOTNMMzM1LjQyLDMxMS43OUwzMzUuNDIsMjM2LjI5TDQyNy4wNiwxNzcuOTNaIiBzdHlsZT0iZmlsbDpyZ2IoMzMsNjcsMTQ1KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTI0NC4yMSwxNzcuOTNMMzM1LjQyLDMxMS43OUwzMzUuNDIsMjM2LjI5TDI0NC4yMSwxNzcuOTNaIiBzdHlsZT0iZmlsbDpyZ2IoNTAsMTYzLDIxNSk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zOTUuMDUsMTk4LjI2TDMzNS40MywyODUuMzVMMzM1LjQzLDIzNi4yM0wzOTUuMDUsMTk4LjI2WiIgc3R5bGU9ImZpbGw6cmdiKDEyOCwyMSwyOCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yNzYuMDgsMTk4LjI2TDMzNS40MywyODUuMzVMMzM1LjQzLDIzNi4yM0wyNzYuMDgsMTk4LjI2WiIgc3R5bGU9ImZpbGw6cmdiKDIyOCwzNSwzOSk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNjIuNDYsMjE5LjAyTDMzNS40NiwyNTguNDVMMzM1LjQ2LDIzNi4yMUwzNjIuNDYsMjE5LjAyWiIgc3R5bGU9ImZpbGw6cmdiKDI0MiwxODAsMzcpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzA4LjU5LDIxOS4wMkwzMzUuNDYsMjU4LjQ1TDMzNS40NiwyMzYuMjFMMzA4LjU5LDIxOS4wMloiIHN0eWxlPSJmaWxsOnJnYigyNTIsMjA2LDEzKTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTMzNS40MiwyMTcuNDZMMzQ3Ljk1LDE5NS43MkwzMjIuOSwxOTUuNzJMMzM1LjQyLDIxNy40NloiIHN0eWxlPSJmaWxsOndoaXRlO2ZpbGwtb3BhY2l0eTowLjc1O2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzM1LjQyLDEzMC40OEwzNDcuOTUsMTA4LjczTDMyMi45LDEwOC43M0wzMzUuNDIsMTMwLjQ4WiIgc3R5bGU9ImZpbGw6d2hpdGU7ZmlsbC1vcGFjaXR5OjAuNzU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNDcuOTUsMTUyLjIyTDM2MC40NywxMzAuNDhMMzM1LjQyLDEzMC40OEwzNDcuOTUsMTUyLjIyWiIgc3R5bGU9ImZpbGw6d2hpdGU7ZmlsbC1vcGFjaXR5OjAuNzU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNzMsMTUyLjIyTDM4NS41MywxMzAuNDhMMzYwLjQ3LDEzMC40OEwzNzMsMTUyLjIyWiIgc3R5bGU9ImZpbGw6d2hpdGU7ZmlsbC1vcGFjaXR5OjAuNzU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNjAuNDcsMTczLjk3TDM3MywxNTIuMjJMMzQ3Ljk1LDE1Mi4yMkwzNjAuNDcsMTczLjk3WiIgc3R5bGU9ImZpbGw6d2hpdGU7ZmlsbC1vcGFjaXR5OjAuNzU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNDcuOTUsMTk1LjcyTDM2MC40NywxNzMuOTdMMzM1LjQyLDE3My45N0wzNDcuOTUsMTk1LjcyWiIgc3R5bGU9ImZpbGw6d2hpdGU7ZmlsbC1vcGFjaXR5OjAuNzU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zMjIuOSwxOTUuNzJMMzM1LjQyLDE3My45N0wzMTAuMzcsMTczLjk3TDMyMi45LDE5NS43MloiIHN0eWxlPSJmaWxsOndoaXRlO2ZpbGwtb3BhY2l0eTowLjc1O2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMjk3Ljg0LDE1Mi4yMkwyODUuMzIsMTMwLjQ4TDMxMC4zNywxMzAuNDhMMjk3Ljg0LDE1Mi4yMloiIHN0eWxlPSJmaWxsOndoaXRlO2ZpbGwtb3BhY2l0eTowLjc1O2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzEwLjM3LDE3My45N0wyOTcuODQsMTUyLjIyTDMyMi45LDE1Mi4yMkwzMTAuMzcsMTczLjk3WiIgc3R5bGU9ImZpbGw6d2hpdGU7ZmlsbC1vcGFjaXR5OjAuNzU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zMjIuOSwxNTIuMjJMMzEwLjM3LDEzMC40OEwzMzUuNDIsMTMwLjQ4TDMyMi45LDE1Mi4yMloiIHN0eWxlPSJmaWxsOndoaXRlO2ZpbGwtb3BhY2l0eTowLjc1O2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzQ3Ljk1LDEwOC43M0wzNjAuNDcsODYuOTlMMzM1LjQyLDg2Ljk5TDM0Ny45NSwxMDguNzNaIiBzdHlsZT0iZmlsbDp3aGl0ZTtmaWxsLW9wYWNpdHk6MC43NTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTMyMi45LDEwOC43M0wzMTAuMzcsODYuOTlMMzM1LjQyLDg2Ljk5TDMyMi45LDEwOC43M1oiIHN0eWxlPSJmaWxsOndoaXRlO2ZpbGwtb3BhY2l0eTowLjc1O2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KICAgIDxkZWZzPgogICAgICAgIDxpbWFnZSBpZD0iX0ltYWdlMSIgd2lkdGg9IjRweCIgaGVpZ2h0PSI0cHgiIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVFBQUFBRUNBWUFBQUNwOFo1K0FBQUFDWEJJV1hNQUFBN0VBQUFPeEFHVkt3NGJBQUFBTlVsRVFWUUltV1A4Ly8vL1pBWUdCalVHQ0xqRnhNREF3TStBQUh4TURBd004eGtZR05pZ2VENExBd1BEQVFZR0JoZW9pb01BVVM4SHhzeGRvY0VBQUFBQVNVVk9SSzVDWUlJPSIvPgogICAgPC9kZWZzPgo8L3N2Zz4K\\\"\"","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.tk-modal {\\n  font-family: 'Source Sans Pro', sans-serif;\\n  position: fixed;\\n  bottom: 24px;\\n  right: 24px;\\n}\\n\\n.tk-modal button {\\n  height:80px;\\n  width:80px;\\n  border: 0;\\n  box-shadow: 0 2px 5px 0 #676767;\\n  border-radius: 64px;\\n  cursor: pointer;\\n  z-index: 999;\\n  position: relative;\\n}\\n\\n/* animation fix: https://stackoverflow.com/questions/3331353/transitions-on-the-css-display-property */\\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\\n.tk-modal .modal.open { animation: fadeIn 0.5s; opacity: 1; }\\n\\n.tk-modal .modal {\\n  opacity: 0;\\n  position: absolute;\\n  top: -290px;\\n  left: -340px;\\n  height: 266px;\\n  width: 355px;\\n  padding: 0 0 37px;\\n  box-shadow: 0 2px 4px 0 rgba(103, 103, 103, 0.5);\\n  background-color: #ffffff;\\n  z-index: 888;\\n}\\n\\n.tk-modal .modal .brand {\\n  width: 355px;\\n  height: 4px;\\n  background-color: #303052;\\n}\\n\\n.tk-modal .modal .headline {\\n  width: 246px;\\n  height: 41px;\\n  margin: 18px 98px 0px 16px;\\n  font-size: 18px;\\n  font-weight: bold;\\n  font-stretch: normal;\\n  font-style: normal;\\n  line-height: 1.71;\\n  letter-spacing: normal;\\n  color: #000000;\\n}\\n\\n.tk-modal .modal .token-container {\\n  height: 222px;\\n  overflow: scroll;\\n}\\n\\n.tk-modal .modal .token {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  width: 360px;\\n  height: 80px;\\n  border-top: solid 1px #e9e9e9;\\n}\\n\\n.tk-modal .modal .content {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.tk-modal .modal .token:last-child {\\n  border-bottom: solid 1px #e9e9e9;  \\n}\\n\\n.tk-modal .modal .token .emblem {\\n  width: 44px;\\n  height: 44px;\\n  margin: 0 14px;\\n}\\n\\n.tk-modal .modal .token .detail {\\n  height: 20px;\\n  font-size: 11px;\\n  font-weight: normal;\\n  font-stretch: normal;\\n  font-style: normal;\\n  line-height: 1.6;\\n  letter-spacing: normal;\\n  color: #727272;\\n  margin: 0;\\n}\\n\\n.tk-modal .modal .token .title {\\n  height: 34px;\\n  margin: 0 ;\\n  font-size: 18px;\\n  font-weight: normal;\\n  font-stretch: normal;\\n  font-style: normal;\\n  line-height: 1.8;\\n  letter-spacing: normal;\\n  color: #000000;\\n}\\n\\n.tk-modal .modal .toggle {\\n  transform: scale(0.7);\\n  width: 55px;\\n  margin-right: 7px;\\n  border-radius: 5px;\\n  background: white;\\n  cursor: pointer;\\n}\\n.tk-modal .modal .toggle input.mobileToggle {\\n  opacity: 0;\\n  position: absolute;\\n}\\n.tk-modal .modal .toggle input.mobileToggle + label {\\n  position: relative;\\n  display: inline-block;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  transition: 0.2s ease;\\n  height: 19px;\\n  width: 50px;\\n  border: 3px solid #e4e4e4;\\n  border-radius: 60px;\\n  background: #c6c5c5;\\n  cursor: pointer;\\n}\\n.tk-modal .modal .toggle input.mobileToggle + label:before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  display: block;\\n  transition: 0.2s cubic-bezier(0.24, 0, 0.5, 1);\\n  height: 19px;\\n  width: 51px;\\n  top: 0;\\n  left: 0;\\n  border-radius: 19px;\\n}\\n.tk-modal .modal .toggle input.mobileToggle + label:after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  display: block;\\n  box-shadow: 0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 0px 0 hsla(0, 0%, 0%, 0.04), 0 4px 9px hsla(0, 0%, 0%, 0.13), 0 3px 3px hsla(0, 0%, 0%, 0.05);\\n  transition: 0.25s cubic-bezier(0.54, 1.6, 0.5, 1);\\n  background: #037fed;\\n  height: 28px;\\n  width: 28px;\\n  top: -5px;\\n  left: 0px;\\n  border-radius: 60px;\\n}\\n.tk-modal .modal .toggle input.mobileToggle:checked + label:before {\\n  background: #88bff6;\\n  transition: width 0.2s cubic-bezier(0, 0, 0, 0.1);\\n}\\n.tk-modal .modal .toggle input.mobileToggle:checked + label:after {\\n  left: 24px;\\n}\\n\\n.tk-modal .modal .toggle input:focus + label\\n{\\n  border: 3px solid #005fcc !important;\\n}\\n\\n\\n\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}